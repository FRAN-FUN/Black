/*

 Blacksmith 2D v0.5.10

 SIMPLIFIED BSD LICENSE
 ======================

 Copyright 2019 Borna Technology Ltd. All rights reserved.

 Redistribution and use in source and binary forms, with or without modification,
 are permitted provided that the following conditions are met:

 1. Redistributions of source code must retain the above copyright notice, this list of
 conditions and the following disclaimer.

 2. Redistributions in binary form must reproduce the above copyright notice, this list
 of conditions and the following disclaimer in the documentation and/or other materials
 provided with the distribution.

 THIS SOFTWARE IS PROVIDED BY BORNA TECHNOLOGY "AS IS" AND ANY EXPRESS OR IMPLIED
 WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
 FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL BORNA TECHNOLOGY OR
 CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
 ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

 The views and conclusions contained in the software and documentation are those of the
 authors and should not be interpreted as representing official policies, either expressed
 or implied, of Borna Technology.
*/
'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(f){var g=0;return function(){return g<f.length?{done:!1,value:f[g++]}:{done:!0}}};$jscomp.arrayIterator=function(f){return{next:$jscomp.arrayIteratorImpl(f)}};$jscomp.makeIterator=function(f){var g="undefined"!=typeof Symbol&&Symbol.iterator&&f[Symbol.iterator];return g?g.call(f):$jscomp.arrayIterator(f)};$jscomp.arrayFromIterator=function(f){for(var g,m=[];!(g=f.next()).done;)m.push(g.value);return m};
$jscomp.arrayFromIterable=function(f){return f instanceof Array?f:$jscomp.arrayFromIterator($jscomp.makeIterator(f))};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(f){var g=function(){};g.prototype=f;return new g};$jscomp.underscoreProtoCanBeSet=function(){var f={a:!0},g={};try{return g.__proto__=f,g.a}catch(m){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(f,g){f.__proto__=g;if(f.__proto__!==g)throw new TypeError(f+" is not extensible");return f}:null;
$jscomp.inherits=function(f,g){f.prototype=$jscomp.objectCreate(g.prototype);f.prototype.constructor=f;if($jscomp.setPrototypeOf){var m=$jscomp.setPrototypeOf;m(f,g)}else for(m in g)if("prototype"!=m)if(Object.defineProperties){var u=Object.getOwnPropertyDescriptor(g,m);u&&Object.defineProperty(f,m,u)}else f[m]=g[m];f.superClass_=g.prototype};$jscomp.getGlobal=function(f){return"undefined"!=typeof window&&window===f?f:"undefined"!=typeof global&&null!=global?global:f};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(f,g,m){f!=Array.prototype&&f!=Object.prototype&&(f[g]=m.value)};$jscomp.polyfill=function(f,g,m,u){if(g){m=$jscomp.global;f=f.split(".");for(u=0;u<f.length-1;u++){var O=f[u];O in m||(m[O]={});m=m[O]}f=f[f.length-1];u=m[f];g=g(u);g!=u&&null!=g&&$jscomp.defineProperty(m,f,{configurable:!0,writable:!0,value:g})}};
$jscomp.polyfill("Number.EPSILON",function(f){return Math.pow(2,-52)},"es6","es3");$jscomp.polyfill("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991},"es6","es3");$jscomp.checkEs6ConformanceViaProxy=function(){try{var f={},g=Object.create(new $jscomp.global.Proxy(f,{get:function(m,u,O){return m==f&&"q"==u&&O==g}}));return!0===g.q}catch(m){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();
$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(f,g){this.$jscomp$symbol$id_=f;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:g})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};
$jscomp.Symbol=function(){function f(m){if(this instanceof f)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(m||"")+"_"+g++,m)}var g=0;return f}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var f=$jscomp.global.Symbol.iterator;f||(f=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[f]&&$jscomp.defineProperty(Array.prototype,f,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var f=$jscomp.global.Symbol.asyncIterator;f||(f=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(f){$jscomp.initSymbolIterator();f={next:f};f[$jscomp.global.Symbol.iterator]=function(){return this};return f};$jscomp.owns=function(f,g){return Object.prototype.hasOwnProperty.call(f,g)};
$jscomp.polyfill("WeakMap",function(f){function g(){if(!f||!Object.seal)return!1;try{var g=Object.seal({}),m=Object.seal({}),ua=new f([[g,2],[m,3]]);if(2!=ua.get(g)||3!=ua.get(m))return!1;ua.delete(g);ua.set(m,4);return!ua.has(g)&&4==ua.get(m)}catch(k){return!1}}function m(){}function u(f){if(!$jscomp.owns(f,I)){var g=new m;$jscomp.defineProperty(f,I,{value:g})}}function O(f){var g=Object[f];g&&(Object[f]=function(f){if(f instanceof m)return f;u(f);return g(f)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(f&&
$jscomp.ES6_CONFORMANCE)return f}else if(g())return f;var I="$jscomp_hidden_"+Math.random();O("freeze");O("preventExtensions");O("seal");var Na=0,pa=function(f){this.id_=(Na+=Math.random()+1).toString();if(f){f=$jscomp.makeIterator(f);for(var g;!(g=f.next()).done;)g=g.value,this.set(g[0],g[1])}};pa.prototype.set=function(f,g){u(f);if(!$jscomp.owns(f,I))throw Error("WeakMap key fail: "+f);f[I][this.id_]=g;return this};pa.prototype.get=function(f){return $jscomp.owns(f,I)?f[I][this.id_]:void 0};pa.prototype.has=
function(f){return $jscomp.owns(f,I)&&$jscomp.owns(f[I],this.id_)};pa.prototype.delete=function(f){return $jscomp.owns(f,I)&&$jscomp.owns(f[I],this.id_)?delete f[I][this.id_]:!1};return pa},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(f){function g(){if($jscomp.ASSUME_NO_NATIVE_MAP||!f||"function"!=typeof f||!f.prototype.entries||"function"!=typeof Object.seal)return!1;try{var g=Object.seal({x:4}),m=new f($jscomp.makeIterator([[g,"s"]]));if("s"!=m.get(g)||1!=m.size||m.get({x:4})||m.set({x:4},"t")!=m||2!=m.size)return!1;var u=m.entries(),k=u.next();if(k.done||k.value[0]!=g||"s"!=k.value[1])return!1;k=u.next();return k.done||4!=k.value[0].x||"t"!=k.value[1]||!u.next().done?!1:!0}catch(G){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(f&&$jscomp.ES6_CONFORMANCE)return f}else if(g())return f;$jscomp.initSymbolIterator();var m=new WeakMap,u=function(f){this.data_={};this.head_=Na();this.size=0;if(f){f=$jscomp.makeIterator(f);for(var g;!(g=f.next()).done;)g=g.value,this.set(g[0],g[1])}};u.prototype.set=function(f,g){f=0===f?0:f;var m=O(this,f);m.list||(m.list=this.data_[m.id]=[]);m.entry?m.entry.value=g:(m.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:f,
value:g},m.list.push(m.entry),this.head_.previous.next=m.entry,this.head_.previous=m.entry,this.size++);return this};u.prototype.delete=function(f){f=O(this,f);return f.entry&&f.list?(f.list.splice(f.index,1),f.list.length||delete this.data_[f.id],f.entry.previous.next=f.entry.next,f.entry.next.previous=f.entry.previous,f.entry.head=null,this.size--,!0):!1};u.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=Na();this.size=0};u.prototype.has=function(f){return!!O(this,f).entry};
u.prototype.get=function(f){return(f=O(this,f).entry)&&f.value};u.prototype.entries=function(){return I(this,function(f){return[f.key,f.value]})};u.prototype.keys=function(){return I(this,function(f){return f.key})};u.prototype.values=function(){return I(this,function(f){return f.value})};u.prototype.forEach=function(f,g){for(var m=this.entries(),k;!(k=m.next()).done;)k=k.value,f.call(g,k[1],k[0],this)};u.prototype[Symbol.iterator]=u.prototype.entries;var O=function(f,g){var u=g&&typeof g;"object"==
u||"function"==u?m.has(g)?u=m.get(g):(u=""+ ++pa,m.set(g,u)):u="p_"+g;var k=f.data_[u];if(k&&$jscomp.owns(f.data_,u))for(f=0;f<k.length;f++){var G=k[f];if(g!==g&&G.key!==G.key||g===G.key)return{id:u,list:k,index:f,entry:G}}return{id:u,list:k,index:-1,entry:void 0}},I=function(f,g){var m=f.head_;return $jscomp.iteratorPrototype(function(){if(m){for(;m.head!=f.head_;)m=m.previous;for(;m.next!=m.head;)return m=m.next,{done:!1,value:g(m)};m=null}return{done:!0,value:void 0}})},Na=function(){var f={};
return f.previous=f.next=f.head=f},pa=0;return u},"es6","es3");$jscomp.findInternal=function(f,g,m){f instanceof String&&(f=String(f));for(var u=f.length,O=0;O<u;O++){var I=f[O];if(g.call(m,I,O,f))return{i:O,v:I}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(f){return f?f:function(f,m){return $jscomp.findInternal(this,f,m).v}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(f){return f?f:function(f,m,u){var g=this.length||0;0>m&&(m=Math.max(0,g+m));if(null==u||u>g)u=g;u=Number(u);0>u&&(u=Math.max(0,g+u));for(m=Number(m||0);m<u;m++)this[m]=f;return this}},"es6","es3");
(function(f,g){"object"===typeof exports&&"undefined"!==typeof module?g(exports):"function"===typeof define&&define.amd?define(["exports"],g):(f=f||self,g(f["black-engine"]={}))})(this,function(f){var g=function(){g.assert(!1,"Static class.")};g.isNumber=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];b.forEach(function(a){if("number"!==typeof a||!1!==isNaN(parseFloat(a))||!0!==isFinite(a))if(g.logOnFail&&console.error("[ASSERT]","Not a number."),g.throwOnFail)throw Error("Not a number.");
})};g.assert=function(a,b){if(!0!==a&&(b=null==b?"Assertion failed.":b,g.logOnFail&&console.error("[ASSERT]",b),g.throwOnFail))throw Error(b);};g.assertWarn=function(a,b){!0!==a&&g.warn(null==b?"Assertion warning.":b)};g.assertInfo=function(a,b){!0!==a&&g.info(null==b?"Assertion info.":b)};g.log=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];console.info.apply(console,["%c%s","color: #000000","LOG:"].concat($jscomp.arrayFromIterable(b)))};g.info=function(a){for(var b=[],c=
0;c<arguments.length;++c)b[c-0]=arguments[c];console.info.apply(console,["%c%s","color: #003bd2","INFO:"].concat($jscomp.arrayFromIterable(b)))};g.warn=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];console.info.apply(console,["%c%s","color: #f67400","WARN:"].concat($jscomp.arrayFromIterable(b)))};g.error=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];console.info.apply(console,["%c%s","color: #d50000","ERROR:"].concat($jscomp.arrayFromIterable(b)))};
g.time=function(a){g.timeProfiles[a]=performance.now()};g.timeEnd=function(a){g.timeProfiles[a]=performance.now()-g.timeProfiles[a]};g.throwOnFail=!0;g.logOnFail=!1;g.timeProfiles={};var m=function(){};m.randomBetween=function(a,b){return Math.floor(Math.random()*(b-a+1)+a)};m.clamp=function(a,b,c){return a<b?b:a>c?c:a};m.distance=function(a,b,c,d){a-=c;b-=d;return Math.sqrt(a*a+b*b)};m.distanceSqr=function(a,b,c,d){a-=c;b-=d;return a*a+b*b};m.angleBetween=function(a,b,c,d){return Math.atan2(d-b,
c-a)};m.mapRange=function(a,b,c,d,e){return d+(e-d)*(a-b)/(c-b)};m.lerp=function(a,b,c){return a+c*(b-a)};m.equals=function(a,b,c){c=void 0===c?Number.EPSILON:c;return a-c<b&&a+c>b};m.PI_Q=Math.PI/4;m.PI2=2*Math.PI;m.DEG2RAD=.017453292519943295;m.RAD2DEG=57.29577951308232;var u=function(a){this.mRepeat=0;this.mPerm=[];for(a=0;512>a;a++)this.mPerm.push(u.__permutation[a%256])};u.prototype.__perlin=function(a,b,c){0<this.mRepeat&&(a%=this.mRepeat,b%=this.mRepeat,c%=this.mRepeat);var d=this.mPerm,e=
~~a&255,h=~~b&255,n=~~c&255;a-=~~a;b-=~~b;var A=c-~~c,f=a*a*a*(a*(6*a-15)+10),g=b*b*b*(b*(6*b-15)+10);c=A*A*A*(A*(6*A-15)+10);var qa=d[d[d[e]+h]+n],p=d[d[d[e]+this.inc(h)]+n],l=d[d[d[e]+h]+this.inc(n)],k=d[d[d[e]+this.inc(h)]+this.inc(n)],m=d[d[d[this.inc(e)]+h]+n],t=d[d[d[this.inc(e)]+this.inc(h)]+n],q=d[d[d[this.inc(e)]+h]+this.inc(n)];d=d[d[d[this.inc(e)]+this.inc(h)]+this.inc(n)];e=this.lerp(this.grad(qa,a,b,A),this.grad(m,a-1,b,A),f);n=this.lerp(this.grad(p,a,b-1,A),this.grad(t,a-1,b-1,A),f);
h=this.lerp(e,n,g);e=this.lerp(this.grad(l,a,b,A-1),this.grad(q,a-1,b,A-1),f);n=this.lerp(this.grad(k,a,b-1,A-1),this.grad(d,a-1,b-1,A-1),f);a=this.lerp(e,n,g);return.5*(this.lerp(h,a,c)+1)};u.prototype.perlin=function(a,b,c,d,e){d=void 0===d?1:d;e=void 0===e?1:e;if(1===d&&1===e)return this.__perlin(a,b,c);for(var h=0,n=1,A=1,f=0,g=0;g<d;g++)h+=this.__perlin(a*n,b*n,c*n)*A,f+=A,A*=e,n*=2;return h/f};u.prototype.inc=function(a){a++;0<this.mRepeat&&(a%=this.mRepeat);return a};u.prototype.grad=function(a,
b,c,d){switch(a&15){case 0:return b+c;case 1:return-b+c;case 2:return b-c;case 3:return-b-c;case 4:return b+d;case 5:return-b+d;case 6:return b-d;case 7:return-b-d;case 8:return c+d;case 9:return-c+d;case 10:return c-d;case 11:return-c-d;case 12:return c+b;case 13:return-c+d;case 14:return c-b;case 15:return-c-d}};u.prototype.lerp=function(a,b,c){return a+c*(b-a)};u.__permutation=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,
75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,
129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];var O=function(){this.mMap=new Map};O.prototype.has=function(a,b){return this.mMap.has(a)&&this.mMap.get(a).has(b)};O.prototype.set=function(a,b,c){var d=this.mMap.get(a);null==d&&(d=new Map,this.mMap.set(a,
d));d.set(b,c)};O.prototype.get=function(a,b){return null!=this.mMap.get(a)?this.mMap.get(a)&&this.mMap.get(a).get(b):null};var I=function(a,b){this.mReleased=[];this.mCapacity=void 0===b?100:b;this.mType=a};I.prototype.releaseAll=function(){this.mReleased.splice(0,this.mReleased.length)};I.prototype.get=function(){return 0<this.mReleased.length?this.mReleased.pop():new this.mType};I.prototype.release=function(a){(-1===this.mCapacity||this.mReleased.length<this.mCapacity)&&this.mReleased.push(a)};
$jscomp.global.Object.defineProperties(I.prototype,{capacity:{configurable:!0,enumerable:!0,get:function(){return this.mCapacity},set:function(a){g.assert(0!==a,"Capacity cannot be equal to zero.");g.assert(-1<a,"Capacity cannot be smaller then -1.");this.mCapacity=a;this.mCapacity>this.mReleased.length&&this.mReleased.splice(0,this.mReleased.length-this.mCapacity)}}});var Na=function(a,b,c){this.r=void 0===a?0:a;this.g=void 0===b?0:b;this.b=void 0===c?0:c},pa=function(a,b,c){this.h=void 0===a?0:
a;this.s=void 0===b?0:b;this.v=void 0===c?0:c},U=function(){};U.hex2rgb=function(a){return new Na(a>>16&255,a>>8&255,a&255)};U.rgb2hex=function(a){return a.r<<16|a.g<<8|a.b};U.hsv2rgb=function(a){var b=a.h,c=a.s;a=a.v;var d=0,e=0,h=0,n=Math.floor(6*b),A=6*b-n;b=a*(1-c);var f=a*(1-A*c);c=a*(1-(1-A)*c);switch(n%6){case 0:d=a;e=c;h=b;break;case 1:d=f;e=a;h=b;break;case 2:d=b;e=a;h=c;break;case 3:d=b;e=f;h=a;break;case 4:d=c;e=b;h=a;break;case 5:d=a,e=b,h=f}return new Na(255*d,255*e,255*h)};U.rgb2hsv=
function(a){var b=a.r,c=a.g;a=a.b;b/=255;c/=255;a/=255;var d=Math.max(b,c,a),e=Math.min(b,c,a),h=0,n=d-e;if(d===e)h=0;else{switch(d){case b:h=(c-a)/n+(c<a?6:0);break;case c:h=(a-b)/n+2;break;case a:h=(b-c)/n+4}h/=6}return new pa(h,0===d?0:n/d,d)};U.lerpHSV=function(a,b,c){c=void 0===c?.5:c;a=U.rgb2hsv(U.hex2rgb(a));b=U.rgb2hsv(U.hex2rgb(b));var d=0,e=b.h-a.h;if(a.h>b.h){var h=b.h;b.h=a.h;a.h=h;e=-e;c=1-c}.5<e&&(a.h+=1,d=(a.h+c*(b.h-a.h))%1);.5>=e&&(d=a.h+c*e);return U.rgb2hex(U.hsv2rgb(new pa(d,a.s+
c*(b.s-a.s),a.v+c*(b.v-a.v))))};U.hexColorToString=function(a){a=a.toString(16);return"#000000".substring(0,7-a.length)+a};U.intToRGBA=function(a,b){return"rgba("+(a>>16&255)+", "+(a>>8&255)+", "+(a&255)+", "+(void 0===b?1:b)+")"};var Qc={"*":"[^/]+","**":".+/?[^/]+","**/":".+/?"},ua=function(a){this.mRegExp=new RegExp("^"+a.replace(/\./g,"\\.").replace(/\*\*$/g,".+").replace(/(?:\*\*\/|\*\*|\*)/g,function(a){return Qc[a]})+"$")};ua.prototype.test=function(a){return this.mRegExp.test(a)};var k=function(a,
b){a=void 0===a?0:a;b=void 0===b?0:b;g.isNumber(a,b);this.x=a;this.y=b};k.prototype.set=function(a,b){a=void 0===a?0:a;b=void 0===b?0:b;g.isNumber(a,b);this.x=a;this.y=b;return this};k.prototype.add=function(a){this.x+=a.x;this.y+=a.y;return this};k.prototype.subtract=function(a){this.x-=a.x;this.y-=a.y;return this};k.prototype.distance=function(a){var b=this.x-a.x;a=this.y-a.y;return Math.sqrt(b*b+a*a)};k.prototype.distanceSqr=function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a};k.prototype.multiply=
function(a){this.x*=a.x;this.y*=a.y;return this};k.prototype.multiplyScalar=function(a){g.isNumber(a);this.x*=a;this.y*=a;return this};k.prototype.dot=function(a){return this.x*a.x+this.y*a.y};k.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};k.prototype.lengthSqr=function(){return this.x*this.x+this.y*this.y};k.prototype.normalize=function(){var a=this.lengthSqr();0<a?(a=Math.sqrt(a),this.x/=a,this.y/=a):this.y=this.x=0;return this};k.prototype.clamp=function(a,b){g.isNumber(a,
b);this.x=m.clamp(this.x,a,b);this.y=m.clamp(this.y,a,b);return this};k.prototype.clampLength=function(a,b){g.isNumber(a,b);a=m.clamp(this.length(),a,b);this.normalize();this.multiplyScalar(a);return this};k.prototype.lerp=function(a,b){g.isNumber(b);this.x=m.lerp(this.x,a.x,b);this.y=m.lerp(this.y,a.y,b);return this};k.prototype.copyTo=function(a){a.x=this.x;a.y=this.y;return a};k.prototype.copyFrom=function(a){this.x=a.x;this.y=a.y;return this};k.prototype.clone=function(){return new k(this.x,this.y)};
k.prototype.equals=function(a,b){b=void 0===b?Number.EPSILON:b;return null!==a&&Math.abs(a.x-this.x)<b&&Math.abs(a.y-this.y)<b};k.prototype.isEmpty=function(){return 0===this.x&&0===this.y};k.prototype.setRotationFrom=function(a,b){g.isNumber(b);return this.subtract(a).setRotation(b).add(a)};k.prototype.setRotation=function(a){g.isNumber(a);var b=Math.cos(a);a=Math.sin(a);return this.set(this.x*b-this.y*a,this.x*a+this.y*b)};k.prototype.angleBetween=function(a){return Math.atan2(a.y-this.y,a.x-this.x)};
k.prototype.angle=function(){return Math.atan2(this.y,this.x)};k.prototype.perp=function(){return this.set(this.y,-this.x)};k.fromAngle=function(a,b){g.isNumber(a);b=b||new k;return b.set(Math.cos(a),Math.sin(a))};k.randomRange=function(a,b,c){c=c||new k;c.x=Math.random()*(b.x-a.x)+a.x;c.y=Math.random()*(b.y-a.y)+a.y;return c};k.prototype.toString=function(a){a=void 0===a?2:a;return"Vector: { x: "+this.x.toFixed(a)+", y: "+this.y.toFixed(a)+" }"};k.__cache=new k;k.pool=new I(k);var G=function(a,b){this.start=
a;this.end=b};G.prototype.set=function(a,b){this.start=a;this.end=b;return this};G.prototype.clone=function(){return new G(this.start.clone(),this.end.clone())};G.prototype.copyTo=function(a){return a.set(this.start.clone(),this.end.clone())};G.prototype.copyFrom=function(a){return this.set(a.start.clone(),a.end.clone())};G.prototype.equals=function(a,b){b=void 0===b?Number.EPSILON:b;return this.start.equals(a.start,b)&&this.end.equals(a.end,b)||this.start.equals(a.end,b)&&this.end.equals(a.start,
b)};G.prototype.reverse=function(){var a=this.start;this.start=this.end;this.end=a;return this};G.prototype.normalize=function(){this.end.subtract(this.start).normalize().add(this.start);return this};G.prototype.scale=function(a){this.end.subtract(this.start).multiplyScalar(a).add(this.start);return this};G.prototype.zero=function(){return this.set(new k,new k)};G.prototype.length=function(){return this.start.distance(this.end)};G.prototype.center=function(a){a=a||new k;return a.set((this.start.x+
this.end.x)/2,(this.start.y+this.end.y)/2)};G.prototype.containsXY=function(a,b){return this.contains(new k(a,b))};G.prototype.contains=function(a){return this.start.distance(a)+this.end.distance(a)===this.length()};G.prototype.intersects=function(a){var b=this.start,c=this.end,d=a.start;a=a.end;var e=(a.y-d.y)*(c.x-b.x)-(a.x-d.x)*(c.y-b.y);if(0===e)return!1;var h=b.y-d.y,n=b.x-d.x;b=(c.x-b.x)*h-(c.y-b.y)*n;h=((a.x-d.x)*h-(a.y-d.y)*n)/e;n=b/e;return 0<=h&&1>=h&&0<n&&1>n};G.prototype.intersectsCircle=
function(a){var b=this.start,c=this.end;if(a.contains(b)||a.contains(c))return!0;var d=b.distance(c),e=(c.x-b.x)/d;c=(c.y-b.y)/d;d=e*(a.x-b.x)+c*(a.y-b.y);var h=(new k(d*e+b.x,d*c+b.y)).distance(new k(a.x,a.y));if(h<a.r){a=Math.sqrt(Math.pow(a.r,2)-Math.pow(h,2));h=(d+a)*e+b.x;var n=(d+a)*c+b.y;return this.__isInBoundsXY((d-a)*e+b.x,(d-a)*c+b.y)||this.__isInBoundsXY(h,n)}return!1};G.prototype.__isInBoundsXY=function(a,b){var c=this.start.x,d=this.start.y,e=this.end.x,h=this.end.y;return a>Math.min(c,
e)&&a<Math.max(c,e)&&b>Math.min(d,h)&&b<Math.max(d,h)};G.prototype.toString=function(a){a=void 0===a?2:a;return"Line { start: "+this.start.toString(a)+", end: "+this.end.toString(a)+" }"};$jscomp.global.Object.defineProperties(G.prototype,{left:{configurable:!0,enumerable:!0,get:function(){return Math.min(this.start.x,this.end.x)}},right:{configurable:!0,enumerable:!0,get:function(){return Math.max(this.start.x,this.end.x)}},top:{configurable:!0,enumerable:!0,get:function(){return Math.min(this.start.y,
this.end.y)}},bottom:{configurable:!0,enumerable:!0,get:function(){return Math.max(this.start.y,this.end.y)}},type:{configurable:!0,enumerable:!0,get:function(){return"Line"}}});G.__cache=new G(new k,new k);var t=function(a,b,c,d){a=void 0===a?0:a;b=void 0===b?0:b;c=void 0===c?0:c;d=void 0===d?0:d;g.isNumber(a,b,c,d);this.x=a;this.y=b;this.width=c;this.height=d};t.prototype.set=function(a,b,c,d){g.isNumber(a,b,c,d);this.x=a;this.y=b;this.width=c;this.height=d;return this};t.prototype.copyFrom=function(a){this.x=
a.x;this.y=a.y;this.width=a.width;this.height=a.height;return this};t.prototype.copyTo=function(a){a.x=this.x;a.y=this.y;a.width=this.width;a.height=this.height;return a};t.prototype.size=function(a){a=a||new k;return a.set(this.width,this.height)};t.prototype.zero=function(){return this.set(0,0,0,0)};t.prototype.equals=function(a,b){b=void 0===b?Number.EPSILON:b;return null!==a&&Math.abs(this.x-a.x)<b&&Math.abs(this.y-a.y)<b&&Math.abs(this.width-a.width)<b&&Math.abs(this.height-a.height)<b};t.prototype.containsXY=
function(a,b){return a>=this.x&&a<=this.right&&b>=this.y&&b<=this.bottom};t.prototype.contains=function(a){return a.x>=this.x&&a.y>=this.y&&a.right<=this.right&&a.bottom<=this.bottom};t.prototype.intersects=function(a){return a.right>this.x&&a.bottom>this.y&&a.x<this.right&&a.y<this.bottom};t.prototype.intersection=function(a,b){b=b||new t;var c=this.x<a.x?a.x:this.x,d=this.right>a.right?a.right:this.right;if(d<=c)return new t;var e=this.y<a.y?a.y:this.y;a=this.bottom>a.bottom?a.bottom:this.bottom;
if(a<=e)return new t;b.set(c,e,d-c,a-e);return b};t.prototype.union=function(a){var b=this.x>a.x?a.x:this.x,c=this.y>a.y?a.y:this.y;return this.set(b,c,(this.right<a.right?a.right:this.right)-b,(this.bottom<a.bottom?a.bottom:this.bottom)-c)};t.prototype.expand=function(a,b,c,d){g.isNumber(a,b,c,d);if(0===this.volume)return this.set(a,b,c,d);var e=this.right,h=this.bottom;this.x>a&&(this.x=a,this.width=e-a);this.y>b&&(this.y=b,this.height=h-b);e<a+c&&(this.width=a+c-this.x);h<b+d&&(this.height=b+d-
this.y);return this};t.prototype.expandXY=function(a,b){a<this.x&&(this.width+=this.x-a,this.x=a);b<this.y&&(this.height+=this.y-b,this.y=b);a>this.x+this.width&&(this.width=a-this.x);b>this.y+this.height&&(this.height=b-this.y);return this};t.prototype.inflate=function(a,b){a=void 0===a?0:a;b=void 0===b?0:b;g.isNumber(a,b);this.x-=a;this.y-=b;this.width+=2*a;this.height+=2*b;return this};t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)};t.prototype.center=function(a){a=
a||new k;return a.set(this.x+.5*this.width,this.y+.5*this.height)};t.prototype.scale=function(a,b){this.width*=a;this.height*=b;return this};t.fromPoints=function(a){var b=new t;if(0===a.length)return b;for(var c=a.length,d=a[0].x,e=a[0].y,h=a[0].x,n=a[0].y,A=1;A<c;A++){var f=a[A],g=f.x;f=f.y;d=Math.min(g,d);h=Math.max(g,h);e=Math.min(f,e);n=Math.max(f,n)}b.x=d;b.y=e;b.width=h-d;b.height=n-e;return b};t.fromPointsXY=function(a){var b=new t;if(2>a.length)return b;for(var c=a.length,d=a[0],e=a[1],h=
a[0],n=a[1],A=2;A<c;A+=2){var f=a[A],g=a[A+1];d=Math.min(f,d);h=Math.max(f,h);e=Math.min(g,e);n=Math.max(g,n)}b.x=d;b.y=e;b.width=h-d;b.height=n-e;return b};t.prototype.toString=function(a){a=void 0===a?2:a;return"Rectangle { x: "+this.x.toFixed(a)+", y: "+this.y.toFixed(a)+", width: "+this.width.toFixed(a)+", height: "+this.height.toFixed(a)+" }"};$jscomp.global.Object.defineProperties(t.prototype,{left:{configurable:!0,enumerable:!0,get:function(){return this.x},set:function(a){g.isNumber(a);this.x=
a}},right:{configurable:!0,enumerable:!0,get:function(){return this.x+this.width},set:function(a){g.isNumber(a);this.x=a-this.width}},top:{configurable:!0,enumerable:!0,get:function(){return this.y},set:function(a){g.isNumber(a);this.y=a}},bottom:{configurable:!0,enumerable:!0,get:function(){return this.y+this.height},set:function(a){g.isNumber(a);this.y=a-this.height}},topLeft:{configurable:!0,enumerable:!0,get:function(){return new k(this.x,this.y)},set:function(a){this.left=a.x;this.top=a.y}},
topRight:{configurable:!0,enumerable:!0,get:function(){return new k(this.right,this.y)},set:function(a){this.right=a.x;this.top=a.y}},bottomRight:{configurable:!0,enumerable:!0,get:function(){return new k(this.right,this.bottom)},set:function(a){this.right=a.x;this.bottom=a.y}},bottomLeft:{configurable:!0,enumerable:!0,get:function(){return new k(this.x,this.bottom)},set:function(a){this.x=a.x;this.bottom=a.y}},volume:{configurable:!0,enumerable:!0,get:function(){return this.width*this.height}},perimeter:{configurable:!0,
enumerable:!0,get:function(){return 2*(this.width+this.height)}},isEmpty:{configurable:!0,enumerable:!0,get:function(){return 0>=this.width||0>=this.height}},lines:{configurable:!0,enumerable:!0,get:function(){return[new G(this.topLeft,this.topRight),new G(this.topRight,this.bottomRight),new G(this.bottomRight,this.bottomLeft),new G(this.bottomLeft,this.topLeft)]}}});t.__cache=new t;t.pool=new I(t);var r=function(a,b,c,d,e,h){a=void 0===a?1:a;b=void 0===b?0:b;c=void 0===c?0:c;d=void 0===d?1:d;e=void 0===
e?0:e;h=void 0===h?0:h;this.data=new Float32Array(6);this.set(a,b,c,d,e,h)};r.prototype.set=function(a,b,c,d,e,h){a=void 0===a?1:a;b=void 0===b?0:b;c=void 0===c?0:c;d=void 0===d?1:d;e=void 0===e?0:e;h=void 0===h?0:h;g.isNumber(a,b,c,d,e,h);var n=this.data;n[0]=a;n[1]=b;n[2]=c;n[3]=d;n[4]=e;n[5]=h;return this};r.prototype.translate=function(a,b){g.isNumber(a,b);var c=this.data,d=c[1],e=c[3],h=c[5];this.data[4]=c[0]*a+c[2]*b+c[4];this.data[5]=d*a+e*b+h;return this};r.prototype.setTranslation=function(a,
b){g.isNumber(a,b);this.data[4]=a;this.data[5]=b;return this};r.prototype.setRotation=function(a,b){b=void 0===b?1:b;g.isNumber(a,b);var c=this.data;c[0]=Math.cos(a)*b;c[2]=Math.sin(a)*b;c[1]=-c[2];c[3]=c[0];return this};r.prototype.rotate=function(a){g.isNumber(a);var b=this.data,c=Math.cos(a);a=Math.sin(a);var d=b[0],e=b[2],h=b[4];b[0]=d*c-b[1]*a;b[1]=d*a+b[1]*c;b[2]=e*c-b[3]*a;b[3]=e*a+b[3]*c;b[4]=h*c-b[5]*a;b[5]=h*a+b[5]*c;return this};r.prototype.scale=function(a,b){g.isNumber(a,b);var c=this.data,
d=c[1],e=c[2],h=c[3];this.data[0]=c[0]*a;this.data[1]=d*a;this.data[2]=e*b;this.data[3]=h*b;return this};r.prototype.skew=function(a,b){var c=Math.sin(a);a=Math.cos(a);var d=Math.sin(b);b=Math.cos(b);var e=this.data;this.set(e[0]*b-e[1]*c,e[0]*d+e[1]*a,e[2]*b-e[3]*c,e[2]*d+e[3]*a,e[4]*b-e[5]*c,e[4]*d+e[5]*a)};r.prototype.identity=function(){return this.set(1,0,0,1,0,0)};r.prototype.prepend=function(a){var b=this.data,c=a.data;a=b[0];var d=b[1],e=b[2],h=b[3],n=b[4],A=b[5],f=c[0],g=c[1],l=c[2],p=c[3],
k=c[4];c=c[5];if(1!==f||0!==g||0!==l||1!==p)b[1]=a*g+d*p,b[0]=a*f+d*l,b[3]=e*g+h*p,b[2]=e*f+h*l;b[5]=n*g+A*p+c;b[4]=n*f+A*l+k;return this};r.prototype.append=function(a){var b=this.data,c=a.data;a=b[0];var d=b[1],e=b[2],h=b[3],n=b[4],A=b[5],f=c[0],g=c[1],l=c[2],p=c[3],k=c[4];c=c[5];b[0]=a*f+e*g;b[1]=d*f+h*g;b[2]=a*l+e*p;b[3]=d*l+h*p;b[4]=a*k+e*c+n;b[5]=d*k+h*c+A;return this};r.prototype.transformXY=function(a,b,c){g.isNumber(a,b);c=c||new k;var d=this.data;c.x=d[0]*a+d[2]*b+d[4];c.y=d[1]*a+d[3]*b+
d[5];return c};r.prototype.transformDirectionXY=function(a,b,c){g.isNumber(a,b);var d=this.data;c=c||new k;c.x=d[0]*a+d[2]*b;c.y=d[1]*a+d[3]*b;return c};r.prototype.transformVector=function(a,b){b=b||new k;var c=this.data;return b.set(c[0]*a.x+c[2]*a.y+c[4],c[1]*a.x+c[3]*a.y+c[5])};r.prototype.transformRect=function(a,b){b=b||new t;var c=Number.MAX_VALUE,d=-Number.MAX_VALUE,e=Number.MAX_VALUE,h=-Number.MAX_VALUE,n=this.data,f=k.pool.get();a=[a.x,a.y,a.x+a.width,a.y,a.x,a.y+a.height,a.x+a.width,a.y+
a.height];for(var g=0;g<a.length;g+=2)f.x=n[0]*a[g]+n[2]*a[g+1]+n[4],f.y=n[1]*a[g]+n[3]*a[g+1]+n[5],c>f.x&&(c=f.x),d<f.x&&(d=f.x),e>f.y&&(e=f.y),h<f.y&&(h=f.y);k.pool.release(f);return b.set(c,e,d-c,h-e)};r.prototype.invert=function(){var a=this.data,b=a[0],c=a[1],d=a[2],e=a[3],h=a[4],n=a[5],f=b*e-c*d;if(0===f)return a[0]=a[1]=a[2]=a[3]=0,a[4]=-h,a[5]=-n,this;f=1/f;a[0]=e*f;a[1]=-c*f;a[2]=-d*f;a[3]=b*f;a[4]=(d*n-e*h)*f;a[5]=(c*h-b*n)*f;return this};r.prototype.__decompose=function(){var a=this.data,
b=a[0],c=a[1],d=a[2],e=a[3],h=a[4];a=a[5];var n=-Math.atan2(-d,e),f=Math.atan2(c,b),g=0,B=0,l=0;1E-5>Math.abs(n+f)?(g=f,0>b&&0<=e&&(g+=0>=g?Math.PI:-Math.PI)):(B=n,l=f);return[h,a,g,Math.sqrt(b*b+c*c),Math.sqrt(d*d+e*e),B,l]};r.prototype.clone=function(){var a=new r,b=this.data;a.set(b[0],b[1],b[2],b[3],b[4],b[5]);return a};r.prototype.copyTo=function(a){var b=this.data,c=a.data;c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];c[4]=b[4];c[5]=b[5];return a};r.prototype.copyFrom=function(a){return a.copyTo(this)};
r.prototype.exactEquals=function(a){if(!a)return!1;var b=this.data;a=a.data;return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]};r.prototype.equals=function(a,b){b=void 0===b?Number.EPSILON:b;if(!a)return!1;var c=this.data;a=a.data;return Math.abs(c[0]-a[0])<b&&Math.abs(c[1]-a[1])<b&&Math.abs(c[2]-a[2])<b&&Math.abs(c[3]-a[3])<b&&Math.abs(c[4]-a[4])<b&&Math.abs(c[5]-a[5])<b};r.prototype.toString=function(a){a=void 0===a?2:a;return"        | "+this.value[0].toFixed(a)+
" | "+this.value[1].toFixed(a)+" | "+this.value[4].toFixed(a)+" |\nMatrix: | "+this.value[2].toFixed(a)+" | "+this.value[3].toFixed(a)+" | "+this.value[5].toFixed(a)+" |"};$jscomp.global.Object.defineProperties(r.prototype,{isIdentity:{configurable:!0,enumerable:!0,get:function(){return this.exactEquals(r.__identity)}},value:{configurable:!0,enumerable:!0,get:function(){return this.data}}});r.__cache=new r;r.__identity=new r;r.pool=new I(r);var W=function(a,b,c){this.x=void 0===a?0:a;this.y=void 0===
b?0:b;this.r=void 0===c?1:c};W.prototype.set=function(a,b,c){this.x=a;this.y=b;this.r=c;return this};W.prototype.clone=function(){return new W(this.x,this.y,this.r)};W.prototype.copyTo=function(a){return a.set(this.x,this.y,this.r)};W.prototype.copyFrom=function(a){return this.set(a.x,a.y,a.r)};W.prototype.equals=function(a,b){b=void 0===b?Number.EPSILON:b;return null!==a&&Math.abs(this.x-a.x)<b&&Math.abs(this.y-a.y)<b&&Math.abs(this.r-a.r)<b};W.prototype.containsXY=function(a,b){return this.contains(new k(a,
b))};W.prototype.contains=function(a){return(new k(this.x,this.y)).subtract(a).length()<=this.r};W.prototype.zero=function(){return this.set(0,0,0)};W.prototype.intersects=function(a){var b=(new k(this.x,this.y)).distance(new k(a.x,a.y));return b<=this.r+a.r&&b>=this.r-a.r};W.prototype.collide=function(a){return(new k(this.x,this.y)).distance(new k(a.x,a.y))<=this.r+a.r};W.prototype.overlap=function(a){return this.r<a.r?!1:(new k(this.x,this.y)).distance(new k(a.x,a.y))<=this.r-a.r};W.prototype.center=
function(a){a=a||new k;return a.set(this.x,this.y)};W.getCircumferencePoint=function(a,b,c,d,e){e=e||new k;e.set(a+c*Math.sin(d),b+c*-Math.cos(d));return e};W.prototype.toString=function(a){a=void 0===a?2:a;return"Circle { x: "+this.x.toFixed(a)+", y: "+this.y.toFixed(a)+", r: "+this.r.toFixed(a)+" }"};$jscomp.global.Object.defineProperties(W.prototype,{volume:{configurable:!0,enumerable:!0,get:function(){return Math.PI*this.r*this.r}},perimeter:{configurable:!0,enumerable:!0,get:function(){return 2*
Math.PI*this.r}},left:{configurable:!0,enumerable:!0,get:function(){return this.x-this.r}},right:{configurable:!0,enumerable:!0,get:function(){return this.x+this.r}},top:{configurable:!0,enumerable:!0,get:function(){return this.y-this.r}},bottom:{configurable:!0,enumerable:!0,get:function(){return this.y+this.r}},topPoint:{configurable:!0,enumerable:!0,get:function(){return new k(this.x,this.top)}},bottomPoint:{configurable:!0,enumerable:!0,get:function(){return new k(this.x,this.bottom)}}});W.__cache=
new W;var P=function(a){this.mVertices=a=void 0===a?[]:a;this.mLines=[];this.mBounds=new t;this.mCenter=new k;2<a.length&&this.refresh()};P.prototype.set=function(a){this.mVertices=a;this.refresh();return this};P.prototype.copyTo=function(a){for(var b=this.mVertices.length,c=[],d=0;d<b;d++)c.push(this.mVertices[d].clone());return a.set(c)};P.prototype.copyFrom=function(a){a=a.mVertices;for(var b=a.length,c=[],d=0;d<b;d++)c.push(a[d].clone());return this.set(c)};P.prototype.clone=function(){for(var a=
this.mVertices,b=a.length,c=[],d=0;d<b;d++)c.push(a[d].clone());return new P(c)};P.prototype.containsXY=function(a,b){return this.contains(new k(a,b))};P.prototype.contains=function(a){var b=this.mCenter,c=this.mLines,d=c.length;if(b.equals(a))return!0;a=new G(a,b.clone());b=0;a.scale((this.width+this.height)/a.length());for(var e=0;e<d;e++)b+=c[e].intersects(a)?1:0;return 0!==b%2};P.prototype.collide=function(a){if(!this.mBounds.intersects(a.mBounds))return!1;var b=this.mLines,c=b.length;a=a.mLines;
for(var d=a.length,e=0;e<c;e++)for(var h=0;h<d;h++)if(b[e].intersects(a[h]))return!0;return!1};P.prototype.collideCircle=function(a){var b=this.mBounds,c=this.mLines;if(b.left>a.right||b.right<a.left||b.top>a.bottom||b.bottom<a.top)return!1;b=c.length;for(var d=0;d<b;d++)if(c[d].intersectsCircle(a))return!0;return!1};P.prototype.collideRectangle=function(a){if(!this.mBounds.intersects(a))return!1;var b=this.mLines,c=b.length;a=a.lines;for(var d=a.length,e=0;e<c;e++)for(var h=0;h<d;h++)if(b[e].intersects(a[h]))return!0;
return!1};P.prototype.overlap=function(a){if(this.mBounds.width<a.mBounds.width||this.mBounds.height<a.mBounds.height||!this.contains(a.mCenter))return!1;var b=this.mLines,c=b.length;a=a.mLines;for(var d=a.length,e=0;e<c;e++)for(var h=0;h<d;h++)if(b[e].intersects(a[h]))return!1;return!0};P.prototype.overlapCircle=function(a){if(!this.containsXY(a.x,a.y))return!1;for(var b=this.mLines,c=b.length,d=0;d<c;d++)if(b[d].intersectsCircle(a))return!1;return!0};P.prototype.overlapRectangle=function(a){if(!this.contains(a.center()))return!1;
var b=this.mLines,c=b.length;a=a.lines;for(var d=a.length,e=0;e<c;e++)for(var h=0;h<d;h++)if(b[e].intersects(a[h]))return!1;return!0};P.prototype.refresh=function(){var a=this.mCenter,b=this.mBounds,c=this.mVertices,d=this.mLines=[];a.set(0,0);for(var e=-Number.MAX_VALUE,h=-Number.MAX_VALUE,n=Number.MAX_VALUE,f=Number.MAX_VALUE,g=0;g<c.length;g++){var B=c[g];a.add(B);var l=B,p=l.x;l=l.y;e=p>e?p:e;h=l>h?l:h;n=p<n?p:n;f=l<f?l:f;d.push(new G(B,c[g+1]||c[0]))}a.multiplyScalar(1/c.length);b.set(n,f,e-
n,h-f);return this};P.prototype.refreshCenter=function(){var a=this.mCenter,b=this.mVertices,c=b.length;a.set(0,0);for(var d=0;d<c;d++)a.add(b[d]);a.multiplyScalar(1/b.length);return this};P.prototype.refreshBounds=function(){for(var a=this.mBounds,b=this.mVertices,c=-Number.MAX_VALUE,d=-Number.MAX_VALUE,e=Number.MAX_VALUE,h=Number.MAX_VALUE,n=b.length,f,g,B=0;B<n;B++)f=b[B].x,g=b[B].y,c=f>c?f:c,d=g>d?g:d,e=f<e?f:e,h=g<h?g:h;a.set(e,h,c-e,d-h);return this};P.prototype.refreshLines=function(){for(var a=
this.mVertices,b=this.mLines=[],c=0;c<a.length;c+=2)b.push(new G(a[c],a[c+1]||a[0]));return this};P.fromPath=function(a){var b=[];a=a.split(" ");for(var c=0;c<a.length;c+=2)b.push(new k(Number(a[c]),Number(a[c+1])));return new P(b)};P.prototype.setRotation=function(a){var b=this.mCenter,c=this.mVertices,d=Math.cos(a);a=Math.sin(a);for(var e=0,h=c.length;e<h;e++){var n=c[e];n.subtract(b).set(n.x*d-n.y*a,n.x*a+n.y*d).add(b)}return this.refresh()};P.prototype.setTranslation=function(a){var b=this.mVertices,
c=b.length;a.subtract(this.mCenter);for(var d=0;d<c;d++)b[d].add(a);return this.refresh()};P.prototype.toString=function(a){a=void 0===a?2:a;for(var b=this.mLines,c=this.mVertices,d=b.length,e="",h="",n=0;n<d;n++)h+=b[n].toString(a);d=c.length;for(b=0;b<d;b++)e+=c[b].toString(a);return"Polygon { vertices: "+e+", bounds: "+this.mBounds.toString(a)+", center: "+this.mCenter.toString()+", lines: "+h+" }"};$jscomp.global.Object.defineProperties(P.prototype,{width:{configurable:!0,enumerable:!0,get:function(){return this.mBounds.width}},
height:{configurable:!0,enumerable:!0,get:function(){return this.mBounds.height}},perimeter:{configurable:!0,enumerable:!0,get:function(){for(var a=this.mLines,b=a.length,c=0,d=0;d<b;d++)c+=a[d].length();return c}},vertices:{configurable:!0,enumerable:!0,get:function(){return this.mVertices}},center:{configurable:!0,enumerable:!0,get:function(){return this.mCenter}}});P.__cache=new P;var S=function(){this.mPoints=[];this.mLookup=null;this.mBaked=!1;this.mStep=1/60;this.mEachT=[]};S.prototype.set=
function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];this.mPoints=this.__initPoints(b);this.__refreshEachT();this.mBaked&&this.__refreshCache();return this};S.prototype.__initPoints=function(a){for(var b=[],c=6;c<a.length;c+=6)b=b.concat(a.slice(c-6,c+2));return b};S.prototype.__refreshCache=function(){for(var a=this.mLookup=[],b=this.getFullLength(),c=this.mPoints,d=c.length,e=0;e<d;e+=8)for(var h=S.getLength.apply(S,$jscomp.arrayFromIterable(c.slice(e,e+8))),n=h=this.mStep*b/
h;1>n;n+=h)a.push(S.lerp.apply(S,[n].concat($jscomp.arrayFromIterable(c.slice(e,e+8)))));return this};S.prototype.__refreshEachT=function(){for(var a=this.mPoints,b=this.mEachT=[],c=a.length,d=[],e=0;e<c;e+=8)d.push(S.getLength.apply(S,$jscomp.arrayFromIterable(a.slice(e,e+8))));a=this.getFullLength();for(var h=e=0;h<c;h+=8)e+=d[h/8],b.push(e/a);return this};S.lerp=function(a,b,c,d,e,h,n,f,g,B){var A=1-a,cb=a*a,l=A*A,v=l*A,m=cb*a;B=B||new k;B.set(b,c);B.x*=v;B.y*=v;B.x+=3*l*a*d;B.y+=3*l*a*e;B.x+=
3*A*cb*h;B.y+=3*A*cb*n;B.x+=m*f;B.y+=m*g;return B};S.prototype.interpolate=function(a,b){b=b||new k;var c=this.mLookup;if(this.mBaked)return b.copyFrom(c[Math.ceil((c.length-1)*a)]),b;for(var d=this.mEachT,e=this.mPoints,h=0;d[h]<a;)h++;c=d[h-1]||0;d=d[h];e=e.slice(8*h,8*h+8);return S.lerp.apply(S,[(a-c)/(d-c)].concat($jscomp.arrayFromIterable(e),[b]))};S.getLength=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];c=new k(b[0],b[1]);var d=new k(b[2],b[3]),e=new k(b[4],b[5]);
b=new k(b[6],b[7]);return(b.distance(c)+c.distance(d)+d.distance(e)+e.distance(b))/2};S.prototype.getFullLength=function(){for(var a=this.mPoints,b=a.length,c=0,d=0;d<b;d+=8)c+=S.getLength.apply(S,$jscomp.arrayFromIterable(a.slice(d,d+8)));return c};$jscomp.global.Object.defineProperties(S.prototype,{baked:{configurable:!0,enumerable:!0,get:function(){return this.mBaked},set:function(a){this.mBaked=a;!this.mLookup&&this.mPoints&&this.__refreshCache()}}});S.__cache=new S;var db={DIRECT:"direct",BUBBLE:"bubble"},
eb={REGULAR:"regular",OVERHEARD:"overheard"},E=function(){this.sender=null;this.name="";this.origin=this.target=null;this.canceled=!1;this.type=db.DIRECT};E.prototype.cancel=function(){this.canceled=!0};E.prototype.toString=function(){return"MESSAGE: { name: '"+this.name+"', sender: '"+(void 0!==this.sender.name?this.sender.name:"")+"', target: '"+this.target.name+"', path: '"+this.path+"' }"};E.prototype.__reset=function(){this.sender=null;this.name="";this.target=null;this.canceled=!1;this.type=
db.DIRECT;return this};$jscomp.global.Object.defineProperties(E,{PROGRESS:{configurable:!0,enumerable:!0,get:function(){return"progress"}},COMPLETE:{configurable:!0,enumerable:!0,get:function(){return"complete"}},ERROR:{configurable:!0,enumerable:!0,get:function(){return"error"}},CHANGE:{configurable:!0,enumerable:!0,get:function(){return"change"}},READY:{configurable:!0,enumerable:!0,get:function(){return"ready"}},UPDATE:{configurable:!0,enumerable:!0,get:function(){return"update"}},RESIZE:{configurable:!0,
enumerable:!0,get:function(){return"resize"}},pool:{configurable:!0,enumerable:!0,get:function(){return Rc}}});var Rc=new I(E),pb=function(a,b,c,d,e,h,n){h=void 0===h?eb.REGULAR:h;n=void 0===n?null:n;this.owner=a;this.name=b;this.callback=c;this.isOnce=d;this.context=void 0===e?null:e;this.pathPattern=n;this.glob=null==n?null:new ua(n);this.type=h};pb.prototype.off=function(){this.owner.__off(this)};pb.prototype.__reset=function(){this.pathPattern=this.owner=null;return this};var Ub=function(){this.assets=
this.device=this.time=this.audio=this.input=this.engine=null};$jscomp.global.Object.defineProperties(Ub.prototype,{stage:{configurable:!0,enumerable:!0,get:function(){return this.engine.mStage}},driver:{configurable:!0,enumerable:!0,get:function(){return this.engine.mVideo}}});$jscomp.global.Object.defineProperties(Ub,{magic:{configurable:!0,enumerable:!0,get:function(){return Math.random()}}});var l=new Ub,C=function(a){this.mBindings=null;this.checkForStage=void 0===a?!1:a};C.prototype.on=function(a,
b,c){return this.__on(a,b,!1,c)};C.prototype.off=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];for(c=0;c<b.length;c++){var d=b[c];if(-1!==d.indexOf("@")){g.error("Removing overheard bindings is not allowed.");break}if(null!==this.mBindings&&!0===this.mBindings.hasOwnProperty(d)){d=this.mBindings[d].slice();for(var e=0;e<d.length;e++)this.__off(d[e])}}};C.prototype.once=function(a,b,c){return this.__on(a,b,!0,c)};C.prototype.post=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-
1]=arguments[d];d=this.__draftMessage(a);d.type===db.DIRECT?this.__invoke.apply(this,[this,d].concat($jscomp.arrayFromIterable(c))):d.type===db.BUBBLE&&this.__postBubbles.apply(this,[this,d,!0].concat($jscomp.arrayFromIterable(c)));!1===d.canceled&&this.__invokeOverheard.apply(this,[this,d].concat($jscomp.arrayFromIterable(c)));E.pool.release(d)};C.prototype.__on=function(a,b,c,d){c=void 0===c?!1:c;d=void 0===d?null:d;g.assert(null!==a,"name cannot be null.");g.assert(0<a.trim().length,"name cannot be null.");
g.assert(0!==a.indexOf("~"),"Using `~` is not tot allowed here.");g.assert(null!==b,"callback cannot be null.");var e=a.indexOf("@");if(-1!==e){var h=a.substring(0,e);a=a.substring(e+1);e=C.mOverheardHandlers;!1===e.hasOwnProperty(h)&&(e[h]=[]);e=e[h];b=new pb(this,h,b,c,d,eb.OVERHEARD,a);e.push(b);return b}null===this.mBindings&&(this.mBindings={});!1===this.mBindings.hasOwnProperty(a)&&(this.mBindings[a]=[]);b=new pb(this,a,b,c,d,eb.REGULAR);this.mBindings[a].push(b);return b};C.prototype.__off=
function(a){if(a.type===eb.REGULAR){if(null!==this.mBindings&&!1!==this.mBindings.hasOwnProperty(a.name)){var b=this.mBindings[a.name];a=b.indexOf(a);-1!==a&&b.splice(a,1)}}else a.type===eb.OVERHEARD&&(b=C.mOverheardHandlers,!1!==b.hasOwnProperty(a.name)&&(b=b[a.name],a=b.indexOf(a),-1!==a&&b.splice(a,1)))};C.prototype.__invoke=function(a,b,c){for(var d=[],e=2;e<arguments.length;++e)d[e-2]=arguments[e];if(!0!==b.canceled&&null!==this.mBindings&&(!0!==this.checkForStage||this===l.stage||null!==this.stage)&&
(e=this.mBindings[b.name],void 0!==e&&0!==e.length)){e=e.slice(0);for(var h=0;h<e.length;h++){b.target=this;var n=e[h];if(!0!==this.checkForStage||n.owner.stage!==l.stage||null!==n.owner.stage)if(n.callback.call.apply(n.callback,[n.context,b].concat($jscomp.arrayFromIterable(d))),!0===n.isOnce&&this.__off(n),!0===b.canceled)break}}};C.prototype.__invokeOverheard=function(a,b,c){for(var d=[],e=2;e<arguments.length;++e)d[e-2]=arguments[e];if(!0!==b.canceled&&(e=C.mOverheardHandlers[b.name],void 0!==
e&&0!==e.length)){e=e.slice(0);for(var h=0;h<e.length;h++){var n=e[h];if((!0!==this.checkForStage||n.owner.stage!==l.stage||null!==n.owner.stage)&&this.__checkPath(a.path,n)&&(b.target=this,n.callback.call.apply(n.callback,[n.context,b].concat($jscomp.arrayFromIterable(d))),!0===n.isOnce&&this.__off(n),!0===b.canceled))break}}};C.prototype.__postBubbles=function(a,b,c,d){for(var e=[],h=3;h<arguments.length;++h)e[h-3]=arguments[h];b.origin=this;h=[this];for(var n=this;null!==n.parent;)h.push(n.parent),
n=n.parent;for(n=0;n<h.length;n++){var f=h[n];f.__invoke.apply(f,[a,b].concat($jscomp.arrayFromIterable(e)));if(!0===b.canceled)break}};C.prototype.__draftMessage=function(a){var b=E.pool.get();b.__reset();b.sender=this;"~"===a.charAt(0)?(b.name=a.substr(1),b.type=db.BUBBLE):b.name=a;return b};C.prototype.__checkPath=function(a,b){return null===a||null===b.pathPattern?!1:a===b.pathPattern?!0:-1===b.pathPattern.indexOf("*")?a===b.pathPattern:b.glob.test(a)};C.dispose=function(){C.mOverheardHandlers=
{}};$jscomp.global.Object.defineProperties(C.prototype,{parent:{configurable:!0,enumerable:!0,get:function(){return null}},stage:{configurable:!0,enumerable:!0,get:function(){return null}},path:{configurable:!0,enumerable:!0,get:function(){return null}}});C.mOverheardHandlers={};var Fb={NORMAL:"normal",ITALIC:"italic"},Gb={NORMAL:"400",BOLD:"700"},Vb=null,Oa=function(a,b,c,d,e,h,n){d=void 0===d?Fb.NORMAL:d;e=void 0===e?Gb.NORMAL:e;this.name="def";this.family=void 0===a?"sans-serif":a;this.size=void 0===
c?14:c;this.color=void 0===b?0:b;this.style=d;this.weight=e;this.strokeThickness=void 0===h?0:h;this.strokeColor=void 0===n?16777215:n;this.dropShadow=!1;this.shadowColor=this.shadowDistanceY=this.shadowDistanceX=0;this.shadowAlpha=1;this.shadowBlur=0};Oa.prototype.clone=function(a,b,c,d,e,h,n){a=void 0===a?null:a;b=void 0===b?NaN:b;c=void 0===c?NaN:c;d=void 0===d?null:d;e=void 0===e?null:e;h=void 0===h?NaN:h;n=void 0===n?NaN:n;var f=new Oa;f.family=null===a?this.family:a;f.size=isNaN(c)?this.size:
c;f.color=isNaN(b)?this.color:b;f.style=null===d?this.style:d;f.weight=null===e?this.weight:e;f.strokeThickness=isNaN(h)?this.strokeThickness:h;f.strokeColor=isNaN(n)?this.strokeColor:n;f.dropShadow=this.dropShadow;f.shadowAlpha=this.shadowAlpha;f.shadowBlur=this.shadowBlur;f.shadowColor=this.shadowColor;f.shadowDistanceX=this.shadowDistanceX;f.shadowDistanceY=this.shadowDistanceY;return f};$jscomp.global.Object.defineProperties(Oa,{default:{configurable:!0,enumerable:!0,get:function(){null===Vb&&
(Vb=new Oa("sans-serif",0,14,Fb.NORMAL,Gb.NORMAL,0,0));return Vb}}});var Ac={},Wb=null,fb=null,ra=function(a){null===Wb&&(fb=document.createElement("canvas"),Wb=fb.getContext("2d"),fb.width=10,fb.height=200);a.size=24;this.mCanvas=fb;this.mCtx=Wb;this.mStyle=a;var b=Math.floor(.7766*fb.height);this.mCtx.clearRect(0,0,this.mCanvas.width,this.mCanvas.height);this.mCtx.font=a.weight+" "+a.size+"px "+a.family;this.mCtx.fillText("x",0,b,1);var c=this.mCtx.getImageData(0,0,1,this.mCanvas.height).data;a=
this.__getBottom(c)-this.__getTop(c);for(var d=32;126>=d;d++)this.mCtx.fillText(String.fromCharCode(d),0,b,1);c=this.mCtx.getImageData(0,0,1,this.mCanvas.height).data;d=this.__getTop(c);c=this.__getBottom(c);b-=d;d=c-d;this.baseline=b;this.bottom=d;this.ascent=b-a;this.descent=d-b;this.xHeight=a;this.capHeight=b};ra.prototype.__getTop=function(a){for(var b=3,c=a.length;b<c;b+=4)if(0<a[b])return(b-3)/4;return a.length/4};ra.prototype.__getBottom=function(a){for(var b=a.length-1;0<b;b-=4)if(0<a[b])return(b+
1)/4;return 0};ra.get=function(a){var b=Ac[a];null==b&&(b=new Oa(a,0,24),b=new ra(b),Ac[a]=b);return b};$jscomp.global.Object.defineProperties(ra.prototype,{capHeightNormalized:{configurable:!0,enumerable:!0,get:function(){return this.capHeight/this.mStyle.size}},xHeightNormalized:{configurable:!0,enumerable:!0,get:function(){return this.xHeight/this.mStyle.size}},ascentNormalized:{configurable:!0,enumerable:!0,get:function(){return this.ascent/this.mStyle.size}},descentNormalized:{configurable:!0,
enumerable:!0,get:function(){return this.descent/this.mStyle.size}},baselineNormalized:{configurable:!0,enumerable:!0,get:function(){return this.baseline/this.mStyle.size}},bottomNormalized:{configurable:!0,enumerable:!0,get:function(){return this.bottom/this.mStyle.size}}});var Bc=function(){this.segments=[];this.bounds=new t;this.shadowBounds=this.strokeBounds=null;this.lineWidth=[]},Cc=function(a,b,c,d){this.text=a;this.style=b;this.lineIndex=c;this.bounds=d},Xb=null,Pa=function(){throw Error("Singleton");
};Pa.measure=function(a,b,c){for(var d=[],e=2;e<arguments.length;++e)d[e-2]=arguments[e];e=[];for(var h=/(~{([^}]+)}|^)(.+?(?=~{.+}|$|^))|(\n)/gm,n,f="def",g=0;null!==(n=h.exec(a));)n[4]&&g++,n[2]&&(f=n[2]),n[3]&&e.push({tag:f,text:n[3],style:d.filter(function(a){return a.name===f})[0],lineIndex:g});h=new Bc;var B=d.filter(function(a){return"def"===a.name})[0]||Oa.default;d=B.size*b;n=new t;g=new t;var l=null,p=-1,k=0,v=0;B=ra.get(B.family).baselineNormalized*B.size;for(var m=0;m<e.length;m++){var q=
e[m],r=q.style,u=Pa.__measure(q.text,r);v=ra.get(r.family).baselineNormalized*r.size;p!==q.lineIndex&&(k=h.lineWidth[q.lineIndex]=0);v=d*q.lineIndex+B-v;u.x=k+2;u.y=v+2;k+=u.width;p=q.lineIndex;q.bounds=u;h.lineWidth[q.lineIndex]+=u.width;n.union(u);g.union(u.clone().inflate(r.strokeThickness,r.strokeThickness));!0===r.dropShadow&&(v=u.clone(),v.inflate(r.shadowBlur,r.shadowBlur),v.x+=r.shadowDistanceX,v.y+=r.shadowDistanceY,l=l||v,l.union(v));h.segments.push(new Cc(q.text,r,q.lineIndex,q.bounds))}h.bounds=
n;h.strokeBounds=g;h.shadowBounds=l||new t;return h};Pa.__measure=function(a,b,c){c=void 0===c?null:c;g.assert(null!=b,"Style cannot be null");c=c||new t;c.zero();var d=Xb;null===Xb&&(d=Xb=document.createElement("span"),d.id="font",d.style.position="absolute",d.style.width="auto",d.style.height="auto",d.style.top="0px",d.style.left="0px",d.style.display="inline-block",d.style.border="1px solid green",d.style.color="#00ff00",d.style.verticalAlign="baseline",d.style.whiteSpace="nowrap",d.style.lineHeight=
"normal",d.style.top="-9999px",d.style.left="-9999px",document.body.appendChild(d));d.style.fontFamily=b.family;d.style.fontSize=b.size+"px";d.style.fontWeight=b.weight;d.style.fontStyle=b.style;var e=ra.get(b.family);d.innerHTML=a.replace(/ /g,"&nbsp");c.set(0,e.baselineNormalized*b.size,d.offsetWidth+2,e.bottomNormalized*b.size+2);return c};Pa.measureBitmap=function(a,b,c,d){d=d||new t;for(var e=-1,h=0,n=0,f=0,g=0,l=0;l<a.length;l++){var k=a.charCodeAt(l);if(/(?:\r\n|\r|\n)/.test(a.charAt(l)))h=
0,n+=b.lineHeight*c,e=-1;else{var p=b.chars[k];null!=p&&(0<=e&&p.kerning[e]&&(h+=p.kerning[e]),h+=p.xAdvance,g=Math.max(g,h+p.xOffset),f=Math.max(f,n+p.height+p.yOffset),e=k)}}return d.set(0,0,g,f)};var Yb=function(){this.mActualTime=this.mTime=0;this.mDeltaTimeMs=1E3/60;this.mDeltaTime=1E3/60*.001;this.mScale=1;this.mRenderOffset=this.mAlphaTime=0};$jscomp.global.Object.defineProperties(Yb.prototype,{now:{configurable:!0,enumerable:!0,get:function(){return this.mTime}},dt:{configurable:!0,enumerable:!0,
get:function(){return this.mDeltaTime*this.mScale}},alpha:{configurable:!0,enumerable:!0,get:function(){return this.mAlphaTime}},delta:{configurable:!0,enumerable:!0,get:function(){return this.mDeltaTime*this.mScale}},scale:{configurable:!0,enumerable:!0,get:function(){return this.mScale},set:function(a){g.assert(0<=a,"Time scale must be >= 0.");this.mScale=a}}});var Z=function(){return C.call(this)||this};$jscomp.inherits(Z,C);Z.prototype.onUpdate=function(){};Z.prototype.onPostUpdate=function(){};
Z.prototype.onRender=function(){};Z.prototype.onChildrenAdded=function(a){};Z.prototype.onChildrenRemoved=function(a){};Z.prototype.onChildrenChanged=function(a){};Z.prototype.onComponentAdded=function(a,b){};Z.prototype.onComponentRemoved=function(a,b){};Z.prototype.dispose=function(){};var Hb={UNIVERSAL:"universal",LANDSCAPE:"landscape",PORTRAIT:"portrait"},va=function(a){a=void 0===a?null:a;var b=C.call(this)||this;b.mContainerElement=a;b.mViewportElement=null;b.mSize=new t;b.isTransparent=!0;
b.backgroundColor=0;b.mChecksLeftSeconds=0;b.mOrientation=Hb.UNIVERSAL;b.mOrientationLock=!1;b.mRotation=0;b.mIsPrimary=!1;b.mReflect=!1;b.__initialize();return b};$jscomp.inherits(va,C);va.prototype.__initialize=function(){var a=this;this.mViewportElement=document.createElement("div");this.mViewportElement.style.position="relative";this.mContainerElement.appendChild(this.mViewportElement);var b=this.mContainerElement.style;b.userSelect="none";b.touchAction="none";b.cursor="auto";b.WebkitTapHighlightColor=
"rgba(0, 0, 0, 0)";b=this.mContainerElement.getBoundingClientRect();this.mSize.set(b.left,b.top,b.width,b.height);this.mIsPrimary=this.isPrimary();this.__onResize();this.mBoundResize=function(b){return a.__onResize()};window.addEventListener("resize",this.mBoundResize)};va.prototype.isPrimary=function(){var a=screen.msOrientation||(screen.orientation||screen.mozOrientation||{}).type;if("landscape-primary"===a||"portrait-primary"===a)return!0;if("landscape-secondary"===a||"portrait-secondary"===a)return!1;
g.warn("The orientation API isn't supported in this browser");return!0};va.prototype.__update=function(){0>=this.mChecksLeftSeconds||(this.__onResize(),this.mChecksLeftSeconds-=l.time.delta)};va.prototype.refresh=function(){this.__onResize()};va.prototype.__onResize=function(){var a=this.mViewportElement.style,b=this.mContainerElement.getBoundingClientRect(),c=b.width>b.height?Hb.LANDSCAPE:Hb.PORTRAIT,d=t.pool.get().copyFrom(b),e=this.mIsPrimary;this.mIsPrimary=this.isPrimary();this.mIsPrimary!==
e&&(this.mReflect=!this.mReflect);this.mOrientationLock&&this.mOrientation!==c?(this.mRotation=this.mReflect?-1:1,a.transform=this.mReflect?"rotate(-90deg)":"rotate(90deg)",a.left=.5*(b.width-b.height)+"px",a.top=.5*(b.height-b.width)+"px",a.width=b.height+"px",a.height=b.width+"px",d.width=b.height,d.height=b.width):(this.mRotation=0,this.mReflect=!1,a.transform="rotate(0deg)",a.left="0px",a.top="0px",a.width=b.width+"px",a.height=b.height+"px");!0!==this.mSize.equals(d)&&(this.mSize.copyFrom(d),
this.post(E.RESIZE,d),this.mChecksLeftSeconds=1,t.pool.release(d))};va.prototype.dispose=function(){this.mViewportElement.remove();window.removeEventListener("resize",this.mBoundResize)};$jscomp.global.Object.defineProperties(va.prototype,{orientation:{configurable:!0,enumerable:!0,get:function(){return this.mOrientation},set:function(a){this.mOrientation=a;this.__onResize()}},orientationLock:{configurable:!0,enumerable:!0,get:function(){return this.mOrientationLock},set:function(a){this.mOrientationLock=
a;this.__onResize()}},size:{configurable:!0,enumerable:!0,get:function(){return this.mSize}},nativeElement:{configurable:!0,enumerable:!0,get:function(){return this.mViewportElement}},rotation:{configurable:!0,enumerable:!0,get:function(){return this.mRotation}},isLandscape:{configurable:!0,enumerable:!0,get:function(){return this.size.width>=this.size.height}},isPortrait:{configurable:!0,enumerable:!0,get:function(){return!this.isLandscape}}});var Sc=0,N=function(){var a=C.call(this,!0)||this;a.mId=
++Sc;a.mGameObject=null;a.mAdded=!1;return a};$jscomp.inherits(N,C);N.prototype.onAdded=function(a){};N.prototype.onRemoved=function(a){};N.prototype.onUpdate=function(){};N.prototype.onRender=function(){};N.prototype.removeFromParent=function(){null!==this.mGameObject&&this.mGameObject.removeComponent(this)};$jscomp.global.Object.defineProperties(N.prototype,{gameObject:{configurable:!0,enumerable:!0,get:function(){return this.mGameObject}},parent:{configurable:!0,enumerable:!0,get:function(){return this.mGameObject}},
stage:{configurable:!0,enumerable:!0,get:function(){return null===this.mGameObject?null:this.mGameObject.stage}},path:{configurable:!0,enumerable:!0,get:function(){return null!==this.mGameObject?this.mGameObject.path+"#"+this.constructor.name:this.constructor.name}}});var Ca={AUTO:"auto",NORMAL:"normal",ADD:"add",MULTIPLY:"multiply",SCREEN:"screen",OVERLAY:"overlay",DARKEN:"darken",LIGHTEN:"lighten",COLOR_DODGE:"colorDodge",COLOR_BURN:"colorBurn",HARD_LIGHT:"hardLight",SOFT_LIGHT:"softLight",DIFFERENCE:"difference",
EXCLUSION:"exclusion",HUE:"hue",SATURATE:"saturate",COLOR:"color",LUMINOSITY:"luminosity",MASK:"mask",MASK_INV:"maskInv"},Tc={auto:"auto",normal:"source-over",add:"lighter",multiply:"multiply",screen:"screen",overlay:"overlay",darken:"darken",lighten:"lighten",colorDodge:"color-dodge",colorBurn:"color-burn",hardLight:"hard-light",softLight:"soft-light",difference:"difference",exclusion:"exclusion",due:"hue",saturate:"saturate",color:"color",luminosity:"luminosity",mask:"source-in",maskInv:"source-out"},
Uc=0,Q=function(a,b,c,d,e,h){b=void 0===b?null:b;c=void 0===c?null:c;d=void 0===d?1:d;e=void 0===e?null:e;h=void 0===h?null:h;this.mId=++Uc;this.mNative=a;this.mValid=!1;this.mRegion=new t;this.mUntrimmedRegion=new t;this.mRenderHeight=this.mRenderWidth=this.mDisplayHeight=this.mDisplayWidth=this.mNativeHeight=this.mNativeWidth=0;this.mScale=d;this.mRegistrationPoint=e;this.mSlice9borders=h;this.set(a,b,c,d)};Q.prototype.set=function(a,b,c,d){b=void 0===b?null:b;c=void 0===c?null:c;d=void 0===d?1:
d;g.assert(null!=a,"nativeElement cannot be null");g.assert(!isNaN(d),"scale cannot be NaN");this.mScale=d;this.mNative=a;this.mNativeWidth=a.naturalWidth||a.videoWidth||a.width;this.mNativeHeight=a.naturalHeight||a.videoHeight||a.height;this.mRegion=b||this.mRegion.set(0,0,this.mNativeWidth,this.mNativeHeight);this.mUntrimmedRegion=c||this.mUntrimmedRegion.set(0,0,this.mRegion.width,this.mRegion.height);this.mDisplayWidth=Math.ceil(this.mUntrimmedRegion.width*this.mScale);this.mDisplayHeight=Math.ceil(this.mUntrimmedRegion.height*
this.mScale);this.mRenderWidth=Math.ceil(this.mRegion.width*this.mScale);this.mRenderHeight=Math.ceil(this.mRegion.height*this.mScale);this.mValid=null!=a&&0<this.mDisplayWidth&&0<this.mDisplayHeight};Q.getScaleFactorFromName=function(a){var b=a.indexOf("@");if(-1===b)return 1;var c=a.indexOf("x",b);return parseFloat(a.substring(b+1,c))};Q.removeScaleFactorFromName=function(a){var b=a.indexOf("@");if(-1===b)return a;var c=a.indexOf("x",b);return a.substring(0,b)+a.substring(c+1)};Q.fromBase64String=
function(a){var b=new Image;b.src=a;return new Q(b)};Q.fromCanvasAsImage=function(a,b,c){b=void 0===b?"image/png":b;c=void 0===c?1:c;var d=new Image;d.src=a.toDataURL(b,c);return new Q(d)};Q.fromCanvas=function(a){return l.driver.getTextureFromCanvas(a)};$jscomp.global.Object.defineProperties(Q.prototype,{width:{configurable:!0,enumerable:!0,get:function(){return this.mDisplayWidth}},height:{configurable:!0,enumerable:!0,get:function(){return this.mDisplayHeight}},scale:{configurable:!0,enumerable:!0,
get:function(){return this.mScale}},region:{configurable:!0,enumerable:!0,get:function(){return this.mRegion}},untrimmedRegion:{configurable:!0,enumerable:!0,get:function(){return this.mUntrimmedRegion}},nativeWidth:{configurable:!0,enumerable:!0,get:function(){return this.mNativeWidth}},nativeHeight:{configurable:!0,enumerable:!0,get:function(){return this.mNativeHeight}},displayWidth:{configurable:!0,enumerable:!0,get:function(){return this.mDisplayWidth}},displayHeight:{configurable:!0,enumerable:!0,
get:function(){return this.mDisplayHeight}},renderWidth:{configurable:!0,enumerable:!0,get:function(){return this.mRenderWidth}},renderHeight:{configurable:!0,enumerable:!0,get:function(){return this.mRenderHeight}},isValid:{configurable:!0,enumerable:!0,get:function(){return this.mValid}},registrationPoint:{configurable:!0,enumerable:!0,get:function(){return this.mRegistrationPoint}},slice9borders:{configurable:!0,enumerable:!0,get:function(){return this.mSlice9borders}},native:{configurable:!0,
enumerable:!0,get:function(){return this.mNative}},id:{configurable:!0,enumerable:!0,get:function(){return this.mId}}});var gb=function(a,b){this.mWidth=Math.ceil(a);this.mHeight=Math.ceil(b)};gb.prototype.resize=function(a,b){this.mWidth=a;this.mHeight=b};gb.prototype.clear=function(){};$jscomp.global.Object.defineProperties(gb.prototype,{width:{configurable:!0,enumerable:!0,get:function(){return this.mWidth},set:function(a){this.mWidth=a}},height:{configurable:!0,enumerable:!0,get:function(){return this.mHeight},
set:function(a){this.mHeight=a}}});var Qa=function(a,b){var c=gb.call(this,a,b)||this;c.mCanvas=document.createElement("canvas");c.mCtx=c.mCanvas.getContext("2d");c.resize(a,b);return c};$jscomp.inherits(Qa,gb);Qa.prototype.resize=function(a,b){this.mCanvas.width=Math.ceil(a);this.mCanvas.height=Math.ceil(b)};Qa.prototype.clear=function(){this.mCtx.setTransform(1,0,0,1,0,0);this.mCtx.clearRect(0,0,this.mCanvas.width,this.mCanvas.height)};$jscomp.global.Object.defineProperties(Qa.prototype,{width:{configurable:!0,
enumerable:!0,get:function(){return this.mCanvas.width},set:function(a){this.mCanvas.width=a}},height:{configurable:!0,enumerable:!0,get:function(){return this.mCanvas.height},set:function(a){this.mCanvas.height=a}},native:{configurable:!0,enumerable:!0,get:function(){return this.mCanvas}},context:{configurable:!0,enumerable:!0,get:function(){return this.mCtx}}});var z=function(){this.parent=this.gameObject=null;this.endPassRequired=this.skipSelf=this.skipChildren=!1;this.endPassRequiredAt=-1;this.alpha=
1;this.blendMode=Ca.NORMAL;this.color=null};z.prototype.preRender=function(a,b){this.endPassRequired=null!==this.gameObject.mClipRect&&!1===this.gameObject.mClipRect.isEmpty;this.skipSelf=this.skipChildren=!(0<this.gameObject.mAlpha&&!0===this.gameObject.mVisible)};z.prototype.begin=function(a,b){this.alpha=this.gameObject.mAlpha*this.parent.alpha;this.color=null===this.gameObject.mColor?this.parent.color:this.gameObject.mColor;this.blendMode=this.gameObject.mBlendMode===Ca.AUTO?this.parent.blendMode:
this.gameObject.mBlendMode};z.prototype.upload=function(a,b){b=this.gameObject;var c=b.worldTransformation;a.setSnapToPixels(b.snapToPixels);a.setGlobalAlpha(this.alpha);a.setGlobalBlendMode(this.blendMode);a.setTransform(c);!0===this.endPassRequired&&a.beginClip(b.mClipRect,b.mPivotX,b.mPivotY)};z.prototype.render=function(a,b){};z.prototype.end=function(a,b){a.endClip();this.endPassRequiredAt=-1;this.endPassRequired=!1};z.getColoredTexture=function(a,b){if(16777215===b||null===b)return a;var c=
b.toString();if(z.__colorCache.has(a.id,c))return z.__colorCache.get(a.id,c);var d=a.region,e=d.width,h=d.height,n=new Qa(e,h),f=n.context;f.fillStyle=U.hexColorToString(b);f.fillRect(0,0,e,h);f.globalCompositeOperation="multiply";f.drawImage(a.native,d.x,d.y,d.width,d.height,0,0,d.width,d.height);f.globalCompositeOperation="destination-atop";f.drawImage(a.native,d.x,d.y,d.width,d.height,0,0,d.width,d.height);b=new Q(n.native,null,a.untrimmedRegion.clone(),a.scale);z.__colorCache.set(a.id,c,b);return b};
z.__colorCache=new O;z.__dirty=!0;z.skipUnchangedFrames=!1;var ja=function(){var a=N.call(this)||this;a.mChanged=!0;a.mCenter=new k;a.mMin=new k;a.mMax=new k;return a};$jscomp.inherits(ja,N);ja.prototype.containsPoint=function(a){g.error("Abstract method.");return!1};ja.prototype.refresh=function(a,b){};var Da=function(){var a=N.call(this)||this;a.touchable=!0;a.mPointerInDispatched=!1;return a};$jscomp.inherits(Da,N);var Vc=0,q=function(){var a=C.call(this,!0)||this;a.mId=++Vc;a.mName=null;a.mComponents=
[];a.mChildren=[];a.mX=0;a.mY=0;a.mScaleX=1;a.mScaleY=1;a.mPivotX=0;a.mPivotY=0;a.mSkewX=0;a.mSkewY=0;a.mAnchorX=null;a.mAnchorY=null;a.mPivotOffsetX=0;a.mPivotOffsetY=0;a.mRotation=0;a.mBoundsCache=new t;a.mLocalTransform=new r;a.mWorldTransform=new r;a.mWorldTransformInverted=new r;a.mDirty=16777215;a.mParent=null;a.mTag=null;a.mAdded=!1;a.mNumChildrenRemoved=0;a.mNumComponentsRemoved=0;a.mDirtyFrameNum=0;a.mSuspendDirty=!1;a.mCollidersCache=[];a.mChildOrComponentBeenAdded=!1;a.mChildrenClone=null;
a.mComponentClone=null;return a};$jscomp.inherits(q,C);q.prototype.make=function(a){this.mSuspendDirty=!0;for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);this.mSuspendDirty=!1;this.setTransformDirty();return this};q.prototype.checkStatic=function(a){if(!1===(void 0===a?!0:a))return this.mDirtyFrameNum<l.engine.frameNum;var b=!1;q.forEach(this,function(a){if(a.mDirtyFrameNum>=l.engine.frameNum)return b=!0});return!b};q.prototype.onAdded=function(){};q.prototype.onRemoved=function(){};q.prototype.add=
function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];for(c=0;c<b.length;c++){var d=b[c];d instanceof q?this.addChild(d):this.addComponent(d)}return this};q.prototype.addChild=function(a){return this.addChildAt(a,this.mChildren.length)};q.prototype.addChildAt=function(a,b){b=void 0===b?0:b;g.assert(a instanceof q,"Type error.");var c=this.mChildren.length;if(0>b||b>c)throw Error("Child index is out of bounds.");if(a.mParent===this)return this.setChildIndex(a,b);this.mChildren.splice(b,
0,a);a.removeFromParent();a.__setParent(this);l.engine.onChildrenAdded(a,this);this.mChildOrComponentBeenAdded=!0;return a};q.prototype.__setParent=function(a){for(var b=a;null!==b&&b!==this;)b=b.mParent;if(b===this)throw Error("Object cannot be a child to itself.");this.mParent=a;this.setTransformDirty();return!0};q.prototype.setChildIndex=function(a,b){var c=this.mChildren.indexOf(a);if(0>c)throw Error("Given child element was not found in children list.");if(c===b)return a;this.mChildren.splice(c,
1);this.mChildren.splice(b,0,a);if(null!==this.stage)l.engine.onChildrenChanged(a);this.setTransformDirty();return a};q.prototype.removeFromParent=function(){null!==this.mParent&&this.mParent.removeChild(this);this.setTransformDirty()};q.prototype.removeChild=function(a){a=this.mChildren.indexOf(a);return 0>a?null:this.removeChildAt(a)};q.prototype.getChildByName=function(a){for(var b=0;b<this.mChildren.length;b++)if(this.mChildren[b].name===a)return this.mChildren[b];return null};q.prototype.removeChildAt=
function(a){if(0>a||a>this.numChildren)throw Error("Child index is out of bounds.");var b=null!==this.stage,c=this.mChildren[a];c.__setParent(null);this.mChildren.splice(a,1);if(b)l.engine.onChildrenRemoved(c);this.setTransformDirty();this.mNumChildrenRemoved++;return c};q.prototype.getChildAt=function(a){return this.mChildren[a]};q.prototype.addComponent=function(a){return this.addComponentAt(a,this.mComponents.length)};q.prototype.addComponentAt=function(a,b){b=void 0===b?0:b;g.assert(a instanceof
N,"Type error.");if(a.gameObject)throw Error("Component cannot be added to two game objects at the same time.");var c=this.mComponents.length;if(0>b||b>c)throw Error("Component index is out of bounds.");this.mComponents.splice(b,0,a);a.mGameObject=this;a instanceof ja&&this.mCollidersCache.push(a);if(null!==this.stage||l.stage===this)l.engine.onComponentAdded(this,a);this.mChildOrComponentBeenAdded=!0;return a};q.prototype.removeComponent=function(a){if(!a)return null;g.assert(a instanceof N,"Type error.");
var b=this.mComponents.indexOf(a);-1<b&&this.mComponents.splice(b,1);a.mGameObject=null;a instanceof ja&&(b=this.mCollidersCache.indexOf(a),-1<b&&this.mCollidersCache.splice(b,1));if(null!==this.stage||l.stage===this)l.engine.onComponentRemoved(this,a);this.mNumComponentsRemoved++;return a};q.prototype.getComponent=function(a){for(var b=0;b<this.mComponents.length;b++){var c=this.mComponents[b];if(c instanceof a)return c}return null};q.prototype.getComponentAt=function(a){return 0<=a&&a<this.mComponents.length?
this.mComponents[a]:null};q.prototype.__update=function(){this.onUpdate();if(!1!==this.mChildOrComponentBeenAdded){if(0<this.mComponents.length){this.mComponentClone=this.mComponents.slice();for(var a=0;a<this.mComponentClone.length&&!1!==this.mAdded;a++){var b=this.mComponentClone[a];if(!1===b.mAdded)break;b.onUpdate()}}if(0<this.mChildren.length)for(this.mChildrenClone=this.mChildren.slice(),a=0;a<this.mChildrenClone.length;a++)b=this.mChildrenClone[a],!0===b.mAdded&&b.__update()}};q.prototype.onUpdate=
function(){};q.prototype.onGetLocalBounds=function(a){a=a||new t;return a.set(0,0,0,0)};q.prototype.getBounds=function(a,b,c){a=void 0===a?null:a;b=void 0===b?!0:b;c=c||new t;this.onGetLocalBounds(c);null==a&&(a=this.mParent);if(a!=this)if(a==this.mParent)if(!1===b){var d=r.pool.get();d.copyFrom(this.localTransformation);d.transformRect(c,c);r.pool.release(d)}else if(!0===b&&this.mDirty&64)d=r.pool.get(),d.copyFrom(this.localTransformation),d.transformRect(c,c),r.pool.release(d);else return c.copyFrom(this.mBoundsCache),
c;else d=r.pool.get(),d.copyFrom(this.worldTransformation),d.prepend(a.worldTransformationInverted),d.transformRect(c,c),r.pool.release(d);if(!0===b){d=t.pool.get();for(var e=0;e<this.mChildren.length;e++)d.zero(),this.mChildren[e].getBounds(a,b,d),c.union(d);t.pool.release(d);a==this.mParent&&this.mDirty&64&&(this.mBoundsCache.copyFrom(c),this.mDirty^=64)}return c};q.prototype.getStageBounds=function(a){a=a||new t;this.onGetLocalBounds(a);var b=r.pool.get();b.copyFrom(this.worldTransformation);b.prepend(this.stage.worldTransformationInverted);
b.transformRect(a,a);r.pool.release(b);return a};q.prototype.hitTest=function(a){var b=this.getComponent(Da);b=null!==b&&b.touchable;var c=this.onHitTestMask(a);if(!1===b||!1===c)return null;for(c=this.mChildren.length-1;0<=c;--c)if(b=this.mChildren[c].hitTest(a),null!==b)return b;return!0===this.onHitTest(a)?this:null};q.prototype.onHitTest=function(a){var b=!1,c=k.pool.get();this.worldTransformationInverted.transformVector(a,c);if(0<this.mCollidersCache.length)for(a=0;a<this.mCollidersCache.length;a++){if(b=
this.mCollidersCache[a].containsPoint(c),!0===b)return!0}else b=this.localBounds.containsXY(c.x,c.y);k.pool.release(c);return b};q.prototype.onHitTestMask=function(a){return!0};q.prototype.setTransform=function(a,b,c,d,e,h,n,f){this.mX=void 0===a?0:a;this.mY=void 0===b?0:b;this.mRotation=void 0===c?0:c;this.mScaleX=void 0===d?1:d;this.mScaleY=void 0===e?1:e;this.mAnchorX=void 0===h?0:h;this.mAnchorY=void 0===n?0:n;this.setTransformDirty();return this};q.prototype.relativeTo=function(a,b){b=(void 0===
b?null:b)||new k;b.set(this.x,this.y);if(null==this.parent||null==a)return b;this.parent.localToGlobal(b,b);a.globalToLocal(b,b);return b};q.prototype.localToGlobal=function(a,b){return this.worldTransformation.transformVector(a,void 0===b?null:b)};q.prototype.globalToLocal=function(a,b){return this.worldTransformationInverted.transformVector(a,void 0===b?null:b)};q.prototype.alignAnchor=function(a,b){a=void 0===a?.5:a;b=void 0===b?.5:b;g.isNumber(a,b);this.mAnchorX=a;this.anchorY=b;return this};
q.prototype.alignPivot=function(a,b){return this.alignPivotOffset(void 0===a?.5:a,void 0===b?.5:b)};q.prototype.alignPivotOffset=function(a,b,c){a=void 0===a?.5:a;b=void 0===b?.5:b;c=void 0===c?!0:c;g.isNumber(a,b);this.getBounds(this,c,t.__cache.zero());this.mPivotOffsetX=t.__cache.width*a+t.__cache.x;this.mPivotOffsetY=t.__cache.height*b+t.__cache.y;this.__updatePivots(this);this.setTransformDirty();return this};q.prototype.spawn=function(a,b){function c(a){a.done||("function"===typeof a.value?
a.value(function(a){return c(d.next(a))}):c(d.next(a.value)))}b=void 0===b?null:b;var d=a.apply(null==b?this:b);c(d.next());return d};q.prototype.wait=function(a){var b=this;a=void 0===a?1:a;return function(c){return setTimeout(c.bind(b,1E3*a),1E3*a)}};q.prototype.waitMessage=function(a){var b=this;return function(c){return b.once(a,c.bind(b))}};q.prototype.setDirty=function(a,b){void 0===b||b?q.forEach(this,function(b){b.mDirty|=a;b.mDirtyFrameNum=l.engine.frameNum}):(this.mDirty|=a,this.mDirtyFrameNum=
l.engine.frameNum);z.__dirty=!0};q.prototype.__updatePivots=function(a){a.getBounds(a,!0,t.__cache.zero());a.mPivotX=null===a.mAnchorX?a.mPivotOffsetX:a.mPivotOffsetX+t.__cache.width*a.mAnchorX+t.__cache.x;a.mPivotY=null===a.mAnchorY?a.mPivotOffsetY:a.mPivotOffsetY+t.__cache.height*a.mAnchorY+t.__cache.y};q.prototype.setParentDirty=function(a){for(var b=this;null!=b;)b.mDirty|=a,b.mDirtyFrameNum=l.engine.frameNum,b=b.mParent;z.__dirty=!0};q.prototype.setTransformDirty=function(){!0!==this.mSuspendDirty&&
(this.setDirty(65,!1),this.setDirty(78,!0),this.setParentDirty(96))};q.prototype.setRenderDirty=function(){!0!==this.mSuspendDirty&&this.setDirty(8,!0)};q.getBoundsWithPoints=function(a,b,c){c=c||new t;for(var d=Number.MAX_VALUE,e=-Number.MAX_VALUE,h=Number.MAX_VALUE,n=-Number.MAX_VALUE,f=new k,g=0;g<a.length;g+=2)b.transformXY(a[g],a[g+1],f),d>f.x&&(d=f.x),e<f.x&&(e=f.x),h>f.y&&(h=f.y),n<f.y&&(n=f.y);c.set(d,h,e-d,n-h);return c};q.intersects=function(a,b){var c=new k;a.worldTransformationInverted.transformVector(b,
c);return a.localBounds.containsXY(c.x,c.y)};q.intersectsAt=function(a,b,c){c=c||new k;k.__cache.set();a.worldTransformationInverted.transformVector(b,k.__cache);if(!1===a.localBounds.containsXY(k.__cache.x,k.__cache.y))return!1;c.x=k.__cache.x-a.localBounds.x;c.y=k.__cache.y-a.localBounds.y;return!0};q.intersectsWith=function(a,b){for(var c=null,d=a.numChildren-1;0<=d;--d){var e=a.mChildren[d];c=q.intersectsWith(e,b);if(null!=c)return c;if(q.intersects(e,b)){c=e;break}}return null===c&&q.intersects(a,
b)?a:null};q.findWithTag=function(a){return!1===l.engine.mTagCache.hasOwnProperty(a)?null:l.engine.mTagCache[a]};q.findComponents=function(a,b){g.assert(null!==a,"gameObject cannot be null.");g.assert(null!==b,"type cannot be null.");var c=[],d=function(a,b){for(var e=0;e<a.mComponents.length;e++){var h=a.mComponents[e];h instanceof b&&c.push(h)}for(e=0;e<a.mChildren.length;e++)d(a.mChildren[e],b)};d(a,b);return c};q.forEach=function(a,b){null==a&&(a=l.stage);var c=b(a);if(1!=c)for(var d=0;d<a.mChildren.length&&
(c=q.forEach(a.mChildren[d],b),1!=c);d++);};q.find=function(a,b){null==b&&(b=l.stage);if(b.name===a)return b;for(var c=0;c<b.numChildren;c++){var d=q.find(a,b.getChildAt(c));if(null!=d)return d}return null};q.findById=function(a,b){null==b&&(b=l.stage);if(b.id===a)return b;for(var c=0;c<b.numChildren;c++){var d=q.findById(a,b.getChildAt(c));if(null!==d)return d}return null};$jscomp.global.Object.defineProperties(q.prototype,{id:{configurable:!0,enumerable:!0,get:function(){return this.mId}},numComponents:{configurable:!0,
enumerable:!0,get:function(){return this.mComponents.length}},localTransformation:{configurable:!0,enumerable:!0,get:function(){if(this.mDirty&1){this.mDirty^=1;if(0===this.mSkewX&&0===this.mSkewY){if(0===this.mRotation)return this.mLocalTransform.set(this.mScaleX,0,0,this.mScaleY,this.mX-this.mPivotX*this.mScaleX,this.mY-this.mPivotY*this.mScaleY);var a=Math.cos(this.mRotation),b=Math.sin(this.mRotation),c=this.mScaleX*a,d=this.mScaleX*b;b=this.mScaleY*-b;a*=this.mScaleY;return this.mLocalTransform.set(c,
d,b,a,this.mX-this.mPivotX*c-this.mPivotY*b,this.mY-this.mPivotX*d-this.mPivotY*a)}this.mLocalTransform.identity();this.mLocalTransform.scale(this.mScaleX,this.mScaleY);this.mLocalTransform.skew(this.mSkewX,this.mSkewY);this.mLocalTransform.rotate(this.mRotation);c=this.mLocalTransform.data[0];d=this.mLocalTransform.data[1];a=this.mLocalTransform.data[2];b=this.mLocalTransform.data[3];var e=this.mX,h=this.mY;if(0!==this.mPivotX||0!==this.mPivotY)e=this.mX-c*this.mPivotX-a*this.mPivotY,h=this.mY-d*
this.mPivotX-b*this.mPivotY;this.mLocalTransform.data[4]=e;this.mLocalTransform.data[5]=h}return this.mLocalTransform},set:function(a){var b=Math.PI/4,c=a.data[0],d=a.data[1],e=a.data[2],h=a.data[3],n=a.data[4];a=a.data[5];this.mPivotOffsetX=this.mPivotOffsetY=0;this.mAnchorX=null;this.mX=n;this.mY=a;n=Math.atan(-e/h);a=Math.atan(d/c);n!=n&&(n=0);a!=a&&(a=0);this.mScaleY=n>-b&&n<b?h/Math.cos(n):-e/Math.sin(n);this.mScaleX=a>-b&&a<b?c/Math.cos(a):d/Math.sin(a);m.equals(n,a)?(this.mRotation=n,this.mSkewX=
this.mSkewY=0):(this.mRotation=0,this.mSkewX=n,this.mSkewY=a);this.setTransformDirty()}},worldTransformation:{configurable:!0,enumerable:!0,get:function(){this.mDirty&32&&(null!==this.mAnchorX||null!==this.mAnchorY)&&(this.mDirty^=32,this.__updatePivots(this),this.setDirty(79,!0));this.mDirty&2&&(this.mDirty^=2,null!==this.mParent?this.mParent.worldTransformation.copyTo(this.mWorldTransform).append(this.localTransformation):this.localTransformation.copyTo(this.mWorldTransform));return this.mWorldTransform}},
worldTransformationInverted:{configurable:!0,enumerable:!0,get:function(){this.mDirty&4&&(this.mDirty^=4,this.worldTransformation.copyTo(this.mWorldTransformInverted).invert());return this.mWorldTransformInverted}},localBounds:{configurable:!0,enumerable:!0,get:function(){return this.getBounds(this,!1)}},bounds:{configurable:!0,enumerable:!0,get:function(){return this.getBounds(this.mParent,!0)}},numChildren:{configurable:!0,enumerable:!0,get:function(){return this.mChildren.length}},name:{configurable:!0,
enumerable:!0,get:function(){return this.mName},set:function(a){this.mName=a}},x:{configurable:!0,enumerable:!0,get:function(){return this.mX},set:function(a){this.mX!=a&&(g.assert(!isNaN(a),"Value cannot be NaN"),this.mX=a,this.setTransformDirty())}},y:{configurable:!0,enumerable:!0,get:function(){return this.mY},set:function(a){this.mY!=a&&(g.assert(!isNaN(a),"Value cannot be NaN"),this.mY=a,this.setTransformDirty())}},pivotOffsetX:{configurable:!0,enumerable:!0,get:function(){return this.mPivotOffsetX},
set:function(a){this.mPivotOffsetX!==a&&(g.assert(!isNaN(a),"Value cannot be NaN"),this.mPivotOffsetX=a,this.__updatePivots(this),this.setTransformDirty())}},pivotOffsetY:{configurable:!0,enumerable:!0,get:function(){return this.mPivotOffsetY},set:function(a){this.mPivotOffsetY!==a&&(g.assert(!isNaN(a),"Value cannot be NaN"),this.mPivotOffsetY=a,this.__updatePivots(this),this.setTransformDirty())}},anchorX:{configurable:!0,enumerable:!0,set:function(a){this.mAnchorX!==a&&(g.assert(null!==a&&!isNaN(a),
"Value cannot be NaN"),this.mAnchorX=a,this.setTransformDirty())},get:function(){return this.mAnchorX}},anchorY:{configurable:!0,enumerable:!0,set:function(a){this.mAnchorY!==a&&(g.assert(null!==a&&!isNaN(a),"Value cannot be NaN"),this.mAnchorY=a,this.setTransformDirty())},get:function(){return this.mAnchorY}},pivotX:{configurable:!0,enumerable:!0,get:function(){return this.mPivotX}},pivotY:{configurable:!0,enumerable:!0,get:function(){return this.mPivotY}},scaleX:{configurable:!0,enumerable:!0,get:function(){return this.mScaleX},
set:function(a){this.mScaleX!=a&&(g.assert(!isNaN(a),"Value cannot be NaN"),this.mScaleX=a,this.setTransformDirty())}},scaleY:{configurable:!0,enumerable:!0,get:function(){return this.mScaleY},set:function(a){this.mScaleY!=a&&(g.assert(!isNaN(a),"Value cannot be NaN"),this.mScaleY=a,this.setTransformDirty())}},scale:{configurable:!0,enumerable:!0,get:function(){return this.scaleX},set:function(a){this.mScaleX!=a&&(g.assert(!isNaN(a),"Value cannot be NaN"),this.mScaleX=this.mScaleY=a,this.setTransformDirty())}},
skewX:{configurable:!0,enumerable:!0,get:function(){return this.mSkewX},set:function(a){this.mSkewX!=a&&(g.assert(!isNaN(a),"Value cannot be NaN"),this.mSkewX=a,this.setTransformDirty())}},skewY:{configurable:!0,enumerable:!0,get:function(){return this.mSkewY},set:function(a){this.mSkewY!=a&&(g.assert(!isNaN(a),"Value cannot be NaN"),this.mSkewY=a,this.setTransformDirty())}},rotation:{configurable:!0,enumerable:!0,get:function(){return this.mRotation},set:function(a){this.mRotation!=a&&(g.assert(!isNaN(a),
"Value cannot be NaN"),this.mRotation=a,this.setTransformDirty())}},parent:{configurable:!0,enumerable:!0,get:function(){return this.mParent}},root:{configurable:!0,enumerable:!0,get:function(){for(var a=this;null!=a.mParent;)a=a.mParent;return a}},stage:{configurable:!0,enumerable:!0,get:function(){return!0===this.mAdded?l.stage:null}},width:{configurable:!0,enumerable:!0,get:function(){return this.getBounds(this.mParent).width},set:function(a){g.assert(!isNaN(a),"Value cannot be NaN");this.scaleX=
1;var b=this.width;0!=b&&(this.scaleX=a/b)}},height:{configurable:!0,enumerable:!0,get:function(){return this.getBounds(this.mParent).height},set:function(a){g.assert(!isNaN(a),"Value cannot be NaN");this.scaleY=1;var b=this.height;0!=b&&(this.scaleY=a/b)}},localWidth:{configurable:!0,enumerable:!0,get:function(){return this.getBounds(this,!1).width}},localHeight:{configurable:!0,enumerable:!0,get:function(){return this.getBounds(this,!1).height}},path:{configurable:!0,enumerable:!0,get:function(){return null!==
this.mParent?this.mParent.path+"/"+this.mName:this.mName}},tag:{configurable:!0,enumerable:!0,get:function(){return this.mTag},set:function(a){if(this.mTag!==a){var b=this.mTag;this.mTag=a;if(this.mAdded)l.engine.onTagUpdated(this,b,a)}}},touchable:{configurable:!0,enumerable:!0,set:function(a){var b=this.getComponent(Da);!0===a?null===b?this.addComponent(new Da):b.touchable=!0:null!==b&&this.removeComponent(b)},get:function(){var a=this.getComponent(Da);return null!==a&&!0===a.touchable}}});var Ra=
{NORMAL:"normal",NO_SCALE:"noScale",FIXED:"fixed",LETTERBOX:"letterBox",COVER:"cover"},Dc=function(a){this.keyCode=a.keyCode;this.code=a.code;this.char=a.key;this.shiftKey=a.shiftKey;this.altKey=a.altKey;this.ctrlKey=a.ctrlKey},Ib=function(){this.mPixelRatioCache=null};Ib.prototype.getDevicePixelRatio=function(){return void 0!==window.screen.systemXDPI&&void 0!==window.screen.logicalXDPI&&window.screen.systemXDPI>window.screen.logicalXDPI?window.screen.systemXDPI/window.screen.logicalXDPI:void 0!==
window.devicePixelRatio?window.devicePixelRatio:1};$jscomp.global.Object.defineProperties(Ib.prototype,{os:{configurable:!0,enumerable:!0,get:function(){var a=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(a)?"Windows Phone":/android/i.test(a)?"Android":/iPad|iPhone|iPod/.test(a)?"iOS":"unknown"}},isTouch:{configurable:!0,enumerable:!0,get:function(){return"ontouchstart"in window||0<navigator.maxTouchPoints?!0:!1}},isMobile:{configurable:!0,enumerable:!0,get:function(){return/Mobi/.test(navigator.userAgent)}},
pixelRatio:{configurable:!0,enumerable:!0,get:function(){null===this.mPixelRatioCache&&(this.mPixelRatioCache=this.getDevicePixelRatio());return this.mPixelRatioCache}},webAudioSupported:{configurable:!0,enumerable:!0,get:function(){return null!=window.AudioContext||null!=window.webkitAudioContext}}});var V=function(){var a=Z.call(this)||this;g.assert(null==a.constructor.instance,"Only single instance is allowed");l.input=a;a.mPointerPosition=new k;a.mStagePosition=new k;a.mDom=null;a.mEventList=
null;a.mKeyEventList=null;a.mBoundListeners=[];a.mPointerQueue=[];a.mKeyQueue=[];a.mPressedKeys=[];a.mIsPointerDown=!1;a.mNeedUpEvent=!1;a.mInputListeners=new Map;a.mTarget=null;a.mTargetComponent=null;a.mLockedTarget=null;a.mLastInTargetComponent=null;a.__initialize();return a};$jscomp.inherits(V,Z);V.prototype.__initialize=function(){this.mDom=l.engine.viewport.nativeElement;this.__initListeners()};V.prototype.__initListeners=function(){var a=this;this.mKeyEventList=Wc;this.mEventList=window.PointerEvent?
Xc:l.device.isTouch&&l.device.isMobile?Yc:Zc;for(var b=0;3>b;b++)this.mDom.addEventListener(this.mEventList[b],function(b){return a.__onPointerEvent(b)},!1);b=null;b=function(b){return a.__onPointerEventDoc(b)};this.mBoundListeners.push({name:this.mEventList[2],listener:b});document.addEventListener(this.mEventList[2],b,!1);for(var c=0;c<this.mKeyEventList.length;c++)b=function(b){return a.__onKeyEvent(b)},this.mBoundListeners.push({name:this.mKeyEventList[c],listener:b}),document.addEventListener(this.mKeyEventList[c],
b,!1)};V.prototype.__onKeyEvent=function(a){if(!0===l.engine.isPaused)return!1;this.mKeyQueue.push(a);return!0};V.prototype.__onPointerEventDoc=function(a){!0!==l.engine.isPaused&&!1===(a.target==this.mDom||a.target.parentElement==this.mDom)&&!0===this.mNeedUpEvent&&(this.mNeedUpEvent=!1,this.__pushEvent(a))};V.prototype.__onPointerEvent=function(a){if(!0===l.engine.isPaused)return!1;a.preventDefault();this.__pushEvent(a);return!0};V.prototype.__pushEvent=function(a){var b=0===a.type.indexOf("touch")?
this.__getTouchPos(this.mDom,a):this.__getPointerPos(this.mDom,a);this.mPointerQueue.push({e:a,x:b.x,y:b.y})};V.prototype.__getPointerPos=function(a,b){var c=a.getBoundingClientRect(),d=l.engine.viewport.rotation;return new k((0===d?a.clientWidth:a.clientHeight)/c.width*(b.clientX-c.left),(0===d?a.clientHeight:a.clientWidth)/c.height*(b.clientY-c.top))};V.prototype.__getTouchPos=function(a,b){var c=a.getBoundingClientRect();b=b.changedTouches[0];var d=l.engine.viewport.rotation;return new k((0===
d?a.clientWidth:a.clientHeight)/c.width*(b.clientX-c.left),(0===d?a.clientHeight:a.clientWidth)/c.height*(b.clientY-c.top))};V.prototype.onUpdate=function(){this.__updateKeyboard();for(var a=l.engine.viewport.size,b=l.engine.viewport.rotation,c=l.stage;0<this.mPointerQueue.length;){var d=this.mPointerQueue.shift(),e=d.x,h=d.y;1===b?(d.x=h,d.y=a.height-e):-1===b&&(d.x=a.width-h,d.y=e);this.mPointerPosition.x=d.x;this.mPointerPosition.y=d.y;this.mStagePosition.x=d.x;this.mStagePosition.y=d.y;c.worldTransformationInverted.transformVector(this.mStagePosition,
this.mStagePosition);e=$c[this.mEventList.indexOf(d.e.type)];this.__findTarget(this.mPointerPosition);this.__processNativeEvent(d,this.mPointerPosition,e)}};V.prototype.__findTarget=function(a){a=l.stage.hitTest(a);null===a?this.mTargetComponent=this.mTarget=null:(this.mTarget=a,this.mTargetComponent=a.getComponent(Da))};V.prototype.__processNativeEvent=function(a,b,c){c===V.POINTER_DOWN?this.mNeedUpEvent=this.mIsPointerDown=!0:c===V.POINTER_UP&&(this.mIsPointerDown=!1);this.post(c);if(null!==this.mTarget||
null!==this.mLockedTarget){a=new Ec(this.mTarget,b.x,b.y);if(c===V.POINTER_DOWN)this.mLockedTarget=this.mTarget;else if(c===V.POINTER_UP&&null!==this.mLockedTarget){this.mLockedTarget.post("~pointerUp",a);this.mLockedTarget=null;return}b=this.mTarget===this.mLockedTarget;null===this.mLockedTarget?null!==this.mTarget&&this.mTarget.post("~"+c,a):!0===b?this.mLockedTarget.post("~"+c,a):null!==this.mLockedTarget.mParent&&null!==this.mTarget&&this.mLockedTarget.mParent.post("~"+c,a)}};V.prototype.__updateKeyboard=
function(){for(;0<this.mKeyQueue.length;){var a=this.mKeyQueue.shift(),b=this.mKeyEventList.indexOf(a.type),c=this.mPressedKeys.indexOf(a.keyCode);b=ad[b];"keyUp"===b&&-1!==c?this.mPressedKeys.splice(c,1):"keyDown"===b&&-1===c&&(this.mPressedKeys.push(a.keyCode),b="keyPress");this.post(b,new Dc(a),a)}};V.prototype.dispose=function(){for(Z.prototype.dispose.call(this);0<this.mBoundListeners.length;){var a=this.mBoundListeners.pop();document.removeEventListener(a.name,a.listener)}l.input=null};$jscomp.global.Object.defineProperties(V.prototype,
{isPointerDown:{configurable:!0,enumerable:!0,get:function(){return this.mIsPointerDown}},pointerX:{configurable:!0,enumerable:!0,get:function(){return this.mPointerPosition.x}},pointerY:{configurable:!0,enumerable:!0,get:function(){return this.mPointerPosition.y}},stageX:{configurable:!0,enumerable:!0,get:function(){return this.mStagePosition.x}},stageY:{configurable:!0,enumerable:!0,get:function(){return this.mStagePosition.y}},pointerPosition:{configurable:!0,enumerable:!0,get:function(){return this.mPointerPosition}},
stagePosition:{configurable:!0,enumerable:!0,get:function(){return this.mStagePosition}},pressedKeys:{configurable:!0,enumerable:!0,get:function(){return this.mPressedKeys}}});$jscomp.global.Object.defineProperties(V,{POINTER_DOWN:{configurable:!0,enumerable:!0,get:function(){return"pointerDown"}},POINTER_MOVE:{configurable:!0,enumerable:!0,get:function(){return"pointerMove"}},POINTER_UP:{configurable:!0,enumerable:!0,get:function(){return"pointerUp"}}});var Wc=["keydown","keyup"],ad=["keyDown","keyUp",
"keyPress"],$c=["pointerMove","pointerDown","pointerUp","pointerIn","pointerOut"],Xc=["pointermove","pointerdown","pointerup","pointerenter","pointerleave"],Zc=["mousemove","mousedown","mouseup","mouseenter","mouseleave"],Yc=["touchmove","touchstart","touchend","touchenter","touchleave"],Ec=function(a,b,c){this.mActiveObject=a;this.mX=b;this.mY=c};$jscomp.global.Object.defineProperties(Ec.prototype,{activeObject:{configurable:!0,enumerable:!0,get:function(){return this.mActiveObject}},x:{configurable:!0,
enumerable:!0,get:function(){return this.mX}},y:{configurable:!0,enumerable:!0,get:function(){return this.mY}}});var ka=function(){var a=q.call(this)||this;a.mName="stage";a.mScaleMode=Ra.NORMAL;a.mWidth=960;a.mHeight=640;a.mStageWidth=0;a.mStageHeight=0;a.mStageScaleFactor=0;a.mCacheWidth=0;a.mCacheHeight=0;a.mDPR=l.device.getDevicePixelRatio();a.mAdded=!0;l.engine.hasSystem(V)&&a.addComponent(new Da);return a};$jscomp.inherits(ka,q);ka.prototype.setSize=function(a,b){this.mWidth=a;this.mHeight=
b;this.__refresh()};ka.prototype.onUpdate=function(){var a=l.engine.viewport.size;if(this.mCacheWidth!==a.width||this.mCacheHeight!==a.height)this.mCacheWidth=a.width,this.mCacheHeight=a.height,this.__refresh()};ka.prototype.refresh=function(){this.__refresh()};ka.prototype.__refresh=function(){var a=l.engine.viewport.size,b=a.width;a=a.height;if(this.mScaleMode===Ra.FIXED){var c=Math.max(b*this.mHeight/a/b,a*this.mWidth/b/a),d=b*c;c*=a;this.mStageWidth=d;this.mStageHeight=c;this.mScaleX=this.mScaleY=
this.mStageScaleFactor=Math.min(b/d,a/c)}else this.mScaleMode===Ra.LETTERBOX||this.mScaleMode===Ra.COVER?(d=this.mScaleMode===Ra.COVER?Math.max(b/this.mWidth,a/this.mHeight):Math.min(b/this.mWidth,a/this.mHeight),this.mX=(b-this.mWidth*d)/2,this.mY=(a-this.mHeight*d)/2,this.mStageWidth=this.mWidth,this.mStageHeight=this.mHeight,this.mScaleX=this.mScaleY=this.mStageScaleFactor=d):this.mScaleMode===Ra.NORMAL?(this.mStageWidth=b,this.mStageHeight=a,this.mScaleX=this.mScaleY=this.mStageScaleFactor=1):
this.mScaleMode===Ra.NO_SCALE?(this.mStageWidth=b*this.mDPR,this.mStageHeight=a*this.mDPR,this.mScaleX=this.mScaleY=this.mStageScaleFactor=1/this.mDPR):g.error("Not supported stage scale mode.");this.mStageWidth=Math.round(this.mStageWidth);this.mStageHeight=Math.round(this.mStageHeight);this.mX=Math.round(this.mX);this.mY=Math.round(this.mY);l.driver.__onResize(null,null);this.setTransformDirty();this.post(E.RESIZE);this.mLocalTransform.set(this.mScaleX,0,0,this.mScaleY,this.mX,this.mY)};ka.prototype.getBounds=
function(a,b,c){c=c||new t;return c.set(-this.mX/this.mStageScaleFactor,-this.mY/this.mStageScaleFactor,this.mStageWidth+2*this.mX/this.mStageScaleFactor,this.mStageHeight+2*this.mY/this.mStageScaleFactor)};ka.prototype.onGetLocalBounds=function(a){a=a||new t;return a.set(0,0,this.mStageWidth,this.mStageHeight)};ka.prototype.removeFromParent=function(){g.error("Not allowed.")};$jscomp.global.Object.defineProperties(ka.prototype,{scaleMode:{configurable:!0,enumerable:!0,get:function(){return this.mScaleMode},
set:function(a){this.mScaleMode=a;this.__refresh()}},scaleFactor:{configurable:!0,enumerable:!0,get:function(){return this.mStageScaleFactor}},renderWidth:{configurable:!0,enumerable:!0,get:function(){return this.mStageWidth*this.mDPR*this.mStageScaleFactor}},renderHeight:{configurable:!0,enumerable:!0,get:function(){return this.mStageHeight*this.mDPR*this.mStageScaleFactor}},centerX:{configurable:!0,enumerable:!0,get:function(){return.5*this.mStageWidth}},centerY:{configurable:!0,enumerable:!0,get:function(){return.5*
this.mStageHeight}},localTransformation:{configurable:!0,enumerable:!0,get:function(){return this.mLocalTransform},set:function(a){g.error("Not allowed.")}},scaleX:{configurable:!0,enumerable:!0,set:function(a){g.error("Not allowed.")},get:function(){return 1}},scaleY:{configurable:!0,enumerable:!0,set:function(a){g.error("Not allowed.")},get:function(){return 1}},pivotOffsetX:{configurable:!0,enumerable:!0,set:function(a){g.error("Not allowed.")},get:function(){return 0}},pivotOffsetY:{configurable:!0,
enumerable:!0,set:function(a){g.error("Not allowed.")},get:function(){return 0}},anchorX:{configurable:!0,enumerable:!0,set:function(a){g.error("Not allowed.")},get:function(){return 0}},anchorY:{configurable:!0,enumerable:!0,set:function(a){g.error("Not allowed.")},get:function(){return 0}},x:{configurable:!0,enumerable:!0,set:function(a){g.error("Not allowed.")},get:function(){return this.mX/this.mStageScaleFactor}},y:{configurable:!0,enumerable:!0,set:function(a){g.error("Not allowed.")},get:function(){return this.mY/
this.mStageScaleFactor}},rotation:{configurable:!0,enumerable:!0,set:function(a){g.error("Not allowed.")},get:function(){return 0}},width:{configurable:!0,enumerable:!0,set:function(a){g.error("Not allowed.")},get:function(){return this.mStageWidth}},height:{configurable:!0,enumerable:!0,set:function(a){g.error("Not allowed.")},get:function(){return this.mStageHeight}},name:{configurable:!0,enumerable:!0,set:function(a){g.error("Not allowed.")},get:function(){return this.mName}}});var la=function(a,
b,c,d){var e=ja.call(this)||this;for(var h=[],n=[],f=0;4>f;f++)h.push(new k),n.push(new k);e.mRect=new t;e.mNormals=h;e.mVertices=n;e.mLocalMin=new k;e.mLocalMax=new k;e.mLocalCenter=new k;e.set(a,b,c,d);return e};$jscomp.inherits(la,ja);la.prototype.set=function(a,b,c,d){this.mRect.set(a,b,c,d);this.mChanged=!0;return this};la.prototype.refresh=function(a,b){var c=this.mLocalMin,d=this.mLocalMax,e=this.mMin,h=this.mMax,n=this.mLocalCenter,f=this.mCenter;if(this.mChanged){var g=this.mVertices,l=this.mNormals,
m=this.mRect,p=k.pool.get();a.transformVector(p.set(0,-1),l[0]);a.transformVector(p.set(1,0),l[1]);a.transformVector(p.set(0,1),l[2]);a.transformVector(p.set(-1,0),l[3]);for(var w=0;4>w;w++)l[w].normalize();a.transformVector(p.set(m.x,m.y),g[0]);a.transformVector(p.set(m.x+m.width,m.y),g[1]);a.transformVector(p.set(m.x+m.width,m.y+m.height),g[2]);a.transformVector(p.set(m.x,m.y+m.height),g[3]);n.set((g[0].x+g[2].x)/2,(g[0].y+g[2].y)/2);c.x=Math.min(g[0].x,g[1].x,g[2].x,g[3].x);c.y=Math.min(g[0].y,
g[1].y,g[2].y,g[3].y);d.x=Math.max(g[0].x,g[1].x,g[2].x,g[3].x);d.y=Math.max(g[0].y,g[1].y,g[2].y,g[3].y);k.pool.release(p)}e.x=c.x+b.x;e.y=c.y+b.y;h.x=d.x+b.x;h.y=d.y+b.y;f.x=n.x+b.x;f.y=n.y+b.y};la.prototype.containsPoint=function(a){return this.mRect.containsXY(a.x,a.y)};var qb=function(a,b,c){var d=ja.call(this)||this;d.mCircle=new W(a,b,c);d.mLocalCenter=new k;d.mLocalMin=new k;d.mLocalMax=new k;d.mRadius=0;d.set(a,b,c);return d};$jscomp.inherits(qb,ja);qb.prototype.set=function(a,b,c){this.mCircle.set(a,
b,c);this.mChanged=!0;return this};qb.prototype.refresh=function(a,b){var c=this.mLocalMin,d=this.mLocalMax,e=this.mMin,h=this.mMax,n=this.mLocalCenter,f=this.mCenter;if(this.mChanged){var g=this.mCircle,l=g.r*Math.sqrt(a.data[0]*a.data[0]+a.data[1]*a.data[1]);a.transformXY(g.x,g.y,n);this.mRadius=l;c.x=n.x-l;c.y=n.y-l;d.x=n.x+l;d.y=n.y+l}e.x=c.x+b.x;e.y=c.y+b.y;h.x=d.x+b.x;h.y=d.y+b.y;f.x=n.x+b.x;f.y=n.y+b.y};qb.prototype.containsPoint=function(a){if(null===this.gameObject)return!1;var b=this.mCircle,
c=k.pool.get();a=c.set(b.x,b.y).distance(a);k.pool.release(c);return a<=b.r};var Sa=function(a,b,c){b=new Qa(a*c,b*c);a=Q.call(this,b.native)||this;a.set(b.native,null,null,1/c);a.renderTarget=b;return a};$jscomp.inherits(Sa,Q);Sa.prototype.resize=function(a,b,c){this.renderTarget.resize(a*c,b*c);this.set(this.renderTarget.native,null,null,1/c)};Sa.prototype.__dumpToDocument=function(){var a=new Image;a.style.position="fixed";a.style.top="0px";a.style.left="0px";a.style.background="#333";a.style.width=
"256px";a.style.height="auto";a.src=this.mNative.toDataURL("image/png");document.body.appendChild(a)};var ma=function(a,b,c){c=void 0===c?1:c;a=Q.call(this,a,null,null,c)||this;a.mSubTextures={};a.__parseAtlasData(b,c);return a};$jscomp.inherits(ma,Q);ma.prototype.__parseAtlasData=function(a,b){for(var c in a.frames){var d=a.frames[c],e=new t(d[0],d[1],d[2],d[3]),h=new t(d[4],d[5],d[6],d[7]),n=null,f=null;10===d.length?n=new k(d[8],d[9]):12===d.length?f=new t(d[8],d[9],d[10],d[11]):14===d.length&&
(n=new k(d[8],d[9]),f=new t(d[10],d[11],d[12],d[13]));this.mSubTextures[c]=new Q(this.native,e,h,b,n,f)}};ma.prototype.getTexture=function(a){var b=this.mSubTextures[a];g.assertWarn(void 0!==b,"Texture '"+a+"' was not found");return b};ma.prototype.getTextures=function(a,b){a=void 0===a?null:a;b=(void 0===b?null:b)||[];if(null===a){for(var c in this.mSubTextures)b.push(this.mSubTextures[c]);return b}c=[];a=new RegExp("^"+a.split("*").join(".*")+"$");for(var d in this.mSubTextures)a.test(d)&&c.push(d);
ma.naturalSort(c);for(d=0;d<c.length;d++)b.push(this.mSubTextures[c[d]]);return b};ma.naturalSort=function(a,b){a.sort(ma.__naturalComparer(void 0===b?null:b))};ma.__naturalComparer=function(a,b){a=void 0===a?null:a;b=void 0===b?!0:b;return function(c,d){var e=/(-?\d*\.?\d+)/g;c=String(null==a?c:c[a]).split(e);d=String(null==a?d:d[a]).split(e);e=Math.min(c.length,d.length);for(var h=0;h<e;h++){if(b){var n=Math.abs(parseFloat(c[h]))||c[h].toLowerCase();var f=Math.abs(parseFloat(d[h]))||d[h].toLowerCase()}else n=
parseFloat(c[h])||c[h].toLowerCase(),f=parseFloat(d[h])||d[h].toLowerCase();if(n<f)return-1;if(n>f)return 1}return 0}};$jscomp.global.Object.defineProperties(ma.prototype,{subTextures:{configurable:!0,enumerable:!0,get:function(){return this.mSubTextures}}});var ha=function(a){var b=C.call(this)||this;b.mUrl=a;b.mData=null;b.mIsLoaded=!1;b.mNumOwners=0;return b};$jscomp.inherits(ha,C);ha.prototype.load=function(){};ha.prototype.abort=function(){if(!(1<this.mNumOwners))this.onAbort()};ha.prototype.onAbort=
function(){};ha.prototype.onLoad=function(){this.mIsLoaded=!0;this.post(E.COMPLETE)};ha.prototype.onError=function(){this.mIsLoaded=!1;this.post(E.ERROR)};$jscomp.global.Object.defineProperties(ha.prototype,{data:{configurable:!0,enumerable:!0,get:function(){return this.mData}},url:{configurable:!0,enumerable:!0,get:function(){return this.mUrl}}});var rb=function(a){a=ha.call(this,a)||this;a.mImageElement=new Image;a.mImageElement.crossOrigin="anonymous";return a};$jscomp.inherits(rb,ha);rb.prototype.load=
function(){var a=this;this.mImageElement.src=this.mUrl;this.mImageElement.onload=function(){return a.onLoad()};this.mImageElement.onerror=function(){return a.onError()};this.mData=this.mImageElement};rb.prototype.onAbort=function(){this.mImageElement.onload=this.mImageElement.onabort=this.mImageElement.onerror=function(){};this.mImageElement.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYmBgAAgwAAAMAAMjcmNcAAAAAElFTkSuQmCC"};
var sb=function(a){a=ha.call(this,a)||this;a.mRequest=new XMLHttpRequest;a.mimeType=void 0;a.responseType="";return a};$jscomp.inherits(sb,ha);sb.prototype.load=function(){var a=this;this.mRequest.open("GET",this.mUrl,!0);""!=this.responseType&&(this.mRequest.responseType=this.responseType);void 0!=this.mRequest.overrideMimeType&&this.mimeType&&this.mRequest.overrideMimeType(this.mimeType);this.mRequest.onreadystatechange=function(){if(4===a.mRequest.readyState)if(200===a.mRequest.status||0===a.mRequest.status&&
a.mRequest.responseText)a.mData=""===a.responseType||"text"===a.responseType?a.mRequest.responseText:a.mRequest.response,a.onLoad();else a.onError()};this.mRequest.send(null)};sb.prototype.onAbort=function(){this.mRequest.abort()};var Ta=function(a,b,c){b=ha.call(this,b)||this;b.mName=a;b.mTestingFontName="Courier New";b.mIsLocal=c;b.mTestingString="~ GHBDTN,.#$Mlck";b.mCheckDelay=50;b.mTestingElement=b.__getTestingElement();b.metrics=null;b.mLoaderElement=b.__getLoaderElement(b.mIsLocal);b.mTestingElement.style.fontFamily=
b.mTestingFontName;b.mDefaultFontWidth=b.mTestingElement.offsetWidth;b.mTestingElement.style.fontFamily=a+","+b.mTestingFontName;b.mTimeoutHandle=-1;return b};$jscomp.inherits(Ta,ha);Ta.prototype.load=function(){this.mIsLocal?this.mLoaderElement.innerHTML+="\n @font-face {font-family: "+this.mName+"; src: url("+this.mUrl+");}":this.mLoaderElement.href=this.mUrl;this.__checkLoadingStatus()};Ta.prototype.onAbort=function(){clearTimeout(this.mTimeoutHandle);this.mTestingElement.parentNode.removeChild(this.mTestingElement)};
Ta.prototype.__getLoaderElement=function(a){var b=this;a=document.createElement(a?"style":"link");a.type="text/css";a.media="all";a.rel="stylesheet";a.onerror=function(){b.onError()};document.getElementsByTagName("head")[0].appendChild(a);return a};Ta.prototype.__getTestingElement=function(){var a=document.createElement("span");a.style.position="absolute";a.style.top="-9999px";a.style.left="-9999px";a.style.visibility="hidden";a.style.fontSize="250px";a.innerHTML=this.mTestingString;document.body.appendChild(a);
return a};Ta.prototype.__checkLoadingStatus=function(){this.mDefaultFontWidth===this.mTestingElement.offsetWidth?this.mTimeoutHandle=setTimeout(this.__checkLoadingStatus.bind(this),this.mCheckDelay):(this.metrics=ra.get(this.mName),this.mTestingElement.parentNode.removeChild(this.mTestingElement),this.onLoad())};var D=function(a,b){var c=C.call(this)||this;c.mType=a;c.mName=b;c.mData=null;c.mLoaders=[];c.mNumLoaded=0;c.mIsReady=!1;c.mBindings=[];return c};$jscomp.inherits(D,C);D.prototype.addLoader=
function(a){this.mLoaders.push(a);a.mNumOwners++;this.mBindings.push(a.on(E.COMPLETE,this.__onLoaderComplete,this));this.mBindings.push(a.on(E.ERROR,this.__onLoaderError,this));return a};D.prototype.onLoaderRequested=function(a){};D.prototype.__onLoaderComplete=function(a){this.mNumLoaded++;this.mNumLoaded===this.mLoaders.length&&(this.mBindings.forEach(function(a){return a.off()}),this.onAllLoaded())};D.prototype.__onLoaderError=function(a){this.abort();this.post(E.ERROR)};D.prototype.onAllLoaded=
function(){};D.prototype.abort=function(){this.mNumLoaded=0;this.mBindings.forEach(function(a){return a.off()});for(var a=0;a<this.mLoaders.length;a++)this.mLoaders[a].abort()};D.prototype.ready=function(a){this.mData=a;this.mIsReady=!0;this.post(E.COMPLETE)};$jscomp.global.Object.defineProperties(D.prototype,{type:{configurable:!0,enumerable:!0,get:function(){return this.mType}},name:{configurable:!0,enumerable:!0,get:function(){return this.mName}},data:{configurable:!0,enumerable:!0,get:function(){return this.mData}},
isReady:{configurable:!0,enumerable:!0,get:function(){return this.mIsReady}},loaders:{configurable:!0,enumerable:!0,get:function(){return this.mLoaders}}});var tb=function(a,b){a=D.call(this,"texture",a)||this;a.mUrl=b;a.mScale=1/Q.getScaleFactorFromName(b);a.mImageLoader=null;return a};$jscomp.inherits(tb,D);tb.prototype.onLoaderRequested=function(a){this.mImageLoader=a.get("image",this.mUrl);this.addLoader(this.mImageLoader)};tb.prototype.onAllLoaded=function(){D.prototype.ready.call(this,new Q(this.mImageLoader.data,
null,null,this.mScale))};var ub=function(a,b){a=D.call(this,"json",a)||this;a.mUrl=b;a.mXHR=null;return a};$jscomp.inherits(ub,D);ub.prototype.onLoaderRequested=function(a){this.mXHR=a.get("xhr",this.mDataUrl);this.mXHR.mimeType="application/json";this.mXHR.responseType="json";this.addLoader(this.mXHR)};ub.prototype.onAllLoaded=function(){D.prototype.ready.call(this,JSON.parse(this.mXHR.data))};var vb=function(a,b){a=D.call(this,"xml",a)||this;a.mUrl=b;a.mXHR=null;return a};$jscomp.inherits(vb,D);
vb.prototype.onLoaderRequested=function(a){this.mXHR=a.get("xhr",this.mUrl);this.mXHR.mimeType="text/xml";this.addLoader(this.mXHR)};vb.prototype.onAllLoaded=function(){D.prototype.ready.call(this,(new DOMParser).parseFromString(this.mXHR.data,"text/xml"))};var wb=function(a,b,c){var d=D.call(this,"font",a)||this;!1===c&&(b="https://fonts.googleapis.com/css?family="+a.replace(/ /g,"+"));d.mUrl=b;d.mIsLocal=c;return d};$jscomp.inherits(wb,D);wb.prototype.onLoaderRequested=function(a){a=a.get("fontFace",
this.mUrl,this.mIsLocal);this.addLoader(a)};wb.prototype.onAllLoaded=function(){D.prototype.ready.call(this)};var xb=function(a,b,c){a=D.call(this,"textureAtlas",a)||this;a.mImageUrl=b;a.mDataUrl=c;a.mScale=1/Q.getScaleFactorFromName(b);a.mImageLoader=null;a.mXHR=null;return a};$jscomp.inherits(xb,D);xb.prototype.onLoaderRequested=function(a){this.mImageLoader=a.get("image",this.mImageUrl);this.addLoader(this.mImageLoader);this.mXHR=a.get("xhr",this.mDataUrl);this.mXHR.mimeType="application/json";
this.mXHR.responseType="json";this.addLoader(this.mXHR)};xb.prototype.onAllLoaded=function(){D.prototype.ready.call(this,new ma(this.mImageLoader.data,JSON.parse(this.mXHR.data),this.mScale))};var Xa=function(a,b,c){a=D.call(this,"bitmapFont",a)||this;a.mImageUrl=b;a.mXmlUrl=c;a.mScale=1/Q.getScaleFactorFromName(b);a.mImageLoader=null;a.mXHR=null;return a};$jscomp.inherits(Xa,D);Xa.prototype.onLoaderRequested=function(a){this.mImageLoader=a.get("image",this.mImageUrl);this.addLoader(this.mImageLoader);
this.mXHR=a.get("xhr",this.mXmlUrl);this.mXHR.mimeType="text/xml";this.addLoader(this.mXHR)};Xa.prototype.onAllLoaded=function(){var a=(new DOMParser).parseFromString(this.mXHR.data,"text/xml"),b=new Q(this.mImageLoader.data,null,null,this.mScale);D.prototype.ready.call(this,Xa.parse(a,b))};Xa.parse=function(a,b){var c=new Fc;c.texture=b;c.xml=a;var d=a.getElementsByTagName("info")[0],e=a.getElementsByTagName("common")[0];c.name=d.getAttribute("face");c.size=parseInt(d.getAttribute("size"),10);c.lineHeight=
parseInt(e.getAttribute("lineHeight"),10);c.baseline=parseInt(e.getAttribute("base"),10);c.chars={};d=a.getElementsByTagName("char");for(e=0;e<d.length;e++){var h=d[e],n=parseInt(h.getAttribute("id"),10),f=parseInt(h.getAttribute("x"),10)+b.region.x,g=parseInt(h.getAttribute("y"),10)+b.region.y,l=parseInt(h.getAttribute("width"),10),k=parseInt(h.getAttribute("height"),10),p=parseInt(h.getAttribute("xoffset"),10),m=parseInt(h.getAttribute("yoffset"),10);h=parseInt(h.getAttribute("xadvance"),10);f=
new t(f,g,l,k);g=new Gc;g.texture=new Q(b.native,f);g.xOffset=p;g.yOffset=m;g.width=l;g.height=k;g.xAdvance=h;c.chars[n]=g}a=a.getElementsByTagName("kerning");for(b=0;b<a.length;b++)n=a[b],d=parseInt(n.getAttribute("first"),10),e=parseInt(n.getAttribute("second"),10),n=parseInt(n.getAttribute("amount"),10),c.chars[e]&&(c.chars[e].kerning[d]=n);return c};var Fc=function(){this.xml=this.texture=null;this.name="";this.lineHeight=this.size=0;this.chars={};this.baseline=0},Gc=function(){this.texture=null;
this.xAdvance=this.height=this.width=this.yOffset=this.xOffset=0;this.kerning={}},da={NEWBORN:"newborn",PLAYING:"playing",PAUSED:"paused",STOPPED:"stopped",COMPLETED:"completed"},wa=function(){this.mOutputNode=this.mInputNode=null};$jscomp.global.Object.defineProperties(wa.prototype,{_inputNode:{configurable:!0,enumerable:!0,get:function(){g.assert(null!=this.mInputNode,"Input node must be specified in descendant class");return this.mInputNode}},_outputNode:{configurable:!0,enumerable:!0,get:function(){g.assert(null!=
this.mOutputNode,"Output node must be specified in descendant class");return this.mOutputNode}}});var Jb=function(){var a=wa.call(this)||this;a.mGainL=l.audio._newGainNode();a.mGainR=l.audio._newGainNode();a.mSplitter=l.audio.context.createChannelSplitter(2);a.mMerger=l.audio.context.createChannelMerger(2);a.mSplitter.connect(a.mGainL,0);a.mSplitter.connect(a.mGainR,1);a.mGainL.connect(a.mMerger,0,0);a.mGainR.connect(a.mMerger,0,1);a.mValue=0;a.mInputNode=a.mSplitter;a.mOutputNode=a.mMerger;return a};
$jscomp.inherits(Jb,wa);$jscomp.global.Object.defineProperties(Jb.prototype,{pan:{configurable:!0,enumerable:!0,set:function(a){this.mValue=m.clamp(a,-1,1);this.mGainL.gain.setValueAtTime(1-m.clamp(this.mValue,0,1),0);this.mGainR.gain.setValueAtTime(1+m.clamp(this.mValue,-1,0),0)},get:function(){return this.mValue}}});var bd=0,ea=function(a){var b=C.call(this)||this;b.mId=++bd;b.mSound=a;b.mState=da.NEWBORN;b.mChannel="master";b.mVolume=1;b.mLoop=!1;b.mStartTime=0;b.mPausePosition=0;b.mSrc=null;b.mGainNode=
l.audio._newGainNode();b.mFirstNode=b.mGainNode;b.mPlayNode=null;b.mSpatialPanner=null;b.mStereoPanner=null;b.mAnalyser=null;return b};$jscomp.inherits(ea,C);ea.prototype.enableSpacePan=function(){null==this.mSpatialPanner&&(this.mSpatialPanner=l.audio.context.createPanner(),this.mFirstNode&&(this.mSpatialPanner.connect(this.mFirstNode),this.mFirstNode=this.mSpatialPanner),this.__reconnectSource());return this.mSpatialPanner};ea.prototype.enableStereoPan=function(){null==this.mStereoPanner&&(this.mStereoPanner=
new Jb,this.mFirstNode&&(this.mStereoPanner._outputNode.connect(this.mFirstNode),this.mFirstNode=this.mStereoPanner._inputNode),this.__reconnectSource());return this.mStereoPanner};ea.prototype.enableAnalyser=function(){null==this.mAnalyser&&(this.mAnalyser=l.audio.context.createAnalyser(),this.mFirstNode&&(this.mAnalyser.connect(this.mFirstNode),this.mFirstNode=this.mAnalyser),this.__reconnectSource());return this.mAnalyser};ea.prototype.__reconnectSource=function(){null!=this.mSrc&&null!=this.mPlayNode&&
null!=this.mFirstNode&&(this.mSrc.disconnect(this.mPlayNode),this.mSrc.connect(this.mFirstNode),this.mPlayNode=this.mFirstNode)};ea.prototype._play=function(){var a=this;if(this.mState===da.PLAYING)return this;this.mState=da.PLAYING;var b=this.mSound.isSubClip&&!this.mLoop?this.mSound.duration-this.mPausePosition:void 0;this.mGainNode.gain.setValueAtTime(this.mVolume,0);var c=l.audio.context.createBufferSource();c.buffer=this.mSound.native;c.loop=this.mLoop;c.onended=function(){return a.__onComplete()};
this.mFirstNode&&c.connect(this.mFirstNode);this.mPlayNode=this.mFirstNode;this.mStartTime=l.audio.context.currentTime-this.mPausePosition;this.mLoop&&this.mSound.isSubClip&&(c.loopStart=this.mSound.offset,c.loopEnd=this.mSound.offset+this.mSound.duration);c.start(l.audio.context.currentTime,this.mSound.offset+this.mPausePosition,b);l.audio._resolveChannel(this);this.mSrc=c;return this};ea.prototype.stop=function(a){a=void 0===a?0:a;this.mState===da.PLAYING&&(this.mGainNode.gain.cancelScheduledValues(0),
this.mSrc.stop(l.audio.context.currentTime+a))};ea.prototype.pause=function(){this.mState===da.PLAYING&&(this.stop(),this.mPausePosition=this.currentPosition,this.mState=da.PAUSED)};ea.prototype.resume=function(){this.mState===da.PAUSED&&this._play()};ea.prototype.fade=function(a,b,c,d){c=void 0===c?0:c;d=void 0===d?"linear":d;0>=c?this.mGainNode.gain.setValueAtTime(b,0):(this.mGainNode.gain.setValueAtTime(a,0),"exp"===d?this.mGainNode.gain.exponentialRampToValueAtTime(Math.max(b,.01),l.audio.context.currentTime+
c):this.mGainNode.gain.linearRampToValueAtTime(b,l.audio.context.currentTime+c))};ea.prototype.__onComplete=function(){this.mSrc=null;this.mState!==da.PAUSED&&(this.mStartTime=0,this.mState=da.COMPLETED,this.post(E.COMPLETE))};$jscomp.global.Object.defineProperties(ea.prototype,{currentPosition:{configurable:!0,enumerable:!0,get:function(){switch(this.mState){case da.PLAYING:return(l.audio.context.currentTime-this.mStartTime)%(this.mSound.duration+.01);case da.PAUSED:return this.mPausePosition;case da.COMPLETED:return this.mSound.duration}return 0}},
_outputNode:{configurable:!0,enumerable:!0,get:function(){return this.mGainNode}},channel:{configurable:!0,enumerable:!0,get:function(){return this.mChannel},set:function(a){this.mChannel!==a&&(this.mChannel=a,this.mState===da.PLAYING&&l.audio._resolveChannel(this))}},volume:{configurable:!0,enumerable:!0,get:function(){return this.mVolume},set:function(a){this.mVolume=a;this.mGainNode.gain.setValueAtTime(this.mVolume,0)}},loop:{configurable:!0,enumerable:!0,get:function(){return this.mLoop},set:function(a){this.mLoop=
a}},pan:{configurable:!0,enumerable:!0,get:function(){return this.mStereoPanner.pan},set:function(a){0!==a&&null==this.mStereoPanner&&this.enableStereoPan();this.mStereoPanner&&(this.mStereoPanner.pan=a)}},isPlaying:{configurable:!0,enumerable:!0,get:function(){return this.mState===da.PLAYING}},duration:{configurable:!0,enumerable:!0,get:function(){return this.mSound.duration}}});var sa=function(a){this.mName=a;this.mGain=l.audio._newGainNode();this.mSounds=[];this.mEffects=[]};sa.prototype.attachSound=
function(a){var b=this;g.assert(null!=a,"Sound cannot be null");a._outputNode.connect(this._inputNode);this.mSounds.push(a);a.on(E.COMPLETE,function(){b.mSounds.splice(b.mSounds.indexOf(a),1);a._outputNode.disconnect(0)})};sa.prototype.detachSound=function(a){g.assert(null!=a,"Sound cannot be null");var b=this.mSounds.indexOf(a);-1<b&&(this.mSounds.splice(b,1),a._outputNode.disconnect(0))};sa.prototype.stopAll=function(){for(var a=this.mSounds[0];this.mSounds.length;a=this.mSounds.shift())a.stop()};
sa.prototype.addEffect=function(a){g.assert(null!=a,"Effect cannot be null");a._outputNode.connect(this._inputNode);this.mEffects.unshift(a);this.__reconnectSounds();return a};sa.prototype.removeEffect=function(a){g.assert(null!=a,"Effect cannot be null");a._outputNode.disconnect(0);this.mEffects.splice(this.mEffects.indexOf(a),1);this.__reconnectSounds();return a};sa.prototype.removeAllEffects=function(){for(;this.mEffects.length;this.mEffects.shift())this.mEffects[0]._outputNode.disconnect(0);this.__reconnectSounds()};
sa.prototype.__reconnectSounds=function(){var a=this;this.mSounds.forEach(function(b){b._outputNode.disconnect(0);b._outputNode.connect(a._inputNode)})};$jscomp.global.Object.defineProperties(sa.prototype,{volume:{configurable:!0,enumerable:!0,set:function(a){this.mGain.gain.setValueAtTime(a,0)},get:function(){return this.mGain.gain.value}},_inputNode:{configurable:!0,enumerable:!0,get:function(){return this.mEffects.length?this.mEffects[0]._inputNode:this.mGain}},_outputNode:{configurable:!0,enumerable:!0,
get:function(){return this.mGain}}});var Ea=function(a,b,c,d){c=void 0===c?NaN:c;this.mNativeBuffer=a;this.mStartOffset=void 0===b?0:b;this.mDuration=c||a.duration;this.mIsSubClip=void 0===d?!1:d};Ea.prototype.play=function(a,b,c,d){a=void 0===a?"master":a;b=void 0===b?1:b;c=void 0===c?!1:c;d=void 0===d?0:d;var e=new ea(this);e.channel=a;e.volume=b;e.loop=c;e.pan=d;return e._play()};Ea.prototype.collectWaveData=function(a){for(var b=[],c=0;c<this.mNativeBuffer.numberOfChannels;c++)b[c]=this.mNativeBuffer.getChannelData(c);
var d=this.mDuration/this.mNativeBuffer.duration,e=~~(this.mStartOffset/this.mNativeBuffer.duration*b[0].length);c=e+~~(b[0].length*d);var h=new Float32Array(a);a=~~(b[0].length*d/a);d=[];for(var f=0;e<c;e++)if(d.push(this.__averagePeak(b,e)),d.length>=a){var g=Math.max.apply(Math,$jscomp.arrayFromIterable(d));d=Math.min.apply(Math,$jscomp.arrayFromIterable(d));h[f++]=(g+d)/2;d=[]}return h};Ea.prototype.__averagePeak=function(a,b){var c=0;a.forEach(function(a){return c+=Math.abs(a[b])});return c/
a.length};$jscomp.global.Object.defineProperties(Ea.prototype,{native:{configurable:!0,enumerable:!0,get:function(){return this.mNativeBuffer}},offset:{configurable:!0,enumerable:!0,get:function(){return this.mStartOffset}},duration:{configurable:!0,enumerable:!0,get:function(){return this.mDuration}},isSubClip:{configurable:!0,enumerable:!0,get:function(){return this.mIsSubClip}}});var Ya=function(a,b){a=Ea.call(this,a)||this;a.mClips={};if(null!==b)for(var c in b.sounds)a.addSubSound(c,b.sounds[c][0],
b.sounds[c][1]);return a};$jscomp.inherits(Ya,Ea);Ya.prototype.addSubSound=function(a,b,c){c=void 0===c?NaN:c;this.mClips[a]=new Ea(this.native,void 0===b?0:b,c,!0);return this.mClips[a]};Ya.prototype.removeSubSound=function(a){delete this.mClips[a]};Ya.prototype.playSubSound=function(a,b,c,d,e){b=void 0===b?"master":b;c=void 0===c?1:c;d=void 0===d?!1:d;e=void 0===e?0:e;a=this.mClips[a];if(null==a)return null;a=new ea(a);a.channel=b;a.volume=c;a.loop=d;a.pan=e;return a._play()};$jscomp.global.Object.defineProperties(Ya.prototype,
{subSounds:{configurable:!0,enumerable:!0,get:function(){return this.mClips}}});var hb=function(){return N.call(this)||this};$jscomp.inherits(hb,N);hb.prototype.onRemoved=function(a){this.loose()};hb.prototype.listen=function(){l.audio.currentListener=this};hb.prototype.loose=function(){l.audio.looseListener()};hb.prototype.onRender=function(){if(l.audio.currentListener===this){var a=l.audio.context.listener,b=l.stage,c=this.gameObject.localToGlobal(b.globalToLocal(new k(this.gameObject.pivotX,this.gameObject.pivotY))),
d=(c.x-b.centerX)/b.width*2;b=(c.y-b.centerY)/b.height*2;null!=a.positionX?(a.positionX.setValueAtTime(d,0),a.positionY.setValueAtTime(b,0),a.positionZ.setValueAtTime(1,0)):a.setPosition(d,b,1)}};var fa=function(){var a=Z.call(this)||this;l.audio=a;a.mContext=null;a.mCurrentListener=null;a.mChannels={};a.mMasterChannel=null;a.__initialize();return a};$jscomp.inherits(fa,Z);fa.prototype.__initialize=function(){try{this.mContext=new (window.AudioContext||window.webkitAudioContext)}catch(a){if(null==
this.mContext){g.warn("no audio support");return}}this.__unlock();this.mMasterChannel=new sa("master");this.mMasterChannel._outputNode.connect(this.mContext.destination);this.mChannels.master=this.mMasterChannel};fa.prototype.dispose=function(){Z.prototype.dispose.call(this);null!==this.mContext&&(this.stopAll(),this.mContext.close());l.audio=null};fa.prototype.__unlock=function(){var a=this,b=function(){var c=a.mContext.createBuffer(1,1,22050),d=a.mContext.createBufferSource();d.buffer=c;d.connect(a.mContext.destination);
void 0===d.start?d.noteOn(0):d.start(0);"suspended"===d.context.state&&d.context.resume();document.removeEventListener("touchstart",b);document.removeEventListener("click",b)};document.addEventListener("touchstart",b);document.addEventListener("click",b)};fa.prototype.createChannel=function(a){if(null==this.mChannels[a]){var b=new sa(a);b._outputNode.connect(this.mMasterChannel._inputNode);this.mChannels[a]=b}return this.mChannels[a]};fa.prototype.getChannel=function(a){return this.mChannels[a]};
fa.prototype._resolveChannel=function(a){for(var b in this.mChannels)this.mChannels[b].detachSound(a);b=this.mChannels[""==a.channel?"master":a.channel];b.attachSound(a);return b};fa.prototype.play=function(a,b,c,d,e){b=void 0===b?"master":b;c=void 0===c?1:c;d=void 0===d?!1:d;e=void 0===e?0:e;g.assert(null!=a,"Param 'nameOrSound' cannot be null.");var h=null;a.constructor===String&&(h=l.assets.getSound(a));return h.play(b,c,d,e)};fa.prototype.stopAll=function(a){a=void 0===a?"":a;if(""===a)for(var b in this.mChannels)this.mChannels[b].stopAll();
else this.getChannel(a).stopAll()};fa.prototype.looseListener=function(){this.mContext.listener.setPosition(0,0,1);this.mCurrentListener=null};fa.prototype._newGainNode=function(){return void 0===this.mContext.createGain?this.mContext.createGainNode():this.mContext.createGain()};$jscomp.global.Object.defineProperties(fa.prototype,{masterVolume:{configurable:!0,enumerable:!0,set:function(a){this.mMasterChannel.volume=a},get:function(){return this.mMasterChannel.volume}},context:{configurable:!0,enumerable:!0,
get:function(){return this.mContext}},masterChannel:{configurable:!0,enumerable:!0,get:function(){return this.mMasterChannel}},currentListener:{configurable:!0,enumerable:!0,set:function(a){this.mCurrentListener=a},get:function(){return this.mCurrentListener}}});var yb=function(a,b){a=D.call(this,"sound",a)||this;if(!1===l.device.webAudioSupported)return a;if(!1===l.engine.hasSystem(fa))return g.warn("[SoundAsset] Loading sound files without MasterAudio system."),a;a.mUrl=b;a.mXHR=null;return a};
$jscomp.inherits(yb,D);yb.prototype.onLoaderRequested=function(a){this.mXHR=a.get("xhr",this.mUrl);this.mXHR.responseType="arraybuffer";this.addLoader(this.mXHR)};yb.prototype.onAllLoaded=function(){var a=this;l.audio.context.decodeAudioData(this.mXHR.data,function(b){D.prototype.ready.call(a,new Ea(b))})};var zb=function(a,b,c){a=D.call(this,"soundAtlas",a)||this;a.mSoundUrl=b;a.mDataUrl=c;if(!1===l.device.webAudioSupported)return a;if(!1===l.engine.hasSystem(fa))return g.warn("[SoundAsset] Loading sound files without MasterAudio system."),
a;a.mAudioXHR=null;a.mDataXHR=null;return a};$jscomp.inherits(zb,D);zb.prototype.onLoaderRequested=function(a){this.mAudioXHR=a.get("xhr",this.mSoundUrl);this.mAudioXHR.mimeType="arraybuffer";this.addLoader(this.mAudioXHR);this.mDataXHR=a.get("xhr",this.mSoundUrl);this.mDataXHR.mimeType="application/json";this.mDataXHR.responseType="json";this.addLoader(this.mDataXHR)};zb.prototype.onAllLoaded=function(){var a=this;l.audio.context.decodeAudioData(this.mAudioXHR.data,function(b){D.prototype.ready.call(a,
new Ya(b,a.mDataXHR.data))})};var x={LINE_STYLE:"lineStyle",FILL_STYLE:"fillStyle",ARC:"arc",RECT:"rect",ROUNDED_RECT:"roundedRect",BEZIER_CURVE_TO:"bezierCurveTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEGIN_PATH:"beginPath",CLOSE_PATH:"closePath",FILL:"fill",LINE_TO:"lineTo",MOVE_TO:"moveTo",STROKE:"stroke",BOUNDS:"bounds",LINE_DASH:"setLineDash",FILL_GRD:"gradientFillStyle",FILL_PATTERN:"patternFillStyle"},ib=function(a,b){this.type=a;this.data=b};ib.prototype.getNumber=function(a){return this.data[a]};
ib.prototype.getString=function(a){return this.data[a]};ib.prototype.getBoolean=function(a){return this.data[a]};ib.prototype.getObject=function(a){return this.data[a]};var Zb=function(){this.bounds=null;this.points=[];this.lastLineWidth=this.maxLineWidth=0;this.lineMul=.5},Fa={BEVEL:"bevel",MITER:"miter",ROUND:"round"},Kb=function(){this.stops={};this.native=null};Kb.prototype.addColorStop=function(a,b){this.stops[a]=b;this.native=null};var Ga=function(a,b,c,d){var e=Kb.call(this)||this;e.x0=a;e.y0=
b;e.x1=c;e.y1=d;e.isAbsolute=!1;return e};$jscomp.inherits(Ga,Kb);Ga.prototype.addColorStop=function(a,b){this.stops[a]=b;this.native=null};Ga.prototype.clone=function(){var a=new Ga(this.x0,this.y0,this.x1,this.y1);a.isAbsolute=this.isAbsolute;for(var b in this.stops)a.stops[b]=this.stops[b];return a};var Ua={NONE:"none",ROUND:"round",SQUARE:"square"},K=function(){this.mNodes=[];this.mTransform=new r;this.mCommandQueue=[];this.mPosY=this.mPosX=this.mPivotY=this.mPivotX=0;this.mName=null};K.prototype.onGetLocalBounds=
function(a,b){var c=new Zb,d=this.mCommandQueue.length;b=b.clone().append(this.mTransform);var e=b.data,h=Math.sqrt(e[0]*e[0]+e[1]*e[1]);e=Math.sqrt(e[2]*e[2]+e[3]*e[3]);for(var f=0;f<d;f++){var g=this.mCommandQueue[f];switch(g.type){case x.BEGIN_PATH:c.bounds&&(b.transformRect(c.bounds,c.bounds),a.mLocalBounds=a.mLocalBounds?a.mLocalBounds.union(c.bounds):c.bounds);c=new Zb;break;case x.BOUNDS:for(var l=0;l<g.data.length;l+=2)c.points.push(g.getNumber(l),g.getNumber(l+1));break;case x.LINE_STYLE:c.lastLineWidth=
g.getNumber(0);g.getString(4)===Fa.MITER&&(c.lineMul=1);break;case x.FILL:0!==c.points.length&&(g=t.fromPointsXY(c.points),c.bounds=c.bounds?c.bounds.union(g):g);break;case x.STROKE:c.lastLineWidth>c.maxLineWidth&&(c.maxLineWidth=c.lastLineWidth),0===c.maxLineWidth&&(c.maxLineWidth=1),c.maxLineWidth*=c.lineMul,0!==c.points.length&&(g=t.fromPointsXY(c.points),1<c.points.length&&g.inflate(c.maxLineWidth*h,c.maxLineWidth*e),c.bounds=c.bounds?c.bounds.union(g):g)}}c.bounds&&(b.transformRect(c.bounds,
c.bounds),a.mLocalBounds=a.mLocalBounds?a.mLocalBounds.union(c.bounds):c.bounds);c=0;for(d=this.mNodes.length;c<d;c++)this.mNodes[c].onGetLocalBounds(a,b);return a.mLocalBounds};K.prototype.lineStyle=function(a,b,c,d,e,h){a=void 0===a?0:a;b=void 0===b?0:b;c=void 0===c?1:c;d=void 0===d?Ua.NONE:d;e=void 0===e?Fa.MITER:e;h=void 0===h?3:h;g.isNumber(a,b,c,h);0>=a||this.__pushCommand(x.LINE_STYLE,a,b,c,d,e,h)};K.prototype.fillStyle=function(a,b){a=void 0===a?0:a;b=void 0===b?1:b;g.isNumber(a,b);this.__pushCommand(x.FILL_STYLE,
a,b)};K.prototype.fillGradient=function(a){a instanceof Ga&&this.__pushCommand(x.FILL_GRD,a)};K.prototype.fillPattern=function(a){this.__pushCommand(x.FILL_PATTERN,a)};K.prototype.clear=function(){this.mPosY=this.mPosX=0;this.mCommandQueue=[];this.mNodes=[];this.beginPath()};K.prototype.moveTo=function(a,b){this.mPosX=a;this.mPosY=b;this.__pushCommand(x.MOVE_TO,a,b)};K.prototype.lineTo=function(a,b){this.mPosX=a;this.mPosY=b;this.__pushCommand(x.LINE_TO,a,b);this.__pushCommand(x.BOUNDS,this.mPosX,
this.mPosY,a,b)};K.prototype.arc=function(a,b,c,d,e,h){h=void 0===h?!1:h;var f=!1,g=0,l=0,k=[];if(d!==e){if(Math.abs(d-e)>=m.PI2)k.push(a-c,b-c,a+c,b+c),l=W.getCircumferencePoint(a,b,c,e+.5*Math.PI),f=!0,e=d+m.PI2,g=l.x,l=l.y;else{var qa=d%m.PI2+(0>d?m.PI2:0),p=e;h&&(p=qa,qa=e);for(;p<qa;)p+=m.PI2;var w=0===qa||p>=m.PI2,v=qa<=Math.PI&&p>=Math.PI||p>=3*Math.PI,t=qa<=.5*Math.PI&&p>=.5*Math.PI||p>=2.5*Math.PI,q=qa<=1.5*Math.PI&&p>=1.5*Math.PI||p>=3.5*Math.PI;if(!v||!w){var r=Math.cos(qa)*c;var u=Math.cos(p)*
c}if(!q||!t){var z=Math.sin(qa)*c;var y=Math.sin(p)*c}k.push((v?-c:Math.min(r,u))+a,(q?-c:Math.min(z,y))+b,(w?c:Math.max(r,u))+a,(t?c:Math.max(z,y))+b)}this.__pushCommand(x.ARC,a,b,c,d,e,h);this.__pushCommand.apply(this,[x.BOUNDS].concat($jscomp.arrayFromIterable(k)));!0===f&&this.__pushCommand(x.MOVE_TO,g,l)}};K.prototype.circle=function(a,b,c){this.__pushCommand(x.ARC,a,b,c,0,m.PI2);this.__pushCommand(x.BOUNDS,a-c,b-c,a+c,b+c)};K.prototype.rect=function(a,b,c,d){g.isNumber(a,b,c,d);this.__pushCommand(x.RECT,
a,b,c,d);this.__pushCommand(x.BOUNDS,a,b,a+c,b+d)};K.prototype.roundedRect=function(a,b,c,d,e){g.isNumber(a,b,c,d,e);this.__pushCommand(x.ROUNDED_RECT,a,b,c,d,e);this.__pushCommand(x.BOUNDS,a,b,a+c,b+d)};K.prototype.bezierCurveTo=function(a,b,c,d,e,h){var f=this.__bezierRange(this.mPosX,a,c,e,k.pool.get()),g=this.__bezierRange(this.mPosY,b,d,h,k.pool.get());this.mPosX=e;this.mPosY=h;this.__pushCommand(x.BEZIER_CURVE_TO,a,b,c,d,e,h);this.__pushCommand(x.BOUNDS,f.x,g.x,f.y,g.y);k.pool.release(f);k.pool.release(g)};
K.prototype.quadraticCurveTo=function(a,b,c,d){var e=this.__quadraticRange(this.mPosX,a,c,k.pool.get()),h=this.__quadraticRange(this.mPosY,b,d,k.pool.get());this.mPosX=c;this.mPosY=d;this.__pushCommand(x.QUADRATIC_CURVE_TO,a,b,c,d);this.__pushCommand(x.BOUNDS,e.x,h.x,e.y,h.y);k.pool.release(e);k.pool.release(h)};K.prototype.__bezierRange=function(a,b,c,d,e){e=e||new k;var h=c-2*b+a-(d-2*c+b),f=2*(b-a)-2*(c-b),g=f*f-4*h*(a-b),l=Math.min(a,d),B=Math.max(a,d);if(0<=g){g=Math.sqrt(g);var m=1/(2*h);h=
(-f+g)*m;f=(-f-g)*m;h=isFinite(h)?h:.5;f=isFinite(f)?f:.5;0<h&&1>h&&(g=this.__bezierDot(a,b,c,d,h),l=Math.min(g,l),B=Math.max(g,B));0<f&&1>f&&(a=this.__bezierDot(a,b,c,d,f),l=Math.min(a,l),B=Math.max(a,B))}e.x=l;e.y=B;return e};K.prototype.__bezierDot=function(a,b,c,d,e){var h=1-e;return a*h*h*h+3*b*e*h*h+3*c*e*e*h+d*e*e*e};K.prototype.__quadraticRange=function(a,b,c,d){var e=c-a;b-=a;var h=b/e;e=a+(0>h||1<h?b*b/(2*b-e):0);d.x=Math.min(a,c,e);d.y=Math.max(a,c,e);return d};K.prototype.beginPath=function(){this.__pushCommand(x.BEGIN_PATH)};
K.prototype.closePath=function(){this.__pushCommand(x.CLOSE_PATH)};K.prototype.setLineDash=function(a){this.__pushCommand(x.LINE_DASH,a)};K.prototype.stroke=function(){this.__pushCommand(x.STROKE)};K.prototype.fill=function(a){this.__pushCommand(x.FILL,a)};K.prototype.__pushCommand=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];c=new ib(a,c);this.mCommandQueue.push(c)};K.prototype.searchNode=function(a,b){b=void 0===b?this:b;if(b.name===a)return b;for(var c=0,d=b.mNodes.length;c<
d;c++){var e=this.searchNode(a,b.mNodes[c]);if(e)return e}};$jscomp.global.Object.defineProperties(K.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return this.mName},set:function(a){this.mName=a}}});var Lb=function(){this.data=null};Lb.prototype.parse=function(a){this.data=a;return null};var Ab=function(a,b){this.image=a;this.repetition=b;this.native=null};Ab.prototype.clone=function(){return new Ab(this.image,this.repetition)};var Bb={NONE_ZERO:"nonzero",EVEN_ODD:"evenodd"},Za=function(){this.L=
"-";this.w=this.l=1;this.F="0";this.r=this.f=1;this.c="b";this.j="m";this.m=4;this.a=1;this.d="";this.needsFill=!0;this.needsStroke=!1;this.fillColor=0;this.fillAlpha=1;this.lineColor=0;this.lineWidth=this.lineAlpha=1;this.lineCap=Ua.NONE;this.lineJoin=Fa.MITER;this.miterLimit=this.m;this.fillRule=Bb.NONE_ZERO;this.lineDash=[]};Za.prototype.merge=function(a){a.F&&(this.F=a.F);a.L&&(this.L=a.L);a.w&&(this.w=a.w);a.l&&(this.l*=a.l);a.f&&(this.f*=a.f);a.r&&(this.r=a.r);a.c&&(this.c=a.c);a.j&&(this.j=
a.j);a.m&&(this.m=a.m);a.a&&(this.a=a.a);a.d&&(this.d=a.d)};Za.prototype.compute=function(){if(this.needsFill="-"!==this.F)this.fillColor=parseInt(this.F,16);this.lineWidth=+this.w;if(this.needsStroke="-"!==this.L&&0<this.lineWidth)this.lineColor=parseInt(this.L,16);var a=Number(this.a);this.lineAlpha=Number(this.l)*a;this.fillAlpha=Number(this.f)*a;this.lineCap={b:Ua.NONE,r:Ua.ROUND,s:Ua.SQUARE}[this.c];this.lineJoin={m:Fa.MITER,r:Fa.ROUND,b:Fa.BEVEL}[this.j];this.miterLimit=Number(this.m);this.fillRule=
{1:Bb.NONE_ZERO,0:Bb.EVEN_ODD}[this.r];this.lineDash=this.d.split(",").map(function(a){return Number(a)})};Za.prototype.clone=function(){var a=new Za;a.L=this.L;a.l=this.l;a.w=this.w;a.F=this.F;a.f=this.f;a.r=this.r;a.c=this.c;a.j=this.j;a.m=this.m;a.a=this.a;return a};var X=function(){var a=q.call(this)||this;a.mAlpha=1;a.mBlendMode=Ca.AUTO;a.mVisible=!0;a.mClipRect=null;a.mRenderer=a.getRenderer();a.mCacheAsBitmap=!1;a.mCacheAsBitmapDynamic=!0;a.mCacheAsBitmapDirty=!0;a.mCacheAsBitmapMatrixCache=
null;a.mCache=null;a.mCacheBounds=null;a.mColor=null;a.mSnapToPixels=!1;return a};$jscomp.inherits(X,q);X.prototype.onRender=function(){};X.prototype.getRenderer=function(){return l.driver.getRenderer("DisplayObject",this)};X.prototype.onGetLocalBounds=function(a){a=a||new t;return null!==this.mClipRect?(this.mClipRect.copyTo(a),a):a.set(0,0,0,0)};X.prototype.getBounds=function(a,b,c){b=void 0===b?!0:b;c=c||new t;var d=this.onGetLocalBounds();null==a&&(a=this.mParent);if(a!=this)if(a==this.mParent)if(!1===
b||null!==this.mClipRect){var e=r.pool.get();e.copyFrom(this.localTransformation);e.transformRect(d,c);r.pool.release(e)}else if(!0===b&&this.mDirty&64)e=r.pool.get(),e.copyFrom(this.localTransformation),e.transformRect(d,c),r.pool.release(e);else return c.copyFrom(this.mBoundsCache),c;else e=r.pool.get(),e.copyFrom(this.worldTransformation),e.prepend(a.worldTransformationInverted),e.transformRect(d,c),r.pool.release(e);a!==this?null!==this.mClipRect&&(c.x+=this.mPivotX,c.y+=this.mPivotY):d.copyTo(c);
if(null!==this.mClipRect)return c;if(!0===b){d=t.pool.get();for(e=0;e<this.mChildren.length;e++)d.zero(),this.mChildren[e].getBounds(a,b,d),c.union(d);t.pool.release(d);a==this.mParent&&this.mDirty&64&&(this.mBoundsCache.copyFrom(c),this.mDirty^=64)}return c};X.prototype.hitTest=function(a){var b=this.getComponent(Da);b=null!==b&&b.touchable;var c=this.onHitTestMask(a);if(!1===this.visible||!1===b||!1===c)return null;for(c=this.mChildren.length-1;0<=c;--c)if(b=this.mChildren[c].hitTest(a),null!==
b)return b;return!0===this.onHitTest(a)?this:null};X.prototype.onHitTestMask=function(a){if(null===this.mClipRect)return!0;var b=k.pool.get();this.worldTransformationInverted.transformVector(a,b);a=this.mClipRect.containsXY(b.x-this.mPivotX,b.y-this.mPivotY);k.pool.release(b);return a};$jscomp.global.Object.defineProperties(X.prototype,{color:{configurable:!0,enumerable:!0,get:function(){return this.mColor},set:function(a){this.mColor!==a&&(this.mColor=a,this.setRenderDirty())}},cacheAsBitmap:{configurable:!0,
enumerable:!0,get:function(){return this.mCacheAsBitmap},set:function(a){a!==this.mCacheAsBitmap&&(this.mCacheAsBitmap=a,!1===a&&(this.mCache=null,this.mCacheAsBitmapDirty=!0,this.mCacheBounds=this.mCacheAsBitmapMatrixCache=null,this.setTransformDirty()))}},cacheAsBitmapDynamic:{configurable:!0,enumerable:!0,get:function(){return this.mCacheAsBitmapDynamic},set:function(a){this.mCacheAsBitmapDynamic=a}},alpha:{configurable:!0,enumerable:!0,get:function(){return this.mAlpha},set:function(a){g.assert(!isNaN(a),
"Value cannot be NaN");this.mAlpha!==m.clamp(a,0,1)&&(this.mAlpha=m.clamp(a,0,1),this.setRenderDirty())}},visible:{configurable:!0,enumerable:!0,get:function(){return this.mVisible},set:function(a){this.mVisible!==a&&(this.mVisible=a,this.setRenderDirty())}},blendMode:{configurable:!0,enumerable:!0,get:function(){return this.mBlendMode},set:function(a){this.mBlendMode!==a&&(this.mBlendMode=a,this.setRenderDirty())}},clipRect:{configurable:!0,enumerable:!0,get:function(){return this.mClipRect},set:function(a){this.mClipRect=
a;this.setRenderDirty()}},snapToPixels:{configurable:!0,enumerable:!0,get:function(){return this.mSnapToPixels},set:function(a){this.mSnapToPixels=a}}});var R=function(a,b){a=void 0===a?null:a;b=void 0===b?!1:b;var c=X.call(this)||this;c.mBounds=new t;c.mLocalBounds=null;c.mGraphicsData=null;c.mDataOffsetX=0;c.mDataOffsetY=0;c.mTrim=b;c.mGraphicsData=null===a?new K:"string"===typeof a?l.assets.getGraphicsData(a):a;b&&(c.mGraphicsData.onGetLocalBounds(c,new r),c.mLocalBounds&&(c.mDataOffsetX=c.mLocalBounds.x,
c.mDataOffsetY=c.mLocalBounds.y,c.mLocalBounds=null));return c};$jscomp.inherits(R,X);R.prototype.getRenderer=function(){return l.driver.getRenderer("Graphics",this)};R.prototype.onGetLocalBounds=function(a){a=a||new t;if(null!==this.mClipRect)return this.mClipRect.copyTo(a),a;this.mGraphicsData.onGetLocalBounds(this,new r);this.mLocalBounds&&a.copyFrom(this.mLocalBounds);this.mLocalBounds=null;this.mTrim||(a.width+=Math.max(0,a.x),a.height+=Math.max(0,a.y),a.x=Math.min(0,a.x),a.y=Math.min(0,a.y));
return a};R.prototype.lineStyle=function(a,b,c,d,e,h){d=void 0===d?Ua.NONE:d;e=void 0===e?Fa.MITER:e;this.mGraphicsData.lineStyle(void 0===a?0:a,void 0===b?0:b,void 0===c?1:c,d,e,void 0===h?3:h)};R.prototype.fillStyle=function(a,b){this.mGraphicsData.fillStyle(void 0===a?0:a,void 0===b?1:b)};R.prototype.fillGradient=function(a){this.mGraphicsData.fillGradient(a)};R.prototype.fillPattern=function(a){this.mGraphicsData.fillPattern(a)};R.prototype.clear=function(){this.mBounds.zero();this.mGraphicsData.clear();
this.setTransformDirty()};R.prototype.moveTo=function(a,b){this.mGraphicsData.moveTo(a,b)};R.prototype.lineTo=function(a,b){this.mGraphicsData.lineTo(a,b)};R.prototype.arc=function(a,b,c,d,e,h){this.mGraphicsData.arc(a,b,c,d,e,void 0===h?!1:h)};R.prototype.circle=function(a,b,c){this.mGraphicsData.circle(a,b,c)};R.prototype.rect=function(a,b,c,d){this.mGraphicsData.rect(a,b,c,d)};R.prototype.roundedRect=function(a,b,c,d,e){this.mGraphicsData.roundedRect(a,b,c,d,e)};R.prototype.bezierCurveTo=function(a,
b,c,d,e,h){this.mGraphicsData.bezierCurveTo(a,b,c,d,e,h)};R.prototype.quadraticCurveTo=function(a,b,c,d){this.mGraphicsData.quadraticCurveTo(a,b,c,d)};R.prototype.beginPath=function(){this.mGraphicsData.beginPath()};R.prototype.closePath=function(){this.mGraphicsData.closePath()};R.prototype.setLineDash=function(a){this.mGraphicsData.setLineDash(a)};R.prototype.stroke=function(){this.mGraphicsData.stroke();this.setTransformDirty()};R.prototype.fill=function(a){this.mGraphicsData.fill(void 0===a?!0:
a);this.setTransformDirty()};R.prototype.createLinearGradient=function(a,b,c,d){return new Ga(a,b,c,d)};var ia=function(){this.data=null;this._defs={};return this};$jscomp.inherits(ia,Lb);ia.prototype.parse=function(a){Lb.prototype.parse.call(this,a);var b=this.__parseStyles(a.styles);this._defs={};this.__parseDefs(a.defs,this._defs);return this.__traverse(a,b,new K,new Za)};ia.prototype.__traverse=function(a,b,c,d){var e=this,h=this._defs,f=new K,g=d.clone();c.mNodes.push(f);a.id&&(f.name=a.id);
if(c=a.t){var l=c[0]||0,k=c[1]||0,m=c[2]||1,p=c[3]||1,w=c[5]||0,v=c[6]||0;f.mTransform.rotate(c[4]||0);f.mTransform.scale(m,p);f.mTransform.skew(c[7]||0,c[8]||0);f.mTransform.data[4]=l+w/m;f.mTransform.data[5]=k+v/p;f.mPivotX=w;f.mPivotY=v}if(a.cmds)for(c=a.cmds.split("$").filter(function(a){return a}).reverse(),l=new t,k="";0<c.length;){w=c.pop();m=w[0];p=w.slice(1).split(",").map(function(a){return Number(a)});f.beginPath();"S"!==k&&"S"!==m&&(f.fillStyle(0,1),f.lineStyle(1,0,1,Ua.NONE,Fa.MITER,
4));k=m;switch(m){case "S":p=b[p[0]];g=d.clone();g.merge(p);g.compute();break;case "p":this.__drawPath(w,f);break;case "r":w=p[0];v=p[1];var q=p[2],r=p[3],u=(void 0===p[4]?p[5]:p[4])||0,x=(void 0===p[5]?p[4]:p[5])||0;l.set(w,v,q,r);0!==u&&0!==x?(f.moveTo(w,v+x),f.quadraticCurveTo(w,v,w+u,v),f.lineTo(w+q-u,v),f.quadraticCurveTo(w+q,v,w+q,v+x),f.lineTo(w+q,v+r-x),f.quadraticCurveTo(w+q,v+r,w+q-u,v+r),f.lineTo(w+u,v+r),f.quadraticCurveTo(w,v+r,w,v+r-x),f.closePath()):f.rect(p[0],p[1],p[2],p[3]);break;
case "c":w=2*p[2];l.set(0,0,w,w);f.circle(p[0],p[1],p[2]);break;case "e":w=p[0];v=p[1];q=p[2];r=p[3];p=this.__arcToBezier(w-q,v,q,r,0,0,0,w+q,v);r=this.__arcToBezier(w+q,v,q,r,0,0,0,w-q,v);p=[].concat($jscomp.arrayFromIterable(p),$jscomp.arrayFromIterable(r));f.moveTo(w-q,v);w=0;for(v=p.length;w<v;w++)q=p[w],f.bezierCurveTo(q[2],q[3],q[4],q[5],q[6],q[7]);break;case "l":w=p[2];v=p[3];f.moveTo(p[0],p[1]);f.lineTo(w,v);break;case "s":case "g":p=w.slice(1).split(",").map(function(a){return Number(a)});
f.moveTo(p[0],p[1]);w=2;for(v=p.length;w<v;w+=2)f.lineTo(p[w],p[w+1]);"g"===m&&f.closePath()}if(g.needsFill&&"S"!==m){if(this.__isRef(g.F))if(m=h[g.F.slice(1)].clone(),m instanceof Ab)f.fillPattern(m);else{if(m instanceof Ga){m.isAbsolute||(m.x0*=l.width,m.x1*=l.width,m.y0*=l.height,m.y1*=l.height);for(var z in m.stops)m.stops[z]=U.intToRGBA(parseInt(m.stops[z].slice(1),16),g.fillAlpha);f.fillGradient(m)}}else f.fillStyle(g.fillColor,g.fillAlpha);f.fill(g.fillRule===Bb.NONE_ZERO)}g.needsStroke&&(f.lineStyle(g.lineWidth,
g.lineColor,g.lineAlpha,g.lineCap,g.lineJoin,g.miterLimit),f.setLineDash(g.lineDash),f.stroke())}a.nodes&&a.nodes.forEach(function(a){e.__traverse(a,b,f,g)});return f};ia.prototype.__isRef=function(a){return 0===a.indexOf("$")};ia.prototype.__parseDefs=function(a,b){if(!a)return b;for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];if("string"===typeof d)switch(d.charAt(0)){case "R":d=d.slice(1).split(" ");var e=d[0].split(",").map(function(a){return parseFloat(a)}),h=new Ga(e[0],e[1],e[2],e[3]);h.isAbsolute=
0===e[4];b[c]=h;e=1;for(var f=d.length;e<f;e++){var g=d[e].split(","),k="#"+g[1];h.addColorStop(parseFloat(g[0]),k)}}else h=this.__parseStyles(d.s),h=this.__traverse(d,h,new K,new Za),h=new R(h),e=new Sa(h.width,h.height,l.driver.renderScaleFactor),l.driver.render(h,e,new r),b[c]=new Ab(e.native,d.r)}return b};ia.prototype.__parseStyles=function(a){return a?a.map(function(a){var b={};a.split(" ").forEach(function(a){b[a[0]]=a.slice(1)});return b}):[]};ia.prototype.__drawPath=function(a,b){var c=[];
a.split(",").map(function(a){for(;0!==a.length;){var b=parseFloat(a);if(isNaN(b))c.push(a.charAt(0)),a=a.slice(1);else{c.push(b);for(var d=1;;d++)if(parseFloat(a.slice(0,d))===b){a=a.slice(d);break}}}});c.reverse();for(var d=a=0,e=0,h=0,f=0,g=0,l=0,k=0,m="",p=0,w=0;0!==c.length;){var v=c[c.length-1];m=v=v===v.toString()?c.pop():m;p=w=0;v===v.toLowerCase()&&(p=a,w=d);switch(v){case "M":case "m":a=c.pop()+p;d=c.pop()+w;b.moveTo(a,d);e=a;h=d;break;case "L":case "l":a=c.pop()+p;d=c.pop()+w;b.lineTo(a,
d);break;case "V":case "v":d=c.pop()+w;b.lineTo(a,d);break;case "H":case "h":a=c.pop()+p;b.lineTo(a,d);break;case "C":case "c":f=c.pop()+p;var q=c.pop()+w,r=c.pop()+p;g=c.pop()+w;a=c.pop()+p;d=c.pop()+w;b.bezierCurveTo(f,q,r,g,a,d);f=2*a-r;g=2*d-g;break;case "S":case "s":q=c.pop()+p;r=c.pop()+w;a=c.pop()+p;d=c.pop()+w;b.bezierCurveTo(f,g,q,r,a,d);f=2*a-q;g=2*d-r;break;case "Q":case "q":l=c.pop()+p;k=c.pop()+w;a=c.pop()+p;d=c.pop()+w;b.quadraticCurveTo(l,k,a,d);l=2*a-l;k=2*d-k;break;case "T":case "t":a=
c.pop()+p;d=c.pop()+w;b.quadraticCurveTo(l,k,a,d);l=2*a-l;k=2*d-k;break;case "A":case "a":q=a;r=d;var t=c.pop(),u=c.pop(),x=c.pop(),z=c.pop(),y=c.pop();a=c.pop()+p;d=c.pop()+w;p=this.__arcToBezier(q,r,t,u,x,z,y,a,d);if(!p)break;w=0;for(q=p.length;w<q;w++)r=p[w],b.bezierCurveTo(r[2],r[3],r[4],r[5],r[6],r[7]);break;case "Z":b.closePath(),a=e,d=h}"C"!==v&&"c"!==v&&"S"!==v&&"s"!==v&&(f=a,g=d);"Q"!==v&&"q"!==v&&"T"!==v&&"t"!==v&&(l=a,k=d)}};ia.prototype.__approxUnitArc=function(a,b){var c=4/3*Math.tan(b/
4),d=Math.cos(a),e=Math.sin(a),h=Math.cos(a+b);a=Math.sin(a+b);return[d,e,d-e*c,e+d*c,h+a*c,a-h*c,h,a]};ia.prototype.__vectorAngle=function(a,b,c,d){var e=0>a*d-b*c?-1:1;a=m.clamp(a*c+b*d,-1,1);return e*Math.acos(a)};ia.prototype.__getArcCenter=function(a,b,c,d,e,h,f,g,l,k){var n=k*(a-c)/2+l*(b-d)/2,p=-l*(a-c)/2+k*(b-d)/2,A=f*f,m=g*g,B=n*n,cb=p*p,q=Math.max(0,A*m-A*cb-m*B);q=Math.sqrt(q/(A*cb+m*B))*(e===h?-1:1);e=q*f/g*p;q=q*-g/f*n;a=k*e-l*q+(a+c)/2;b=l*e+k*q+(b+d)/2;d=(n-e)/f;l=(p-q)/g;f=(-n-e)/
f;p=(-p-q)/g;g=this.__vectorAngle(1,0,d,l);p=this.__vectorAngle(d,l,f,p);0===h&&0<p&&(p-=2*Math.PI);1===h&&0>p&&(p+=2*Math.PI);return[a,b,g,p]};ia.prototype.__arcToBezier=function(a,b,c,d,e,h,f,g,l){var n=Math.sin(e*Math.PI/180),A=Math.cos(e*Math.PI/180);e=A*(a-g)/2+n*(b-l)/2;var p=-n*(a-g)/2+A*(b-l)/2;if((0!==e||0!==p)&&0!==c&&0!==d){c=Math.abs(c);d=Math.abs(d);e=e*e/(c*c)+p*p/(d*d);1<e&&(e=Math.sqrt(e),c*=e,d*=e);var k=this.__getArcCenter(a,b,g,l,h,f,c,d,n,A);a=[];b=k[2];h=k[3];f=Math.max(Math.ceil(Math.abs(h)/
(.5*Math.PI)),1);h/=f;for(g=0;g<f;g++)a.push(this.__approxUnitArc(b,h)),b+=h;return a.map(function(a){for(var b=0;b<a.length;b+=2){var e=a[b]*c,h=a[b+1]*d,f=n*e+A*h;a[b]=A*e-n*h+k[0];a[b+1]=f+k[1]}return a})}};var Cb=function(a,b){a=D.call(this,"vectorGraphics",a)||this;a.mUrl=b;a.mGraphicsData=null;a.mXHR=null;return a};$jscomp.inherits(Cb,D);Cb.prototype.onLoaderRequested=function(a){this.mXHR=a.get("xhr",this.mUrl);this.mXHR.mimeType="application/json";this.addLoader(this.mXHR)};Cb.prototype.onAllLoaded=
function(){var a=JSON.parse(this.mXHR.data);this.mGraphicsData=(new ia).parse(a);this.mGraphicsData.name=this.name;D.prototype.ready.call(this,this.mGraphicsData)};var jb=function(a,b,c,d,e){a=D.call(this,"vectorTexture",a)||this;a.mUrl=b;a.mBakeSelf=c;a.mBakeChildren=d;a.mNamesToBake=d&&e?e:[];a.mGraphicsData=null;a.mXHR=null;return a};$jscomp.inherits(jb,D);jb.prototype.onLoaderRequested=function(a){this.mXHR=a.get("xhr",this.mUrl);this.mXHR.mimeType="application/json";this.addLoader(this.mXHR)};
jb.prototype.onAllLoaded=function(){var a=JSON.parse(this.mXHR.data);this.mGraphicsData=(new ia).parse(a);this.mGraphicsData.name=this.name;a=this.bakeTextures();var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push({name:c,data:a[c]});D.prototype.ready.call(this,b)};jb.prototype.bakeTextures=function(){var a={},b=this.mNamesToBake;if(this.mBakeChildren&&0===b.length){var c=function(a){if(0!==a.length)for(var d=0,e=a.length;d<e;d++)a[d].name&&b.push(a[d].name),c(a[d].mNodes)};c(this.mGraphicsData.mNodes)}this.mBakeSelf&&
b.unshift(this.mGraphicsData.name);for(var d=0,e=b.length;d<e;d++){var h=b[d],f=this.mGraphicsData.searchNode(h);if(f){f=new R(f,h!==this.mGraphicsData.name);var A=1/l.driver.renderScaleFactor,k=new Sa(f.width,f.height,1);l.driver.render(f,k,(new r).scale(A,A));a[h]=k}else g.warn("[BVGAsset] GraphicsData node with id '"+h+"' not found.")}return a};var $a={NONE:"none",LOADING:"loading",FINISHED:"finished"},Hc=function(a){this.mAssetManager=a};Hc.prototype.get=function(a,b,c){for(var d=[],e=2;e<arguments.length;++e)d[e-
2]=arguments[e];e=this.mAssetManager;var h=e.mLoadersQueue.find(function(a){return a.url===b});return void 0!=h?h:new (Function.prototype.bind.apply(e.mLoaderTypeMap[a],[null,b].concat($jscomp.arrayFromIterable(d))))};var H=function(){var a=C.call(this)||this;null===l.assets&&(l.assets=a);a.mDefaultPath="";a.mTotalLoaded=0;a.mTotalPending=0;a.mTotalErrors=0;a.mIsAllLoaded=!1;a.mLoadingProgress=0;a.mQueue=[];a.mLoadersQueue=[];a.mState=$a.NONE;a.mLoaderFactory=new Hc(a);a.mAssets={};a.mAssetTypeMap=
{};a.mLoaderTypeMap={};a.registerDefaultTypes();return a};$jscomp.inherits(H,C);H.prototype.registerDefaultTypes=function(){this.mAssetTypeMap.texture=tb;this.mAssetTypeMap.textureAtlas=xb;this.mAssetTypeMap.vectorGraphics=Cb;this.mAssetTypeMap.vectorTexture=jb;this.mAssetTypeMap.font=wb;this.mAssetTypeMap.bitmapFont=Xa;this.mAssetTypeMap.xml=vb;this.mAssetTypeMap.json=ub;this.mAssetTypeMap.sound=yb;this.mAssetTypeMap.soundAtlas=zb;this.mLoaderTypeMap.fontFace=Ta;this.mLoaderTypeMap.image=rb;this.mLoaderTypeMap.xhr=
sb};H.prototype.setAssetType=function(a,b){this.mAssetTypeMap[a]=b};H.prototype.setLoaderType=function(a,b){this.mLoaderTypeMap[a]=b};H.prototype.enqueueAsset=function(a,b){this.__validateState();this.__validateName(b.type,a);this.mQueue.push(b)};H.prototype.__getAsset=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];return new (Function.prototype.bind.apply(this.mAssetTypeMap[a],[null].concat($jscomp.arrayFromIterable(c))))};H.prototype.addTexture=function(a,b){this.mTextures[a]=
b};H.prototype.enqueueImage=function(a,b){this.enqueueAsset(a,this.__getAsset("texture",a,this.mDefaultPath+b))};H.prototype.enqueueAtlas=function(a,b,c){this.enqueueAsset(a,this.__getAsset("textureAtlas",a,this.mDefaultPath+b,this.mDefaultPath+c))};H.prototype.enqueueBitmapFont=function(a,b,c){this.enqueueAsset(a,this.__getAsset("bitmapFont",a,this.mDefaultPath+b,this.mDefaultPath+c))};H.prototype.enqueueXML=function(a,b){this.enqueueAsset(a,this.__getAsset("xml",a,this.mDefaultPath+b))};H.prototype.enqueueJSON=
function(a,b){this.enqueueAsset(a,this.__getAsset("json",a,this.mDefaultPath+b))};H.prototype.enqueueVector=function(a,b){this.enqueueAsset(a,this.__getAsset("vectorGraphics",a,this.mDefaultPath+b))};H.prototype.enqueueVectorTexture=function(a,b,c,d,e){c=void 0===c?!1:c;d=void 0===d?!1:d;!0!==c&&!0!==d||this.enqueueAsset(a,this.__getAsset("vectorTexture",a,this.mDefaultPath+b,c,d,void 0===e?null:e))};H.prototype.enqueueSound=function(a,b){this.enqueueAsset(a,this.__getAsset("sound",a,this.mDefaultPath+
b))};H.prototype.enqueueSoundAtlas=function(a,b,c){this.enqueueAsset(a,this.__getAsset("soundAtlas",a,this.mDefaultPath+b,this.mDefaultPath+c))};H.prototype.enqueueFont=function(a,b){this.enqueueAsset(a,this.__getAsset("font",a,this.mDefaultPath+b,!0))};H.prototype.enqueueGoogleFont=function(a){this.enqueueAsset(a,this.__getAsset("font",a,"",!1))};H.prototype.loadQueue=function(){this.__validateState();this.mState=$a.LOADING;for(var a=0;a<this.mQueue.length;a++){var b=this.mQueue[a];b.onLoaderRequested(this.mLoaderFactory);
0<b.loaders.length&&(b.once(E.COMPLETE,this.onAssetLoaded,this),b.once(E.ERROR,this.onAssetError,this),this.mLoadersQueue.push.apply(this.mLoadersQueue,$jscomp.arrayFromIterable(b.loaders)),this.mTotalPending++)}for(a=0;a<this.mLoadersQueue.length;a++)this.mLoadersQueue[a].load()};H.prototype.onAssetLoaded=function(a){var b=this;this.mTotalLoaded++;this.mLoadingProgress=this.mTotalLoaded/this.mTotalPending;var c=a.sender;c.off(E.COMPLETE,E.ERROR);null==this.mAssets[c.type]&&(this.mAssets[c.type]=
{});if(Array.isArray(c.data)){a=c.data;a.forEach(function(a){b.__validateName(a.name);b.mAssets[c.type][a.name].push(a.data)});for(var d in a)this.__validateName(d),this.mAssets[c.type][d].push(a[d])}else this.mAssets[c.type][c.name]=c.data;this.post(E.PROGRESS,this.mLoadingProgress);this.mTotalLoaded===this.mTotalPending&&(this.mQueue.splice(0,this.mQueue.length),this.mLoadersQueue.splice(0,this.mLoadersQueue.length),this.mState=$a.FINISHED,this.mTotalPending=this.mTotalErrors=this.mTotalLoaded=
0,this.mIsAllLoaded=!0,this.post(E.COMPLETE))};H.prototype.onAssetError=function(a){this.mTotalErrors++;var b=this.mTotalLoaded+this.mTotalErrors;this.mLoadingProgress=this.mTotalLoaded/this.mTotalPending;a=a.sender;a.off(E.COMPLETE,E.ERROR);g.warn("[AssetManager] Error loading asset '"+a.name+"'.");this.post(E.ERROR,a);b===this.mTotalPending&&(this.mQueue.splice(0,this.mQueue.length),this.mLoadersQueue.splice(0,this.mLoadersQueue.length),this.mState=$a.FINISHED,this.mTotalPending=this.mTotalErrors=
this.mTotalLoaded=0,this.mIsAllLoaded=!0,this.post(E.COMPLETE))};H.prototype.getBitmapFont=function(a){var b=this.mBitmapFonts[a];if(null!=b)return b;g.warn("[AssetManager] BitmapFontData '"+a+"' was not found.");return null};H.prototype.getTexture=function(a){var b=this.mAssets.texture;if(null!=b&&(b=b[a],null!=b))return b;b=this.mAssets.textureAtlas;if(null!=b)for(var c in b){var d=b[c].subTextures[a];if(null!=d)return d}c=this.mAssets.vectorTexture;if(null!=c&&(c=c[a],null!=c))return c;c=this.mAssets.vectorTextureAtlas;
if(null!=c)for(var e in c)if(b=c[e].subTextures[a],null!=b)return b;g.warn("[AssetManager] Texture '"+a+"' was not found.");return null};H.prototype.getGraphicsData=function(a){var b=this.mAssets.vectorGraphics;if(null==b)return null;var c=b[a];if(c)return c;for(var d in b)if(c=b[d].searchNode(a))return c;g.warn("[AssetManager] GraphicsData '"+a+"' was not found.");return null};H.prototype.getTextures=function(a){var b=this.mAssets.texture,c=this.mAssets.textureAtlas,d=this.mAssets.vectorTexture,
e=this.mAssets.vectorTextureAtlas,h=[],f=[];a=new RegExp("^"+a.split("*").join(".*")+"$");if(null!=b)for(var g in b)a.test(g)&&f.push({name:g,atlas:null,isBakedVector:!1});if(null!=d)for(var l in d)a.test(l)&&f.push({name:l,atlas:null,isBakedVector:!0});if(null!=c)for(var k in c){g=c[k];for(var m in g.subTextures)a.test(m)&&f.push({name:m,atlas:g,isBakedVector:!1})}if(null!=e)for(var p in e){c=e[p];for(var q in c.subTextures)a.test(q)&&f.push({name:q,atlas:c,isBakedVector:!0})}ma.naturalSort(f,"name");
for(e=0;e<f.length;e++)p=f[e],null===p.atlas?!0===p.isBakedVector?h.push(d[p.name]):h.push(b[p.name]):h.push(p.atlas.mSubTextures[p.name]);return 0<h.length?h:null};H.prototype.getAtlas=function(a){var b=this.mAssets.textureAtlas;if(null==b)return null;if(null!=b[a])return b[a];g.warn("[AssetManager] Atlas '"+a+"' was not found.");return null};H.prototype.getSound=function(a){var b=this.mAssets.sound,c=this.mAssets.soundAtlas;if(null!=b&&(b=b[a],null!=b))return b;if(null!=c)for(var d in c)if(b=c[d].subSounds[a],
null!=b)return b;g.warn("[AssetManager] Sound '"+a+"' was not found.");return null};H.prototype.getSoundAtlas=function(a){return null==this.mAssets.soundAtlas?null:this.mAssets.soundAtlas[a]};H.prototype.getJSON=function(a){return null==this.mAssets.json?null:this.mAssets.json[a]};H.prototype.getCustomAsset=function(a,b){return null==this.mAssets[a]?null:this.mAssets[a][b]};H.prototype.__validateState=function(){g.assert(this.mState===$a.NONE||this.mState===$a.FINISHED,"Illegal state.")};H.prototype.__validateName=
function(a,b){this.mAssets[a]&&this.mAssets[a][b]&&g.assert(null==this.mDictionary[b],"Asset with such name is already added.")};H.prototype.dispose=function(){this.mQueue.forEach(function(a){a.abort()})};$jscomp.global.Object.defineProperties(H.prototype,{defaultPath:{configurable:!0,enumerable:!0,get:function(){return this.mDefaultPath},set:function(a){this.mDefaultPath=a}},isAllLoaded:{configurable:!0,enumerable:!0,get:function(){return this.mIsAllLoaded}},numErrors:{configurable:!0,enumerable:!0,
get:function(){return this.mTotalErrors}},state:{configurable:!0,enumerable:!0,get:function(){return this.mState}},path:{configurable:!0,enumerable:!0,get:function(){return"AssetManager"}}});var Mb=function(){this.parentRenderers=[];this.endPassParentRenderers=[];this.isBackBufferActive=!0;this.customTransform=null};Mb.prototype.reset=function(){this.parentRenderers.splice(0,this.parentRenderers.length);this.endPassParentRenderers.splice(0,this.endPassParentRenderers.length);this.isBackBufferActive=
!0;this.customTransform=null};var xa=function(){var a=z.call(this)||this;a.texture=null;a.mTransformCache=new r;a.mTransform=null;a.mUseTransformCache=!1;a.mCanvas=document.createElement("canvas");a.mContext=a.mCanvas.getContext("2d");a.mContext.lineJoin="round";a.mContext.miterLimit=2;a.mMetrics=null;return a};$jscomp.inherits(xa,z);xa.prototype.preRender=function(a,b){this.endPassRequired=null!==this.gameObject.mClipRect&&!1===this.gameObject.mClipRect.isEmpty;this.skipChildren=!(0<this.gameObject.mAlpha&&
!0===this.gameObject.mVisible);this.skipSelf=!0===this.skipChildren};xa.prototype.upload=function(a,b){b=this.gameObject;b.mDirty&16&&(b.onGetLocalBounds(),this.mMetrics=b.mMetrics);(b.mDirty&16||b.mDirty&8)&&this.updateTransform();this.mTransform=!0===this.mUseTransformCache?this.mTransformCache:this.gameObject.worldTransformation;a.setSnapToPixels(b.snapToPixels);a.setTransform(this.mTransform);a.setGlobalAlpha(this.alpha);a.setGlobalBlendMode(this.blendMode);!0===this.endPassRequired&&a.beginClip(b.mClipRect,
b.mPivotX,b.mPivotY)};xa.prototype.renderSegment=function(a,b,c,d,e,h){d=this.gameObject;var f=e.baselineNormalized*b.style.size;!0===h?(c.lineWidth=b.style.strokeThickness,c.strokeStyle=U.hexColorToString(b.style.strokeColor)):c.fillStyle=U.hexColorToString(b.style.color);c.font=b.style.weight+" "+b.style.style+" "+b.style.size+"px "+b.style.family;e=b.bounds.x-Math.min(a.strokeBounds.x,a.shadowBounds.x);f=f+b.bounds.y-Math.min(a.strokeBounds.y,a.shadowBounds.y);e+=d.padding.x;f+=d.padding.y;"center"===
d.align?e+=.5*a.bounds.width-.5*a.lineWidth[b.lineIndex]:"right"===d.align&&(e+=a.bounds.width-a.lineWidth[b.lineIndex]);!0===h?c.strokeText(b.text,e,f):c.fillText(b.text,e,f)};xa.prototype.render=function(a,b){var c=this.gameObject;!0===c.mHighQuality&&c.mDirty&8&&(c.mDirty^=8,c.mDirty|=16);if(c.mDirty&16){c.mDirty^=16;b=this.mCanvas;var d=this.mContext,e=1;d.textBaseline="alphabetic";!0===c.mHighQuality&&(e=this.mTransform.data,e=Math.max(Math.sqrt(e[0]*e[0]+e[2]*e[2]),Math.sqrt(e[1]*e[1]+e[3]*
e[3]))*a.renderScaleFactor);var h=this.mMetrics.strokeBounds.clone();h.scale(e,e);h.union(this.mMetrics.shadowBounds);h.inflate(c.padding.right,c.padding.bottom);b.width=h.width;b.height=h.height;c=ra.get(c.mDefaultStyle.family);h=this.mMetrics.segments;d.save();d.scale(e,e);for(var f=0;f<h.length;f++)h[f].style.dropShadow&&(d.save(),d.shadowColor=U.intToRGBA(h[f].style.shadowColor,h[f].style.shadowAlpha),d.shadowBlur=h[f].style.shadowBlur,d.shadowOffsetX=h[f].style.shadowDistanceX,d.shadowOffsetY=
h[f].style.shadowDistanceY,this.renderSegment(this.mMetrics,h[f],d,a,c,!1),d.restore());for(f=0;f<h.length;f++){var g=h[f];0<g.style.strokeThickness&&(d.lineJoin="round",d.miterLimit=2,this.renderSegment(this.mMetrics,g,d,a,c,!0))}for(f=0;f<h.length;f++)this.renderSegment(this.mMetrics,h[f],d,a,c,!1);d.restore();null===this.texture?this.texture=new Q(b,null,null,1/e):this.texture.set(b,null,null,1/e)}};xa.prototype.updateTransform=function(){var a=this.gameObject,b=a.worldTransformation,c=0,d=0,e=
Math.min(this.mMetrics.strokeBounds.x,this.mMetrics.shadowBounds.x),h=Math.min(this.mMetrics.strokeBounds.y,this.mMetrics.shadowBounds.y);!1===a.mAutoSize&&("center"===a.align?c=.5*(a.mFieldWidth-this.mMetrics.bounds.width):"right"===a.align&&(c=a.mFieldWidth-this.mMetrics.bounds.width),"middle"===a.mVerticalAlign?d=.5*(a.mFieldHeight-this.mMetrics.bounds.height):"bottom"===a.mVerticalAlign&&(d=a.mFieldHeight-this.mMetrics.bounds.height));!0===(0!==e||0!==h)||!1===a.mAutoSize?(this.mUseTransformCache=
!0,b.copyTo(this.mTransformCache),this.mTransformCache.translate(e+c-a.padding.x,h+d-a.padding.y)):!1===a.padding.isEmpty?(this.mUseTransformCache=!0,b.copyTo(this.mTransformCache),this.mTransformCache.translate(-a.padding.x,-a.padding.y)):this.mUseTransformCache=!1};var kb=function(){var a=z.call(this)||this;a.mCanvas=document.createElement("canvas");a.mContext=a.mCanvas.getContext("2d");a.texture=null;return a};$jscomp.inherits(kb,z);kb.prototype.render=function(a,b){a=this.gameObject;if(null!==
a.mText&&a.mDirty&16){b=this.mCanvas;var c=this.mContext,d=a.mData,e=a.mText,h=a.onGetLocalBounds();a.mDirty^=16;var f=-1,g=0,l=0;b.width=h.width;b.height=h.height;for(h=0;h<e.length;h++){var k=e.charCodeAt(h);if(/(?:\r\n|\r|\n)/.test(e.charAt(h)))g=0,l+=d.lineHeight*a.mLineHeight,f=-1;else{var m=d.chars[k];if(null!=m){var p=m.texture;0<=f&&m.kerning[f]&&(g+=m.kerning[f]);var q=p.width,v=p.height;0!==q&&0!==v&&(c.drawImage(p.native,p.region.x,p.region.y,q,v,~~(p.untrimmedRegion.x+m.xOffset+g),~~(p.untrimmedRegion.y+
m.yOffset+l),q,v),g+=m.xAdvance,f=k)}}}null===this.texture?this.texture=new Q(b):this.texture.set(b)}};var Nb=function(){return z.call(this)||this};$jscomp.inherits(Nb,z);var Va=function(){var a=z.call(this)||this;a.mCacheAsBitmapDirty=!0;a.mCacheAsBitmapMatrixCache=null;a.mCacheTexture=null;a.mCacheBounds=null;a.mIsClipped=!1;a.mIsCached=!1;a.mBakeInvertedMatrix=null;return a};$jscomp.inherits(Va,z);Va.prototype.preRender=function(a,b){a=this.gameObject;this.endPassRequired=this.mIsClipped=null!==
a.mClipRect;!0===a.mCacheAsBitmap&&(!1===a.mCacheAsBitmapDynamic?!1===this.mIsCached?(this.mIsCached=!0,a.setTransformDirty(),this.__refreshBitmapCache(),this.endPassRequired=this.mCacheAsBitmapDirty=!1):a.mDirty|=8:(b=a.checkStatic(!0),!0===b&&!0===this.mCacheAsBitmapDirty?(a.setTransformDirty(),this.__refreshBitmapCache(),this.endPassRequired=this.mCacheAsBitmapDirty=!1):!1===b&&(this.mCacheAsBitmapDirty=!0,a.mDirty|=8)));this.skipChildren=!0===a.mCacheAsBitmap&&!1===this.mCacheAsBitmapDirty||this.mIsClipped&&
a.mClipRect.isEmpty;this.skipSelf=!1;!0===this.skipChildren&&(this.endPassRequired=!1,this.skipSelf=!0)};Va.prototype.begin=function(a,b){a=this.gameObject;!0===this.skipChildren&&!0===b.isBackBufferActive?(this.alpha=1,this.blendMode=Ca.NORMAL,this.color=null,this.skipSelf=0>=a.mAlpha||!1===a.mVisible||this.mIsClipped&&a.mClipRect.isEmpty):(this.alpha=a.mAlpha*this.parent.alpha,this.color=null===a.mColor?this.parent.color:a.mColor,this.blendMode=a.mBlendMode===Ca.AUTO?this.parent.blendMode:a.mBlendMode,
this.skipChildren=0>=a.mAlpha||!1===a.mVisible,this.skipSelf=!0===this.skipChildren||!1===this.mIsClipped||this.mIsClipped&&a.mClipRect.isEmpty)};Va.prototype.upload=function(a,b){b=this.gameObject;var c=b.worldTransformation;!0===this.skipChildren&&this.mCacheAsBitmapMatrixCache&&(c=this.mCacheAsBitmapMatrixCache,!1===b.mCacheAsBitmapDynamic&&(c=(new r).append(this.gameObject.worldTransformation).append(this.mBakeInvertedMatrix).append(this.mCacheAsBitmapMatrixCache)));if(!0===this.skipChildren||
!0===this.endPassRequired)a.setSnapToPixels(b.snapToPixels),a.setTransform(c),a.setGlobalAlpha(this.alpha),a.setGlobalBlendMode(this.blendMode);!0===this.endPassRequired&&a.beginClip(b.mClipRect,b.mPivotX,b.mPivotY)};Va.prototype.render=function(a,b){!0===this.skipChildren&&!0===b.isBackBufferActive&&a.drawTexture(this.mCacheTexture)};Va.prototype.__refreshBitmapCache=function(){var a=this.gameObject.getBounds(l.stage,!0),b=l.stage.scaleFactor,c=l.driver.renderScaleFactor*b,d=r.pool.get();d.set(1,
0,0,1,~~(-a.x*b-l.stage.mX),~~(-a.y*b-l.stage.mY));!0===this.mIsClipped&&!0===this.skipChildren&&(d.data[4]+=this.gameObject.mPivotX*b,d.data[5]+=this.gameObject.mPivotY*b);null===this.mCacheBounds&&(this.mCacheBounds=new t);a.copyTo(this.mCacheBounds);a.width*=c;a.height*=c;null===this.mCacheTexture?this.mCacheTexture=new Sa(a.width,a.height,1):this.mCacheTexture.resize(a.width,a.height,1);l.driver.render(this.gameObject,this.mCacheTexture,d);r.pool.release(d);null===this.mCacheAsBitmapMatrixCache&&
(this.mCacheAsBitmapMatrixCache=new r);this.mCacheAsBitmapMatrixCache.copyFrom(d);this.mCacheAsBitmapMatrixCache.scale(1/l.driver.renderScaleFactor,1/l.driver.renderScaleFactor);this.mCacheAsBitmapMatrixCache.data[4]=-this.mCacheAsBitmapMatrixCache.data[4];this.mCacheAsBitmapMatrixCache.data[5]=-this.mCacheAsBitmapMatrixCache.data[5];this.mBakeInvertedMatrix=this.gameObject.worldTransformationInverted.clone()};var Ob=function(a){return xa.apply(this,arguments)||this};$jscomp.inherits(Ob,xa);Ob.prototype.render=
function(a,b){xa.prototype.render.call(this,a,b);a.drawTexture(z.getColoredTexture(this.texture,this.gameObject.mColor))};var Pb=function(a){return kb.apply(this,arguments)||this};$jscomp.inherits(Pb,kb);Pb.prototype.render=function(a,b){kb.prototype.render.call(this,a,b);a.drawTexture(z.getColoredTexture(this.texture,this.gameObject.mColor))};var Ha=function(){};Ha.prototype.getValue=function(){return this.getValueAt(Math.random())};Ha.prototype.getValueAt=function(a){};var L=function(a,b,c){b=void 0===
b?NaN:b;c=void 0===c?null:c;this.min=a;this.max=isNaN(b)?a:b;this.ease=c;this.value=0;return this};$jscomp.inherits(L,Ha);L.prototype.getValueAt=function(a){null!==this.ease&&(a=this.ease(a));return this.value=this.min+a*(this.max-this.min)};L.fromObject=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];return b[0]instanceof L?b[0]:new (Function.prototype.bind.apply(L,[null].concat($jscomp.arrayFromIterable(b))))};var Ia={PENDING:0,EMITTING:1,FINISHED:2},$b={FRONT_TO_BACK:"frontToBack",
BACK_TO_FRONT:"backToFront"},y=function(a){this.mIsInitializer=void 0===a?!0:a;this.scatter=null};y.prototype.preUpdate=function(a){};y.prototype.update=function(a,b,c){};y.prototype.postUpdate=function(a){};$jscomp.global.Object.defineProperties(y.prototype,{isInitializer:{configurable:!0,enumerable:!0,get:function(){return this.mIsInitializer}}});var Qb=function(){this.textureIndex=0;this.life=this.alpha=this.scaleY=this.scaleX=1;this.age=0;this.energy=this.age/this.life;this.ay=this.ax=this.vy=
this.vx=this.r=this.y=this.x=this.mass=0;this.color=null;this.anchorY=this.anchorX=.5};Qb.prototype.reset=function(){this.scaleX=this.scaleY=this.alpha=this.life=1;this.textureIndex=this.age=this.energy=this.mass=this.x=this.y=this.r=this.vx=this.vy=this.ax=this.ay=0;this.anchorX=this.anchorY=.5};Qb.prototype.update=function(a){0>=this.life?this.life=0:(this.x+=this.vx*a,this.y+=this.vy*a,0<this.mass&&(this.ax*=1/this.mass,this.ay*=1/this.mass),this.vx+=this.ax*a,this.vy+=this.ay*a,this.ay=this.ax=
0,this.life-=a,this.age+=a,this.energy=this.age/(this.age+this.life))};var na=function(){var a=X.call(this)||this;a.mTextures=[];a.mParticles=[];a.mRecycled=[];a.mInitializers=[];a.mActions=[];a.mSpace=null;a.mIsLocal=!0;a.mMaxParticles=1E4;a.mEmitCount=new L(10);a.mEmitNumRepeats=new L(Infinity);a.mEmitNumRepeatsLeft=a.mEmitNumRepeats.getValue();a.mEmitDuration=new L(1/60);a.mEmitDurationLeft=a.mEmitDuration.getValue();a.mEmitInterval=new L(1/60);a.mEmitIntervalLeft=a.mEmitInterval.getValue();a.mEmitDelay=
new L(1);a.mEmitDelayLeft=a.mEmitDelay.getValue();a.mNextUpdateAt=0;a.mState=Ia.PENDING;a.__tmpLocal=new r;a.__tmpWorld=new r;a.mSortOrder=$b.FRONT_TO_BACK;a.mPresimulateSeconds=5;a.mCurrentPresimulationTime=0;return a};$jscomp.inherits(na,X);na.prototype.simulate=function(a){g.isNumber(a);g.assert(0<a);this.mCurrentPresimulationTime=0;for(this.mPresimulateSeconds=a;this.mCurrentPresimulationTime<=this.mPresimulateSeconds;)this.onUpdate(),this.mCurrentPresimulationTime+=l.time.delta;this.mCurrentPresimulationTime=
this.mPresimulateSeconds=0};na.prototype.getRenderer=function(){return l.driver.getRenderer("Emitter",this)};na.prototype.resetState=function(){this.mState=Ia.PENDING};na.prototype.add=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];for(c=0;c<b.length;c++){var d=b[c];d instanceof y?this.addModifier(d):X.prototype.add.call(this,d)}return this};na.prototype.addModifier=function(a){a.isInitializer?this.mInitializers.push(a):this.mActions.push(a);return a};na.prototype.__getTime=
function(){return l.time.now};na.prototype.updateNextTick=function(a){a=void 0===a?0:a;var b=l.time.now,c=!1;this.mState===Ia.PENDING&&(this.mNextUpdateAt=b+this.mEmitDelayLeft,this.mEmitDelayLeft-=a,0>=this.mEmitDelayLeft&&(this.mEmitDelayLeft=this.mEmitDelay.getValue(),this.mState=Ia.EMITTING,c=!0));this.mState===Ia.EMITTING&&(0>=this.mEmitDurationLeft?(this.mEmitDurationLeft=this.mEmitDuration.getValue(),this.mEmitNumRepeatsLeft--,0>=this.mEmitNumRepeatsLeft?(this.mState=Ia.FINISHED,this.post(E.COMPLETE)):
this.mState=Ia.PENDING):(c?(this.mNextUpdateAt=b,this.mEmitIntervalLeft=this.mEmitInterval.getValue()):(this.mEmitIntervalLeft-=a,this.mNextUpdateAt=b+this.mEmitIntervalLeft,0>=this.mEmitIntervalLeft&&(this.mEmitIntervalLeft=this.mEmitInterval.getValue())),this.mEmitDurationLeft-=a))};na.prototype.onUpdate=function(){var a=l.time.delta;this.updateNextTick(a);l.time.now>=this.mNextUpdateAt&&this.mState===Ia.EMITTING&&this.__create(this.mEmitCount.getValue());for(var b=this.mActions.length,c=this.mParticles.length,
d=0;d<b;d++)this.mActions[d].preUpdate(a);for(d=c;d--;){c=this.mParticles[d];for(var e=0;e<b;e++)this.mActions[e].update(this,c,a);c.update(a);0===c.life&&(this.mRecycled.push(c),this.mParticles.splice(d,1))}for(c=0;c<b;c++)this.mActions[c].postUpdate(a);!0===this.mVisible&&0<this.mAlpha&&this.setDirty(1,!1)};na.prototype.__create=function(a){var b=this.worldTransformation.clone();if(!1===this.mIsLocal){var c=this.mSpace.worldTransformationInverted.clone();b.prepend(c)}for(c=0;c<a;c++){if(0<this.mRecycled.length)var d=
this.mRecycled.pop();else{if(this.mParticles.length>=this.mMaxParticles)break;d=new Qb}d.reset();for(var e=0;e<this.mInitializers.length;e++)this.mInitializers[e].update(this,d,0);!1===this.mIsLocal&&(b.transformXY(d.x,d.y,k.__cache),d.x=k.__cache.x,d.y=k.__cache.y);this.mParticles.push(d)}};$jscomp.global.Object.defineProperties(na.prototype,{state:{configurable:!0,enumerable:!0,get:function(){return this.mState}},maxParticles:{configurable:!0,enumerable:!0,get:function(){return this.mMaxParticles},
set:function(a){if(0>a)throw Error("Bad argument error.");this.mMaxParticles=a}},emitCount:{configurable:!0,enumerable:!0,get:function(){return this.mEmitCount},set:function(a){this.mEmitCount=a}},emitNumRepeats:{configurable:!0,enumerable:!0,get:function(){return this.mEmitNumRepeats},set:function(a){this.mEmitNumRepeats=a;this.mEmitNumRepeatsLeft=this.mEmitNumRepeats.getValue()}},emitDuration:{configurable:!0,enumerable:!0,get:function(){return this.mEmitDuration},set:function(a){this.mEmitDuration=
a;this.mEmitDurationLeft=this.mEmitDuration.getValue()}},emitInterval:{configurable:!0,enumerable:!0,get:function(){return this.mEmitInterval},set:function(a){this.mEmitInterval=a;this.mEmitIntervalLeft=this.mEmitInterval.getValue()}},emitDelay:{configurable:!0,enumerable:!0,get:function(){return this.mEmitDelay},set:function(a){this.mEmitDelay=a;this.mEmitDelayLeft=this.mEmitDelay.getValue()}},space:{configurable:!0,enumerable:!0,get:function(){return this.mSpace},set:function(a){this.mSpace=a;this.mIsLocal=
null===this.mSpace||this.mSpace===this;this.setRenderDirty()}},textures:{configurable:!0,enumerable:!0,get:function(){return this.mTextures},set:function(a){this.mTextures=a;g.assert(!(null===this.mTextures||0===this.mTextures.length),"At least one texture must be provided.");this.setRenderDirty()}},texturesName:{configurable:!0,enumerable:!0,set:function(a){this.textures=l.assets.getTextures(a)}},sortOrder:{configurable:!0,enumerable:!0,get:function(){return this.mSortOrder},set:function(a){this.mSortOrder=
a;this.setRenderDirty()}}});var lb=function(){var a=z.call(this)||this;a.isLocal=!1;a.__tmpLocal=new r;a.__tmpWorld=new r;return a};$jscomp.inherits(lb,z);lb.prototype.preRender=function(a,b){a=this.gameObject;this.endPassRequired=null!==this.gameObject.mClipRect&&!1===this.gameObject.mClipRect.isEmpty;this.skipChildren=!(0<a.mAlpha&&0<a.mTextures.length&&!0===a.mVisible);this.skipSelf=!(0<a.mTextures.length&&0<a.mParticles.length)};lb.prototype.render=function(a,b){b=this.gameObject;a.setSnapToPixels(b.snapToPixels);
var c=b.mParticles.length,d=this.__tmpLocal,e=this.__tmpWorld;d.identity();if(b.sortOrder===$b.FRONT_TO_BACK)for(var h=0;h<c;h++)this.__renderParticle(b.mParticles[h],d,e,a);else for(--c;0<c;c--)this.__renderParticle(b.mParticles[c],d,e,a)};lb.prototype.__renderParticle=function(a,b,c,d){var e=this.gameObject,h=e.textures[a.textureIndex],f=h.displayWidth*a.anchorX,g=h.displayHeight*a.anchorY;if(0===a.r)b.set(a.scaleX,0,0,a.scaleY,a.x-f*a.scaleX,a.y-g*a.scaleY);else{var l=Math.cos(a.r),k=Math.sin(a.r),
m=a.scaleX*l,p=a.scaleX*k;k=a.scaleY*-k;l*=a.scaleY;b.set(m,p,k,l,a.x-f*m-g*k,a.y-f*p-g*l)}!0===e.mIsLocal?(c.identity(),c.copyFrom(b),c.prepend(e.worldTransformation)):(c.copyFrom(e.mSpace.worldTransformation),c.append(b));d.setGlobalAlpha(e.mAlpha*a.alpha);d.setTransform(c);d.drawTexture(z.getColoredTexture(h,null===a.color?e.mColor:a.color))};var mb=function(){var a=z.call(this)||this;a.pattern=null;a.patternTexture=null;a.sliceTextureCache=null;a.sizeWidthCache=null;a.sizeHeightCache=null;a.textureCache=
null;return a};$jscomp.inherits(mb,z);mb.prototype.preRender=function(a,b){a=this.gameObject;b=null!==a.mClipRect&&a.mClipRect.isEmpty;this.endPassRequired=null!==a.mClipRect&&!a.mClipRect.isEmpty;this.skipChildren=b||0>=a.mAlpha||!1===a.mVisible;this.skipSelf=b||null===a.mTexture||0>=a.mAlpha||!1===a.mVisible};mb.prototype.renderSlice9Grid=function(a,b,c){var d=a.mDevicePixelRatio,e=b.width*this.gameObject.mScaleX,h=b.height*this.gameObject.mScaleY;if(this.textureCache===b&&this.sizeWidthCache===
e&&this.sizeHeightCache===h)return this.sliceTextureCache;this.textureCache=b;this.sizeWidthCache=e;this.sizeHeightCache=h;a=b.region.x;var f=b.region.y,g=b.region.width,l=b.region.height,k=b.untrimmedRegion.x*d;d*=b.untrimmedRegion.y;null===this.sliceTextureCache?this.sliceTextureCache=new Sa(e,h,1/b.scale):this.sliceTextureCache.resize(e,h,1/b.scale);var m=this.sliceTextureCache.renderTarget.context,p=Math.min(this.gameObject.scaleX,this.gameObject.scaleY);1>=p&&(m.setTransform(p,0,0,p,0,0),e/=
p,h/=p);p=c.x/b.scale;var q=c.y/b.scale,v=g-c.right/b.scale;c=l-c.bottom/b.scale;var r=a+g-v,t=k+e/b.scale-v,u=f+l-c,x=d+h/b.scale-c;m.drawImage(b.native,a,f,p,q,k,d,p,q);m.drawImage(b.native,r,f,v,q,t,d,v,q);m.drawImage(b.native,r,u,v,c,t,x,v,c);m.drawImage(b.native,a,u,p,c,k,x,p,c);r=a+p;t=k+p;u=f+q;x=d+q;var z=a+g-v,y=k+e/b.scale-v,C=f+l-c,D=d+h/b.scale-c;g=g-p-v;e=e/b.scale-p-v;l=l-q-c;h=h/b.scale-q-c;m.drawImage(b.native,r,f,g,q,t,d,e,q);m.drawImage(b.native,z,u,v,l,y,x,v,h);m.drawImage(b.native,
r,C,g,c,t,D,e,c);m.drawImage(b.native,a,u,p,l,k,x,p,h);m.drawImage(b.native,r,u,g,l,t,x,e,h);return this.sliceTextureCache};mb.prototype.render=function(a,b){b=a.mCtx;var c=this.gameObject,d=z.getColoredTexture(c.mTexture,this.color);if(null!==c.mSlice9grid){var e=this.gameObject.worldTransformation.data;e=r.pool.get().set(e[0]/this.gameObject.scaleX,e[1]/this.gameObject.scaleX,e[2]/this.gameObject.scaleY,e[3]/this.gameObject.scaleY,e[4],e[5]);a.setTransform(e);r.pool.release(e);d=this.renderSlice9Grid(a,
d,c.mSlice9grid)}if(null===c.mTiling)a.drawTexture(d);else{if(null===this.pattern||this.patternTexture!==d){e=new Qa(d.width,d.height);var h=d.region,f=d.untrimmedRegion;e.context.drawImage(d.native,h.x,h.y,h.width,h.height,f.x,f.y,h.width,h.height);this.pattern=b.createPattern(e.native,"repeat");this.patternTexture=d}b.fillStyle=this.pattern;d=a.renderScaleFactor;e=c.worldTransformation.clone();e.scale(c.tiling.scaleX*d,c.tiling.scaleY*d);e.translate(c.tiling.wrapX/d,c.tiling.wrapY/d);a.setTransform(e);
b.fillRect(-c.tiling.wrapX,-c.tiling.wrapY,c.tiling.width/c.tiling.scaleX,c.tiling.height/c.tiling.scaleY);b.fillStyle="black"}};var nb=function(){return Nb.call(this)||this};$jscomp.inherits(nb,Nb);nb.prototype.render=function(a,b){b=this.gameObject;this.__drawCommandBuffer(a);null!==b.mColor&&16777215!==b.mColor&&(a.context.globalCompositeOperation="multiply",this.__drawCommandBuffer(a,b.mColor))};nb.prototype.__drawCommandBuffer=function(a,b){b=void 0===b?null:b;var c=this.gameObject,d=a.context;
d.save();d.beginPath();var e=r.pool.get().copyFrom(c.worldTransformation);e.translate(-c.mDataOffsetX,-c.mDataOffsetY);this.__renderNode(a,b,c.mGraphicsData,e);r.pool.release(e);d.restore()};nb.prototype.__renderNode=function(a,b,c,d){var e=c.mCommandQueue,h=a.context,f=e.length,k=a.renderScaleFactor,m=c.mPivotX,q=c.mPivotY;d=d.clone().append(c.mTransform);a.setTransform(d);for(var r=0;r<f;r++){var p=e[r];switch(p.type){case x.LINE_STYLE:h.lineWidth=p.getNumber(0)*k;h.strokeStyle=U.intToRGBA(null===
b?p.getNumber(1):b,p.getNumber(2));h.lineCap=p.getString(3);h.lineJoin=p.getString(4);h.miterLimit=p.getNumber(5);break;case x.FILL_STYLE:h.fillStyle=U.intToRGBA(null===b?p.getNumber(0):b,p.getNumber(1));break;case x.FILL_GRD:var t=p.getObject(0),v=t.native;if(!v){v=l.driver.renderScaleFactor;var u=[];v=t.native=h.createLinearGradient(t.x0*v,t.y0*v,t.x1*v,t.y1*v);for(var z in t.stops)u.push({percent:parseFloat(z),color:t.stops[z]});u.sort(function(a,b){return a.percent-b.percent});t=0;for(var y=u.length;t<
y;t++)p=u[t],v.addColorStop(p.percent,p.color)}h.fillStyle=v;break;case x.FILL_PATTERN:u=p.getObject(0);v=u.native;v||(v=u.native=h.createPattern(u.image,u.repetition));h.fillStyle=v;break;case x.ARC:h.arc(p.getNumber(0)*k-m,p.getNumber(1)*k-q,p.getNumber(2)*k,p.getNumber(3),p.getNumber(4),p.getBoolean(5));break;case x.RECT:h.rect(p.getNumber(0)*k-m,p.getNumber(1)*k-q,p.getNumber(2)*k,p.getNumber(3)*k);break;case x.ROUNDED_RECT:u=p.getNumber(0);v=p.getNumber(1);t=p.getNumber(2);y=p.getNumber(3);p=
p.getNumber(4);h.moveTo(u*k-m,(v+p)*k-q);h.quadraticCurveTo(u*k-m,v*k-q,(u+p)*k-m,v*k-q);h.lineTo((u+t-p)*k-m,v*k-q);h.quadraticCurveTo((u+t)*k-m,v*k-q,(u+t)*k-m,(v+p)*k-q);h.lineTo((u+t)*k-m,(v+y-p)*k-q);h.quadraticCurveTo((u+t)*k-m,(v+y)*k-q,(u+t-p)*k-m,(v+y)*k-q);h.lineTo((u+p)*k-m,(v+y)*k-q);h.quadraticCurveTo(u*k-m,(v+y)*k-q,u*k-m,(v+y-p)*k-q);h.closePath();break;case x.BEZIER_CURVE_TO:h.bezierCurveTo(p.getNumber(0)*k-m,p.getNumber(1)*k-q,p.getNumber(2)*k-m,p.getNumber(3)*k-q,p.getNumber(4)*
k-m,p.getNumber(5)*k-q);break;case x.QUADRATIC_CURVE_TO:h.quadraticCurveTo(p.getNumber(0)*k-m,p.getNumber(1)*k-q,p.getNumber(2)*k-m,p.getNumber(3)*k-q);break;case x.BEGIN_PATH:h.beginPath();break;case x.CLOSE_PATH:h.closePath();break;case x.FILL:h.fill(!0===p.getBoolean(0)?"nonzero":"evenodd");break;case x.LINE_TO:h.lineTo(p.getNumber(0)*k-m,p.getNumber(1)*k-q);break;case x.MOVE_TO:h.moveTo(p.getNumber(0)*k-m,p.getNumber(1)*k-q);break;case x.LINE_DASH:h.setLineDash(p.getNumber(0));break;case x.STROKE:h.stroke();
break;case x.BOUNDS:break;default:g.error("Unsupported canvas command '"+p.type+"'.")}}e=0;for(h=c.mNodes.length;e<h;e++)this.__renderNode(a,b,c.mNodes[e],d)};var J=function(a,b,c){this.mContainerElement=a;this.mClientWidth=b;this.mClientHeight=c;this.mTransform=new r;this.mIdentityMatrix=new r;this.mActiveSession=new Mb;this.mSessions=[];this.mLastRenderTexture=null;this.mSnapToPixels=!1;this.mDevicePixelRatio=!0===l.engine.useHiDPR?l.device.getDevicePixelRatio():1;this.mGlobalBlendMode=Ca.AUTO;
this.mGlobalAlpha=1;this.mStageRenderer=new z;this.mRendererMap={};l.engine.viewport.on("resize",this.__onResize,this)};J.prototype.render=function(a,b,c){};J.prototype.getRenderer=function(a,b){return null};J.prototype.__saveSession=function(){var a=J.sessionPool.get();a.reset();this.mSessions.push(a);return this.mActiveSession=a};J.prototype.__restoreSession=function(){this.mSessions.pop();this.mActiveSession=this.mSessions[this.mSessions.length-1]||null};J.prototype.__collectParentRenderables=
function(a,b,c){var d=b;if(null!==d){b=[];for(d=d.parent;null!==d;d=d.parent)b.splice(0,0,d);for(var e=0;e<b.length;e++)d=b[e],d=d.mRenderer,null!=d&&(a.parentRenderers.push(d),d.parent=c,c=d,d.preRender(this,a),!0===d.endPassRequired&&a.endPassParentRenderers.push(d))}};J.prototype.beginClip=function(a,b,c){};J.prototype.endClip=function(){};J.prototype.__onResize=function(a,b){z.__dirty=!0;a=this.mContainerElement.clientHeight;this.mClientWidth=this.mContainerElement.clientWidth;this.mClientHeight=
a};J.prototype.start=function(){};J.prototype.beginFrame=function(){this.clear()};J.prototype.endFrame=function(){};J.prototype.getTextureFromCanvas=function(a){return null};J.prototype.setTransform=function(a){this.mTransform=a};J.prototype.setSnapToPixels=function(a){this.mSnapToPixels=a};J.prototype.getGlobalAlpha=function(){return this.mGlobalAlpha};J.prototype.setGlobalAlpha=function(a){this.mGlobalAlpha=a};J.prototype.getGlobalBlendMode=function(){return this.mGlobalBlendMode};J.prototype.setGlobalBlendMode=
function(a){this.mGlobalBlendMode=a};J.prototype.drawTexture=function(a){};J.prototype.drawTextureWithOffset=function(a,b,c){};J.prototype.clear=function(){};J.prototype.dispose=function(){J.sessionPool.releaseAll()};$jscomp.global.Object.defineProperties(J.prototype,{context:{configurable:!0,enumerable:!0,get:function(){return null}},renderScaleFactor:{configurable:!0,enumerable:!0,get:function(){return this.mDevicePixelRatio}}});J.sessionPool=new I(Mb);var ba=function(a,b,c){a=J.call(this,a,b,c)||
this;a.mCtx=null;a.__createCanvas();a.mRendererMap={DisplayObject:Va,Sprite:mb,Emitter:lb,Text:Ob,BitmapText:Pb,Graphics:nb};return a};$jscomp.inherits(ba,J);ba.prototype.getRenderer=function(a,b){a=new this.mRendererMap[a];a.gameObject=b;return a};ba.prototype.render=function(a,b,c){b=void 0===b?null:b;c=void 0===c?null:c;var d=null===b;if(!0!==z.skipUnchangedFrames||!0!==d||!1!==z.__dirty){var e=this.__saveSession();e.isBackBufferActive=d;e.customTransform=c;c=this.mStageRenderer;if(null!==b){this.mLastRenderTexture=
this.mCtx;this.mCtx=b.renderTarget.context;this.mGlobalAlpha=-1;this.mGlobalBlendMode=null;c.alpha=1;c.blendMode=Ca.NORMAL;c.color=null;this.__collectParentRenderables(e,a,this.mStageRenderer);d=0;for(var h=e.parentRenderers.length;d!==h;d++){var f=e.parentRenderers[d];f.begin(this,e);!1===f.skipSelf&&f.upload(this,e)}0<e.parentRenderers.length&&(c=e.parentRenderers[e.parentRenderers.length-1])}this.renderObject(a,e,c);if(null!==b){for(;0<e.endPassParentRenderers.length;)e.endPassParentRenderers.pop().end(this,
e);this.mCtx=this.mLastRenderTexture;this.mGlobalAlpha=-1;this.mGlobalBlendMode=null}this.__restoreSession()}};ba.prototype.renderObject=function(a,b,c){var d=!1,e=a.mRenderer;if(null!=e){e.parent=c;e.preRender(this,b);for(d=0;d<a.mComponents.length;d++)a.mComponents[d].onRender();a.onRender();e.begin(this,b);!1===e.skipSelf&&(e.upload(this,b),e.render(this,b));d=e.skipChildren}if(!1===d)for(d=0;d<a.mChildren.length;d++)this.renderObject(a.mChildren[d],b,e||c);null!=e&&!0===e.endPassRequired&&e.end(this,
b)};ba.prototype.__createCanvas=function(){var a=this.mDevicePixelRatio,b=document.createElement("canvas");b.style.position="absolute";b.id="canvas";b.width=this.mClientWidth*a;b.height=this.mClientHeight*a;b.style.width=this.mClientWidth+"px";b.style.height=this.mClientHeight+"px";this.mContainerElement.appendChild(b);this.mCtx=b.getContext("2d")};ba.prototype.__onResize=function(a,b){J.prototype.__onResize.call(this,a,b);this.mGlobalBlendMode=null;this.mGlobalAlpha=-1;a=this.mDevicePixelRatio;this.mCtx.canvas.width=
this.mClientWidth*a;this.mCtx.canvas.height=this.mClientHeight*a;this.mCtx.canvas.style.width=this.mClientWidth+"px";this.mCtx.canvas.style.height=this.mClientHeight+"px"};ba.prototype.drawTexture=function(a){if(!1!==a.isValid){var b=this.mDevicePixelRatio;this.mCtx.drawImage(a.native,a.region.x,a.region.y,a.region.width,a.region.height,a.untrimmedRegion.x*b,a.untrimmedRegion.y*b,a.renderWidth*b,a.renderHeight*b)}};ba.prototype.drawTextureWithOffset=function(a,b,c){if(!1!==a.isValid){var d=this.mDevicePixelRatio;
this.mCtx.drawImage(a.native,a.region.x,a.region.y,a.region.width,a.region.height,(b+a.untrimmedRegion.x)*d,(c+a.untrimmedRegion.y)*d,a.renderWidth*d,a.renderHeight*d)}};ba.prototype.beginClip=function(a,b,c){var d=this.mDevicePixelRatio;this.mCtx.save();this.mCtx.beginPath();this.mCtx.rect((a.x+b)*d,(a.y+c)*d,a.width*d,a.height*d);this.mCtx.clip()};ba.prototype.endClip=function(){this.mCtx.restore();this.mGlobalAlpha=-1;this.mGlobalBlendMode=null};ba.prototype.setTransform=function(a){var b=this.mDevicePixelRatio,
c=this.mActiveSession;!1===c.isBackBufferActive&&(null===c.customTransform?(a=a.clone(),a.data[4]-=l.stage.mX,a.data[5]-=l.stage.mY):(a=a.clone(),a.prepend(c.customTransform)));this.mTransform=a;a=a.value;g.isNumber(a[0],a[1],a[2],a[3],a[4],a[5]);!0===this.mSnapToPixels?this.mCtx.setTransform(a[0],a[1],a[2],a[3],a[4]*b|0,a[5]*b|0):this.mCtx.setTransform(a[0],a[1],a[2],a[3],a[4]*b,a[5]*b)};ba.prototype.setGlobalAlpha=function(a){g.isNumber(a);a!=this.mGlobalAlpha&&(this.mGlobalAlpha=a,this.mCtx.globalAlpha=
a)};ba.prototype.setGlobalBlendMode=function(a){a!==Ca.AUTO&&(a=Tc[a],this.mGlobalBlendMode!==a&&(this.mGlobalBlendMode=a,this.mCtx.globalCompositeOperation=a))};ba.prototype.clear=function(){if(!0!==z.skipUnchangedFrames||!1!==z.__dirty){this.mCtx.setTransform(1,0,0,1,0,0);var a=l.engine.viewport;!1===a.isTransparent?(this.mCtx.fillStyle=U.hexColorToString(a.backgroundColor),this.mCtx.fillRect(0,0,a.size.width*this.mDevicePixelRatio,a.size.height*this.mDevicePixelRatio)):this.mCtx.clearRect(0,0,
a.size.width*this.mDevicePixelRatio,a.size.height*this.mDevicePixelRatio)}};ba.prototype.getTextureFromCanvas=function(a){return new Q(a)};ba.prototype.dispose=function(){J.prototype.dispose.call(this);null!==this.mCtx&&this.mCtx.canvas.remove()};$jscomp.global.Object.defineProperties(ba.prototype,{context:{configurable:!0,enumerable:!0,get:function(){return this.mCtx}}});var Db=function(a,b){a=void 0===a?null:a;b=void 0===b?!0:b;var c=X.call(this)||this;c.mTexture=null;c.mTextureName=null;c.mTiling=
null;c.mSlice9grid=null;c.mUseTextureProps=b;null!==a&&a.constructor===String?(c.mTextureName=a,c.texture=l.assets.getTexture(a)):c.texture=a;return c};$jscomp.inherits(Db,X);Db.prototype.getRenderer=function(){return l.driver.getRenderer("Sprite",this)};Db.prototype.onGetLocalBounds=function(a){a=a||new t;if(!this.mTexture)return a;null!==this.mClipRect?this.mClipRect.copyTo(a):null!==this.tiling?a.set(0,0,this.tiling.width,this.tiling.height):a.set(0,0,this.mTexture.displayWidth,this.mTexture.displayHeight);
return a};$jscomp.global.Object.defineProperties(Db.prototype,{texture:{configurable:!0,enumerable:!0,get:function(){return this.mTexture},set:function(a){this.mTexture!==a&&(this.mTexture=a,!0===this.mUseTextureProps&&(a.slice9borders&&(this.slice9grid=a.slice9borders.clone()),null!==a.registrationPoint&&this.alignPivotOffset(a.registrationPoint.x,a.registrationPoint.y)),this.setDirty(16,!1),this.setRenderDirty())}},textureName:{configurable:!0,enumerable:!0,get:function(){return this.mTextureName},
set:function(a){this.mTextureName!==a&&(this.mTextureName=a,this.texture=l.assets.getTexture(a))}},tiling:{configurable:!0,enumerable:!0,get:function(){return this.mTiling},set:function(a){this.mTiling=a;this.setRenderDirty();this.setDirty(16,!1)}},slice9grid:{configurable:!0,enumerable:!0,get:function(){return this.mSlice9grid},set:function(a){this.mSlice9grid=a;this.setRenderDirty();this.setDirty(16,!1)}}});var Ic={NONE:"none",LEFT:"left",RIGHT:"right",CENTER:"center"},Jc={TOP:"top",MIDDLE:"middle",
BOTTOM:"bottom"},ta=function(a,b,c,d,e,h,f,g){a=void 0===a?"":a;b=void 0===b?"sans-serif":b;c=void 0===c?0:c;d=void 0===d?14:d;e=void 0===e?Fb.NORMAL:e;h=void 0===h?Gb.NORMAL:h;f=void 0===f?0:f;g=void 0===g?16777215:g;var n=X.call(this)||this;n.mText=a;n.mCacheBounds=new t;n.mTextWidth=0;n.mTextHeight=0;n.mDefaultStyle=new Oa(b,c,d,e,h,f,g);n.mStyles={};n.mAutoSize=!0;n.mAlign=Ic.LEFT;n.mVerticalAlign=Jc.MIDDLE;n.mMultiline=!1;n.mLineHeight=1.2;n.mTextBounds=new t;n.mFieldWidth=0;n.mFieldHeight=0;
n.mPadding=new t(0,0,0,0);n.mMetrics=null;n.mHighQuality=!1;return n};$jscomp.inherits(ta,X);ta.prototype.getRenderer=function(){return l.driver.getRenderer("Text",this)};ta.prototype.onGetLocalBounds=function(a){a=a||new t;if(this.mDirty&16){var b=this.text;!1===this.mMultiline&&(b=b.replace(/\n/g,""));var c=[this.mDefaultStyle],d;for(d in this.mStyles)c.push(this.mStyles[d]);this.mMetrics=Pa.measure.apply(Pa,[b,this.mLineHeight].concat($jscomp.arrayFromIterable(c)));this.mTextBounds.copyFrom(this.mMetrics.bounds)}if(null!==
this.mClipRect)return this.mClipRect.copyTo(a),a;!1===this.mAutoSize?(a.width=this.mFieldWidth,a.height=this.mFieldHeight):(a.width=this.mTextBounds.width,a.height=this.mTextBounds.height);a.width+=this.mPadding.right;a.height+=this.mPadding.bottom;return a};ta.prototype.setStyle=function(a,b){g.assert("def"!==a,"Please use 'setDefaultStyle' instead.");b.name=a;this.mStyles[a]=b;this.setDirty(16,!1);this.setTransformDirty()};ta.prototype.setDefaultStyle=function(a){this.mDefaultStyle=a;this.setDirty(16,
!1);this.setTransformDirty()};ta.prototype.removeStyle=function(a){delete this.mStyles[a];this.setDirty(16,!1);this.setTransformDirty()};ta.prototype.getStyle=function(a){return this.mStyles.hasOwnProperty(a)?this.mStyles[a]:null};ta.prototype.getAllStyles=function(){var a=[],b;for(b in this.mStyles)a.push(this.mStyles[b]);return a};ta.prototype.getDefaultStyle=function(a){return this.mDefaultStyle};$jscomp.global.Object.defineProperties(ta.prototype,{multiline:{configurable:!0,enumerable:!0,set:function(a){this.mMultiline=
a;this.setDirty(16,!1);this.setTransformDirty()},get:function(){return this.mMultiline}},lineHeight:{configurable:!0,enumerable:!0,set:function(a){this.mLineHeight=a;this.setDirty(16,!1);this.setTransformDirty()},get:function(){return this.mLineHeight}},size:{configurable:!0,enumerable:!0,get:function(){return this.mDefaultStyle.size},set:function(a){this.mDefaultStyle.size!==a&&(this.mDefaultStyle.size=a,this.setDirty(16,!1),this.setTransformDirty())}},font:{configurable:!0,enumerable:!0,get:function(){return this.mDefaultStyle.family},
set:function(a){this.mDefaultStyle.family!==a&&(this.mDefaultStyle.family=a,this.setDirty(16,!1),this.setTransformDirty())}},textColor:{configurable:!0,enumerable:!0,get:function(){return this.mDefaultStyle.color},set:function(a){this.mDefaultStyle.color!==a&&(this.mDefaultStyle.color=a,this.setDirty(16,!1),this.setTransformDirty())}},fontStyle:{configurable:!0,enumerable:!0,get:function(){return this.mDefaultStyle.style},set:function(a){this.mDefaultStyle.style!==a&&(this.mDefaultStyle.style=a,this.setDirty(16,
!1),this.setTransformDirty())}},weight:{configurable:!0,enumerable:!0,get:function(){return this.mDefaultStyle.weight},set:function(a){this.mDefaultStyle.weight!==a&&(this.mDefaultStyle.weight=a,this.setDirty(16,!1),this.setTransformDirty())}},align:{configurable:!0,enumerable:!0,get:function(){return this.mAlign},set:function(a){this.mAlign!==a&&(this.mAlign=a,this.setDirty(16,!1),this.setTransformDirty())}},vAlign:{configurable:!0,enumerable:!0,get:function(){return this.mVerticalAlign},set:function(a){this.mVerticalAlign!==
a&&(this.mVerticalAlign=a,this.setDirty(16,!1),this.setTransformDirty())}},strokeColor:{configurable:!0,enumerable:!0,get:function(){return this.mDefaultStyle.strokeColor},set:function(a){this.mDefaultStyle.strokeColor!==a&&(this.mDefaultStyle.strokeColor=a,this.setDirty(24,!1))}},strokeThickness:{configurable:!0,enumerable:!0,get:function(){return this.mDefaultStyle.strokeThickness},set:function(a){a!==this.mDefaultStyle.strokeThickness&&(this.mDefaultStyle.strokeThickness=a,this.setDirty(24,!1))}},
fieldWidth:{configurable:!0,enumerable:!0,get:function(){return this.mFieldWidth},set:function(a){a!==this.mFieldWidth&&(this.mFieldWidth=a,this.setDirty(16,!1),this.setTransformDirty())}},fieldHeight:{configurable:!0,enumerable:!0,get:function(){return this.mFieldHeight},set:function(a){a!==this.mFieldHeight&&(this.mFieldHeight=a,this.setDirty(16,!1),this.setTransformDirty())}},text:{configurable:!0,enumerable:!0,get:function(){return this.mText},set:function(a){this.mText!==a&&(this.mText=a,this.setDirty(16,
!1),this.setTransformDirty(),this.post(E.CHANGE))}},autoSize:{configurable:!0,enumerable:!0,get:function(){return this.mAutoSize},set:function(a){this.mAutoSize!==a&&(this.mAutoSize=a,this.setDirty(16,!1),this.setTransformDirty())}},padding:{configurable:!0,enumerable:!0,get:function(){return this.mPadding},set:function(a){this.mPadding=a;this.setDirty(16,!1);this.setTransformDirty()}},dropShadow:{configurable:!0,enumerable:!0,get:function(){return this.mDefaultStyle.dropShadow},set:function(a){a!==
this.mDefaultStyle.dropShadow&&(this.mDefaultStyle.dropShadow=a,this.setDirty(16,!1),this.setTransformDirty())}},shadowColor:{configurable:!0,enumerable:!0,get:function(){return this.mDefaultStyle.shadowColor},set:function(a){a!==this.mDefaultStyle.shadowColor&&(this.mDefaultStyle.shadowColor=a,this.setDirty(24,!1))}},shadowAlpha:{configurable:!0,enumerable:!0,get:function(){return this.mDefaultStyle.shadowAlpha},set:function(a){a!==this.mDefaultStyle.shadowAlpha&&(this.mDefaultStyle.shadowAlpha=
a,this.setDirty(24,!1))}},shadowBlur:{configurable:!0,enumerable:!0,get:function(){return this.mDefaultStyle.shadowBlur},set:function(a){a!==this.mDefaultStyle.shadowBlur&&(this.mDefaultStyle.shadowBlur=a,this.setDirty(24,!1))}},shadowDistanceX:{configurable:!0,enumerable:!0,get:function(){return this.mDefaultStyle.shadowDistanceX},set:function(a){a!==this.mDefaultStyle.shadowDistanceX&&(this.mDefaultStyle.shadowDistanceX=a,this.setDirty(24,!1))}},shadowDistanceY:{configurable:!0,enumerable:!0,get:function(){return this.mDefaultStyle.shadowDistanceY},
set:function(a){a!==this.mDefaultStyle.shadowDistanceY&&(this.mDefaultStyle.shadowDistanceY=a,this.setDirty(24,!1))}},highQuality:{configurable:!0,enumerable:!0,get:function(){return this.mHighQuality},set:function(a){this.mHighQuality=a;this.setDirty(16,!1);this.setTransformDirty()}}});var Eb=function(a,b){b=void 0===b?"":b;var c=X.call(this)||this;c.mData=null!==a&&a.constructor===String?l.assets.getBitmapFont(a):a;c.mText=b;c.mAutoSize=!0;c.mMultiline=!1;c.mLineHeight=1.2;c.mBounds=new t;c.mTextBounds=
new t;c.mFieldWidth=0;c.mFieldHeight=0;return c};$jscomp.inherits(Eb,X);Eb.prototype.getRenderer=function(){return l.driver.getRenderer("BitmapText",this)};Eb.prototype.onGetLocalBounds=function(a){a=a||new t;if(null!==this.mClipRect)return this.mClipRect.copyTo(a),a;if(this.mDirty&16){var b=this.text;!1===this.mMultiline&&(b=b.replace(/\n/g,""));Pa.measureBitmap(b,this.mData,this.mLineHeight,this.mTextBounds)}!1===this.mAutoSize?(a.width=this.mFieldWidth,a.height=this.mFieldHeight):(a.width=this.mTextBounds.width,
a.height=this.mTextBounds.height);return a};$jscomp.global.Object.defineProperties(Eb.prototype,{multiline:{configurable:!0,enumerable:!0,set:function(a){this.mMultiline=a;this.setDirty(16,!1)},get:function(){return this.mMultiline}},lineHeight:{configurable:!0,enumerable:!0,set:function(a){this.mLineHeight=a;this.setDirty(16,!1)},get:function(){return this.mLineHeight}},fieldWidth:{configurable:!0,enumerable:!0,get:function(){return this.mFieldWidth},set:function(a){a!==this.mFieldWidth&&(this.mFieldWidth=
a,this.setDirty(16,!1))}},fieldHeight:{configurable:!0,enumerable:!0,get:function(){return this.mFieldHeight},set:function(a){a!==this.mFieldHeight&&(this.mFieldHeight=a,this.setDirty(16,!1))}},text:{configurable:!0,enumerable:!0,get:function(){return this.mText},set:function(a){this.mText!==a&&(this.mText=a,this.setDirty(16,!1))}},autoSize:{configurable:!0,enumerable:!0,get:function(){return this.mAutoSize},set:function(a){this.mAutoSize!==a&&(this.mAutoSize=a,this.setDirty(16,!1))}}});var ya=function(a,
b,c){b=void 0===b?NaN:b;c=void 0===c?null:c;this.color1=a;this.color2=isNaN(b)?a:b;this.ease=c;this.value=a;return this};$jscomp.inherits(ya,Ha);ya.prototype.getValueAt=function(a){null!==this.ease&&(a=this.ease(a));return this.value=this.color1===this.color2?this.color1:U.lerpHSV(this.color1,this.color2,a)};ya.fromObject=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];return b[0]instanceof ya?b[0]:new (Function.prototype.bind.apply(ya,[null].concat($jscomp.arrayFromIterable(b))))};
var ca=function(a,b,c,d){c=void 0===c?NaN:c;d=void 0===d?NaN:d;this.minX=a;this.minY=b;this.maxX=isNaN(c)?a:c;this.maxY=isNaN(d)?b:d;this.value=new k;return this};$jscomp.inherits(ca,Ha);ca.prototype.getValue=function(){this.value.x=Math.random()*(this.maxX-this.minX)+this.minX;this.value.y=Math.random()*(this.maxY-this.minY)+this.minY;return this.value};ca.prototype.getValueAt=function(a){this.value.x=this.minX+a*(this.maxX-this.minX);this.value.y=this.minY+a*(this.maxY-this.minY);return this.value};
ca.fromObject=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];return b[0]instanceof Ha?b[0]:new (Function.prototype.bind.apply(ca,[null].concat($jscomp.arrayFromIterable(b))))};var ac=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];this.mCurve=new S;this.mCurve.baked=!0;this.mCurve.set.apply(this.mCurve,$jscomp.arrayFromIterable(b));this.mCache=new k;return this};$jscomp.inherits(ac,Ha);ac.prototype.getValueAt=function(a){this.mCurve.interpolate(a,this.mCache);
return this.mCache};var Rb=function(a,b,c,d){d=void 0===d?NaN:d;return ca.call(this,a,b,c,d)||this};$jscomp.inherits(Rb,ca);Rb.prototype.getValue=function(){return this.getValueAt(Math.random())};Rb.prototype.getValueAt=function(a){var b=this.maxX+a*(this.maxY-this.maxX);a=2*Math.random()*Math.PI;b*=b;var c=this.minY+Math.sqrt(b)*Math.sin(a);this.value.x=this.minX+Math.sqrt(b)*Math.cos(a);this.value.y=c;return this.value};var bc=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];
this.mCurve=new S;this.mCurve.baked=!0;this.mCurve.set.apply(this.mCurve,$jscomp.arrayFromIterable(b));this.mCache=new k;return this};$jscomp.inherits(bc,Ha);bc.prototype.getValueAt=function(a){this.mCurve.interpolate(a,this.mCache);return this.mCache.y};var cc=function(a){var b,c=[];for(b=0;b<arguments.length;++b)c[b-0]=arguments[b];b=y.call(this,!1)||this;b.scatter=ca.fromObject.apply(ca,$jscomp.arrayFromIterable(c));return b};$jscomp.inherits(cc,y);cc.prototype.update=function(a,b,c){this.scatter.getValue();
b.ax+=this.scatter.value.x;b.ay+=this.scatter.value.y};var dc=function(a){var b,c=[];for(b=0;b<arguments.length;++b)c[b-0]=arguments[b];b=y.call(this,!1)||this;b.scatter=L.fromObject.apply(L,$jscomp.arrayFromIterable(c));return b};$jscomp.inherits(dc,y);dc.prototype.update=function(a,b,c){b.alpha=this.scatter.getValueAt(b.energy)};var ec=function(a){var b,c=[];for(b=0;b<arguments.length;++b)c[b-0]=arguments[b];b=y.call(this,!1)||this;b.scatter=ya.fromObject.apply(ya,$jscomp.arrayFromIterable(c));
return b};$jscomp.inherits(ec,y);ec.prototype.update=function(a,b,c){b.color=this.scatter.getValueAt(b.energy)};var fc=function(a){var b,c=[];for(b=0;b<arguments.length;++b)c[b-0]=arguments[b];b=y.call(this,!1)||this;b.scatter=L.fromObject.apply(L,$jscomp.arrayFromIterable(c));return b};$jscomp.inherits(fc,y);fc.prototype.update=function(a,b,c){b.scaleX=b.scaleY=this.scatter.getValueAt(b.energy)};var gc=function(a){var b,c=[];for(b=0;b<arguments.length;++b)c[b-0]=arguments[b];b=y.call(this,!1)||this;
b.scatter=L.fromObject.apply(L,$jscomp.arrayFromIterable(c));return b};$jscomp.inherits(gc,y);gc.prototype.update=function(a,b,c){b.r=this.scatter.getValueAt(b.energy)};var hc=function(a){var b,c=[];for(b=0;b<arguments.length;++b)c[b-0]=arguments[b];b=y.call(this,!1)||this;b.scatter=L.fromObject.apply(L,$jscomp.arrayFromIterable(c));return b};$jscomp.inherits(hc,y);hc.prototype.update=function(a,b,c){b.textureIndex=Math.round(this.scatter.getValueAt(b.energy))};var ic=function(a){var b,c=[];for(b=
0;b<arguments.length;++b)c[b-0]=arguments[b];b=y.call(this,!1)||this;b.scatter=ca.fromObject.apply(ca,$jscomp.arrayFromIterable(c));return b};$jscomp.inherits(ic,y);ic.prototype.update=function(a,b,c){this.scatter.getValueAt(b.energy);b.anchorX=this.scatter.value.x;b.anchorY=this.scatter.value.y};var jc=function(a){a=void 0===a?0:a;var b=y.call(this,!1)||this;b.mAngleShift=a;return b};$jscomp.inherits(jc,y);jc.prototype.update=function(a,b,c){b.r=(Math.atan2(b.vy,b.vx)*m.RAD2DEG-(90+this.mAngleShift))*
c};var ob=function(a,b,c,d,e){e=void 0===e?.1:e;var h=y.call(this,!1)||this;h.x=a;h.y=b;h.width=c;h.height=d;h.resolution=e;h.field=[];h.widthScaled=Math.floor(h.width*h.resolution);h.heightScaled=Math.floor(h.height*h.resolution);h.reset();return h};$jscomp.inherits(ob,y);ob.prototype.reset=function(){this.field.splice(0,this.field.length);for(var a=0;a<this.heightScaled;a++)for(var b=0;b<this.widthScaled;b++)this.field.push(new k(0,0))};ob.prototype.setData=function(a){for(var b=0;b<this.heightScaled;b++)for(var c=
0;c<this.widthScaled;c++)a(c,b,this.field[c+b*this.widthScaled])};ob.prototype.getVectorAt=function(a,b){a=Math.floor(a*this.resolution);b=Math.floor(b*this.resolution);a=~~(a+b*this.widthScaled);return 0>a||a>=this.field.length?null:this.field[a]};ob.prototype.update=function(a,b,c){a=this.getVectorAt(b.x,b.y);null!==a&&(b.ax=a.x,b.ay=a.y)};var kc=function(a){var b,c=[];for(b=0;b<arguments.length;++b)c[b-0]=arguments[b];b=y.call(this)||this;b.scatter=L.fromObject.apply(L,$jscomp.arrayFromIterable(c));
return b};$jscomp.inherits(kc,y);kc.prototype.update=function(a,b,c){b.life=this.scatter.getValue()};var lc=function(a){var b,c=[];for(b=0;b<arguments.length;++b)c[b-0]=arguments[b];b=y.call(this)||this;b.scatter=L.fromObject.apply(L,$jscomp.arrayFromIterable(c));return b};$jscomp.inherits(lc,y);lc.prototype.update=function(a,b,c){b.mass=this.scatter.getValue()};var mc=function(a){var b,c=[];for(b=0;b<arguments.length;++b)c[b-0]=arguments[b];b=y.call(this)||this;b.scatter=L.fromObject.apply(L,$jscomp.arrayFromIterable(c));
return b};$jscomp.inherits(mc,y);mc.prototype.update=function(a,b,c){b.scaleX=b.scaleY=this.scatter.getValue()};var nc=function(a){var b,c=[];for(b=0;b<arguments.length;++b)c[b-0]=arguments[b];b=y.call(this)||this;b.scatter=ca.fromObject.apply(ca,$jscomp.arrayFromIterable(c));return b};$jscomp.inherits(nc,y);nc.prototype.update=function(a,b,c){this.scatter.getValue();b.vx=this.scatter.value.x;b.vy=this.scatter.value.y};var oc=function(a){var b,c=[];for(b=0;b<arguments.length;++b)c[b-0]=arguments[b];
b=y.call(this)||this;b.scatter=ca.fromObject.apply(ca,$jscomp.arrayFromIterable(c));return b};$jscomp.inherits(oc,y);oc.prototype.update=function(a,b,c){a=this.scatter.getValue();b.x=a.x;b.y=a.y};var pc=function(a){var b,c=[];for(b=0;b<arguments.length;++b)c[b-0]=arguments[b];b=y.call(this)||this;b.scatter=L.fromObject.apply(L,$jscomp.arrayFromIterable(c));return b};$jscomp.inherits(pc,y);pc.prototype.update=function(a,b,c){b.r=this.scatter.getValue()};var qc=function(a){var b,c=[];for(b=0;b<arguments.length;++b)c[b-
0]=arguments[b];b=y.call(this)||this;b.scatter=L.fromObject.apply(L,$jscomp.arrayFromIterable(c));return b};$jscomp.inherits(qc,y);qc.prototype.update=function(a,b,c){b.textureIndex=Math.round(this.scatter.getValue())};var rc=function(a){var b,c=[];for(b=0;b<arguments.length;++b)c[b-0]=arguments[b];b=y.call(this)||this;b.scatter=ya.fromObject.apply(ya,$jscomp.arrayFromIterable(c));return b};$jscomp.inherits(rc,y);rc.prototype.update=function(a,b,c){b.color=this.scatter.getValue()};var sc=function(a){var b,
c=[];for(b=0;b<arguments.length;++b)c[b-0]=arguments[b];b=y.call(this)||this;b.scatter=ca.fromObject.apply(ca,$jscomp.arrayFromIterable(c));return b};$jscomp.inherits(sc,y);sc.prototype.update=function(a,b,c){a=this.scatter.getValue();b.anchorX=a.x;b.anchorY=a.y};var F=function(){};F.linear=function(a){return a};F.quadraticIn=function(a){return a*a};F.quadraticOut=function(a){return a*(2-a)};F.quadraticInOut=function(a){return 1>(a*=2)?.5*a*a:-.5*(--a*(a-2)-1)};F.cubicIn=function(a){return a*a*a};
F.cubicOut=function(a){return--a*a*a+1};F.cubicInOut=function(a){return 1>(a*=2)?.5*a*a*a:.5*((a-=2)*a*a+2)};F.quarticIn=function(a){return a*a*a*a};F.quarticOut=function(a){return 1- --a*a*a*a};F.quarticInOut=function(a){return 1>(a*=2)?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)};F.quinticIn=function(a){return a*a*a*a*a};F.quinticOut=function(a){return--a*a*a*a*a+1};F.quinticInOut=function(a){return 1>(a*=2)?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)};F.sinusoidalIn=function(a){return 1-Math.cos(a*Math.PI/2)};F.sinusoidalOut=
function(a){return Math.sin(a*Math.PI/2)};F.sinusoidalInOut=function(a){return.5*(1-Math.cos(Math.PI*a))};F.exponentialIn=function(a){return 0===a?0:Math.pow(1024,a-1)};F.exponentialOut=function(a){return 1===a?1:1-Math.pow(2,-10*a)};F.exponentialInOut=function(a){return 0===a?0:1===a?1:1>(a*=2)?.5*Math.pow(1024,a-1):.5*(-Math.pow(2,-10*(a-1))+2)};F.circularIn=function(a){return 1-Math.sqrt(1-a*a)};F.circularOut=function(a){return Math.sqrt(1- --a*a)};F.circularInOut=function(a){return 1>(a*=2)?-.5*
(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)};F.elasticIn=function(a){return 0===a?0:1===a?1:-Math.pow(2,10*(a-1))*Math.sin(5*(a-1.1)*Math.PI)};F.elasticOut=function(a){return 0===a?0:1===a?1:Math.pow(2,-10*a)*Math.sin(5*(a-.1)*Math.PI)+1};F.elasticInOut=function(a){if(0===a)return 0;if(1===a)return 1;a*=2;return 1>a?-.5*Math.pow(2,10*(a-1))*Math.sin(5*(a-1.1)*Math.PI):.5*Math.pow(2,-10*(a-1))*Math.sin(5*(a-1.1)*Math.PI)+1};F.backIn=function(a){return a*a*(2.70158*a-1.70158)};F.backOut=function(a){return--a*
a*(2.70158*a+1.70158)+1};F.backInOut=function(a){return 1>(a*=2)?.5*a*a*(3.5949095*a-2.5949095):.5*((a-=2)*a*(3.5949095*a+2.5949095)+2)};F.bounceIn=function(a){return 1-F.bounceOut(1-a)};F.bounceOut=function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375};F.bounceInOut=function(a){return.5>a?.5*F.bounceIn(2*a):.5*F.bounceOut(2*a-1)+.5};F.smootherStep=function(a){return a*a*a*(a*(6*a-15)+10)};var Ja=function(){};
Ja.linear=function(a,b,c){var d=a.length-1,e=d*b,h=Math.floor(e);c=c||m.lerp;return 0>b?c(a[0],a[1],e):1<b?c(a[d],a[d-1],d-e):c(a[h],a[h+1>d?d:h+1],e-h)};Ja.bezier=function(a,b){for(var c=0,d=a.length,e=Math.pow,h=0;h<d;h++){var f=e(1-b,d-h)*e(b,h)*a[h];var g=d;var l=h,k=Ja.__factorial;g=k(g)/k(l)/k(g-l);c+=f*g}return c};Ja.catmullRom=function(a,b){var c=a.length-1,d=c*b,e=Math.floor(d),h=function(a,b,c,d,e){a=.5*(c-a);d=.5*(d-b);var h=e*e;return(2*(b-c)+a+d)*e*h+(3*(c-b)-2*a-d)*h+a*e+b};return a[0]===
a[c]?(0>b&&(e=Math.floor(d=c*(1+b))),h(a[(e-1+c)%c],a[e],a[(e+1)%c],a[(e+2)%c],d-e)):0>b?a[0]-(h(a[0],a[0],a[1],a[1],-d)-a[0]):1<b?a[c]-(h(a[c],a[c],a[c-1],a[c-1],d-c)-a[c]):h(a[e?e-1:0],a[e],a[c<e+1?c:e+1],a[c<e+2?c:e+2],d-e)};Ja.__factorial=function(){var a=[1];return function(b){if(a[b])return a[b];for(var c=b;--b;)c*=b;return a[b]=c}}();var tc=F.smootherStep,Y=function(a,b,c,d){b=void 0===b?.25:b;c=void 0===c?null:c;d=void 0===d?null:d;var e=N.call(this)||this;e.mValues=a;e.mDuration=b;e.mProperties=
c;e.mPlugins=d;e.mIsPlaying=!1;e.mIsPaused=!1;e.mStartTime=0;e.mPausedTime=0;e.mValuesStart={};e.mElapsed=0;e.mInterpolation=Ja.linear;e.mDelay=0;e.mRepeatDelay=0;e.mRepeats=0;e.mInitiated=!1;e.mStarted=!1;e.mReversed=!1;e.mYoyo=!1;e.mIsYoyoBack=!1;e.mReverseOnInit=!1;e.mRemoveOnComplete=!0;e.mPlayOnAdded=!0;e.mEase=tc;if(null!==e.mProperties)for(var h in e.mProperties)e[h]=e.mProperties[h];return e};$jscomp.inherits(Y,N);Y.prototype.__start=function(a){this.mIsPlaying=!0;this.mStartTime=a+this.mDelay};
Y.prototype.play=function(){this.mIsPaused?this.__resume():this.__start(l.time.now);return this};Y.prototype.stop=function(){if(!this.mIsPlaying)return this;this.mIsPlaying=!1;return this};Y.prototype.reset=function(){this.mElapsed=0;this.mIsPlaying&&this.play();return this};Y.prototype.to=function(a,b){this.mValues=a=void 0===a?{}:a;this.mDuration=void 0===b?.25:b;this.mInitiated=!1;return this};Y.prototype.pause=function(){if(!this.mIsPlaying)return this;this.mIsPaused=!0;this.mPausedTime=l.time.now;
return this};Y.prototype.__resume=function(){this.mIsPaused&&(this.mIsPaused=!1,this.mStartTime+=l.time.now-this.mPausedTime)};Y.prototype.removeFromParent=function(){this.mIsPlaying&&this.stop();N.prototype.removeFromParent.call(this)};Y.prototype.chain=function(a){if(!a)return this;this.mRemoveOnComplete=!1;a.playOnAdded=!1;this.on(E.COMPLETE,function(){a.play()});return a};Y.prototype.onAdded=function(a){this.mPlayOnAdded&&this.__start(l.time.now)};Y.prototype.__update=function(a){};Y.prototype.set=
function(a){this.mValues=a;for(var b in this.mValues)this.mValuesStart[b]=parseFloat(this.gameObject[b])};Y.prototype.reverse=function(a){a=void 0===a?!1:a;this.mInitiated?this.__reverse():this.mReverseOnInit=!0;a&&(this.mIsYoyoBack=!this.mIsYoyoBack);return this};Y.prototype.__reverse=function(){for(var a in this.mValues){var b=$jscomp.makeIterator([this.mValuesStart[a],this.mValues[a]]);this.mValues[a]=b.next().value;this.mValuesStart[a]=b.next().value}};Y.prototype.onRender=function(){if(0===l.engine.numUpdates){var a=
l.time.now;if(!(a<this.mStartTime||!1===this.mIsPlaying||!0===this.mIsPaused)&&!1!==this.mStarted&&!1!==this.mInitiated){this.mElapsed=(a-this.mStartTime)/this.mDuration;1<this.mElapsed&&(this.mElapsed=1);a=this.mEase(this.mIsYoyoBack?1-this.mElapsed:this.mElapsed);for(var b in this.mValues){var c=this.mValuesStart[b],d=this.mValues[b];null!==this.mPlugins&&this.mPlugins.hasOwnProperty(b)?(c=Array.isArray(d)?d:[c,d],this.gameObject[b]=Ja.linear(c,a,this.mPlugins[b])):Array.isArray(d)?this.gameObject[b]=
this.mInterpolation(d,a):this.gameObject[b]=c+(d-c)*(this.mIsYoyoBack?1-a:a)}}}};Y.prototype.onUpdate=function(){var a=l.time.now;if(!(a<this.mStartTime||!1===this.mIsPlaying||!0===this.mIsPaused)){this.__collectStartingValues();this.mElapsed=(a-this.mStartTime)/this.mDuration;1<this.mElapsed&&(this.mElapsed=1);var b=this.mEase(this.mIsYoyoBack?1-this.mElapsed:this.mElapsed),c;for(c in this.mValues){var d=this.mValuesStart[c],e=this.mValues[c];null!==this.mPlugins&&this.mPlugins.hasOwnProperty(c)?
(d=Array.isArray(e)?e:[d,e],this.gameObject[c]=Ja.linear(d,b,this.mPlugins[c])):Array.isArray(e)?this.gameObject[c]=this.mInterpolation(e,b):this.gameObject[c]=d+(e-d)*(this.mIsYoyoBack?1-b:b)}this.post(E.UPDATE,this.gameObject);if(1===this.mElapsed)if(0<this.mRepeats--)!0===this.mYoyo&&this.reverse(!0),this.mStartTime=a+this.mRepeatDelay,this.post("loop",this.gameObject);else if(this.mIsPlaying=!1,this.post(E.COMPLETE,this.gameObject),this.mRemoveOnComplete)this.removeFromParent();else{for(var h in this.mValues)this.mValuesStart[h]=
this.mValues[h];this.mStarted=!1}}};Y.prototype.__collectStartingValues=function(){if(!1===this.mStarted){this.mStarted=!0;this.post("start",this.gameObject);for(var a in this.mValues)!this.mInitiated&&Array.isArray(this.mValues[a])&&(this.mValues[a]=[this.gameObject[a]].concat(this.mValues[a])),this.mValuesStart[a]=parseFloat(this.gameObject[a]);!0!==this.mReversed&&!0!==this.mReverseOnInit||this.__reverse();this.mInitiated=!0}};$jscomp.global.Object.defineProperties(Y.prototype,{ease:{configurable:!0,
enumerable:!0,get:function(){return this.mEase},set:function(a){this.mEase=a}},interpolation:{configurable:!0,enumerable:!0,get:function(){return this.mInterpolation},set:function(a){this.mInterpolation=a}},elapsed:{configurable:!0,enumerable:!0,get:function(){return this.mElapsed}},delay:{configurable:!0,enumerable:!0,get:function(){return this.mDelay},set:function(a){this.mDelay=a}},repeats:{configurable:!0,enumerable:!0,get:function(){return this.mRepeats},set:function(a){this.mRepeats=a}},repeatDelay:{configurable:!0,
enumerable:!0,get:function(){return this.mRepeatDelay},set:function(a){this.mRepeatDelay=a}},loop:{configurable:!0,enumerable:!0,get:function(){return Infinity===this.mRepeats},set:function(a){this.mRepeats=a?Infinity:0}},yoyo:{configurable:!0,enumerable:!0,get:function(){return this.mYoyo},set:function(a){this.mYoyo=a}},reversed:{configurable:!0,enumerable:!0,get:function(){return this.mReversed},set:function(a){this.mReversed=a}},removeOnComplete:{configurable:!0,enumerable:!0,get:function(){return this.mRemoveOnComplete},
set:function(a){this.mRemoveOnComplete=a}},playOnAdded:{configurable:!0,enumerable:!0,get:function(){return this.mPlayOnAdded},set:function(a){this.mPlayOnAdded=a}},plugins:{configurable:!0,enumerable:!0,get:function(){return this.mPlugins},set:function(a){this.mPlugins=a}},duration:{configurable:!0,enumerable:!0,get:function(){return this.mDuration}},isPlaying:{configurable:!0,enumerable:!0,get:function(){return!0===this.mIsPlaying&&!1===this.mIsPaused}}});$jscomp.global.Object.defineProperties(Y,
{defaultEase:{configurable:!0,enumerable:!0,get:function(){return tc},set:function(a){tc=a}}});var ab=function(a,b,c,d,e){d=void 0===d?14:d;e=void 0===e?!0:e;g.assert(0<d,"FPS must be greater than 0.");this.mController=a;this.mName=b;this.mFrames=c;this.mNextFrameAt=this.mCurrentFrame=0;this.mFPS=d;this.mFrameDuration=1/this.mFPS;this.mLoop=e;this.mPaused=!1;this.mElapsed=0;this.mCompleted=this.mStopped=!1};ab.prototype.__play=function(){!0===this.mCompleted&&(this.mElapsed=this.mCurrentFrame=0);
this.mCompleted=this.mStopped=this.mPaused=!1;this.mNextFrameAt=l.time.now+this.mFrameDuration-this.mElapsed;this.mElapsed=0;return this.mFrames[this.mCurrentFrame]};ab.prototype.__stop=function(){this.mStopped=!0;this.mCurrentFrame=0};ab.prototype.__pause=function(){this.mPaused=!0;this.mElapsed=this.mNextFrameAt-l.time.now};ab.prototype.__update=function(){if(l.time.now<this.mNextFrameAt||!0===this.mPaused||!0===this.mStopped||!0===this.mCompleted)return null;this.mCurrentFrame++;if(this.mCurrentFrame>=
this.mFrames.length)if(!0===this.mLoop)this.mCurrentFrame=0;else return this.mCurrentFrame=this.mFrames.length-1,this.mController.post(E.COMPLETE,this),this.mCompleted=!0,null;this.mNextFrameAt=l.time.now+this.mFrameDuration;return this.mFrames[this.mCurrentFrame]};$jscomp.global.Object.defineProperties(ab.prototype,{fps:{configurable:!0,enumerable:!0,get:function(){return this.mFPS},set:function(a){g.assert(0<a,"FPS must be greater than 0.");this.mFPS=a;this.mFrameDuration=1/this.mFPS;this.mNextFrameAt+=
this.mNextFrameAt-l.time.now}},loop:{configurable:!0,enumerable:!0,get:function(){return this.mLoop},set:function(a){this.mLoop=a}},frames:{configurable:!0,enumerable:!0,get:function(){return this.mFrames}},isPlaying:{configurable:!0,enumerable:!0,get:function(){return!1===this.mPaused&&!1===this.mStopped}},isComplete:{configurable:!0,enumerable:!0,get:function(){return this.mCompleted}},name:{configurable:!0,enumerable:!0,get:function(){return this.mName}}});var za=function(){var a=N.call(this)||
this;a.mAnimations={};a.mCurrentAnim=null;return a};$jscomp.inherits(za,N);za.prototype.getByName=function(a){g.assert(null!==a,"Animation must be set first.");g.assert(this.mAnimations.hasOwnProperty(a),"Animation must be set first.");return this.mAnimations[a]};za.prototype.remove=function(a){g.assert(null!==a,"Animation name shall not be null.");g.assert(!0===this.mAnimations.hasOwnProperty(a),"Unable to find animation.");var b=this.mAnimations[a];null!==this.mCurrentAnim&&this.mCurrentAnim===
b&&(this.stop(),delete this.mAnimations[a]);this.mCurrentAnim=null};za.prototype.add=function(a,b,c,d){c=void 0===c?14:c;d=void 0===d?!0:d;g.assert(0<b.length,"Animation cannot be empty.");g.assert(0<c,"FPS must be greater than 0.");g.assert(0==this.mAnimations.hasOwnProperty(a),"Animation with same name already exists");b=new ab(this,a,b,c,d);return this.mAnimations[a]=b};za.prototype.play=function(a){g.assert(this.mAnimations.hasOwnProperty(a),"Animation must be set first.");this.mCurrentAnim=this.mAnimations[a];
a=this.mCurrentAnim.__play();var b=this.gameObject;null!==b&&null!==a&&(b.texture=a)};za.prototype.stop=function(){null!==this.mCurrentAnim&&this.mCurrentAnim.__stop()};za.prototype.pause=function(){null!==this.mCurrentAnim&&this.mCurrentAnim.__pause()};za.prototype.onRender=function(){if(null!==this.mCurrentAnim){var a=this.mCurrentAnim.__update();null!==a&&(this.gameObject.texture=a)}};$jscomp.global.Object.defineProperties(za.prototype,{currentAnimation:{configurable:!0,enumerable:!0,get:function(){return this.mCurrentAnim}}});
var Sb=function(a){a=void 0===a?.5:a;var b=wa.call(this)||this;b.mWaveShaperNode=l.audio.context.createWaveShaper();b.mInputNode=b.mWaveShaperNode;b.mOutputNode=b.mWaveShaperNode;b.mSamples=44100;b.mCurve=new Float32Array(b.mSamples);b.mValue=a;b.distortion=a;return b};$jscomp.inherits(Sb,wa);Sb.prototype.__makeDistortionCurve=function(a,b,c){a=~~(100*a);for(var d=Math.PI/180,e,h=0;h<b;++h)e=2*h/b-1,c[h]=(3+a)*e*20*d/(Math.PI+a*Math.abs(e));return c};$jscomp.global.Object.defineProperties(Sb.prototype,
{distortion:{configurable:!0,enumerable:!0,set:function(a){this.mValue=m.clamp(a,0,1);this.__makeDistortionCurve(this.mValue,this.mSamples,this.mCurve);this.mWaveShaperNode.curve=this.mCurve},get:function(){return this.mValue}}});var Wa=function(a){var b=[];for(var c=0;c<arguments.length;++c)b[c-0]=arguments[c];c=b;b=wa.call(this)||this;c=c||[60,170,310,600,1E3,3E3,6E3,12E3,14E3,16E3];b.mFilters=[];for(var d=0;d<c.length;d++)b.mFilters.push(b.__createFilter(c[d])),0<d&&b.mFilters[d-1].connect(b.mFilters[d]);
b.mInputNode=b.mFilters[0];b.mOutputNode=b.mFilters[b.mFilters.length-1];b.mMaxGainLevel=16;b.mPresets={};return b};$jscomp.inherits(Wa,wa);Wa.prototype.__createFilter=function(a){var b=l.audio.context.createBiquadFilter();b.type="peaking";b.frequency.setValueAtTime(a,0);b.Q.setValueAtTime(1,0);b.gain.setValueAtTime(0,0);return b};Wa.prototype.setLevelByIndex=function(a,b){g.assert(0<=a&&a<this.mFilters.length,"Frequency index is out of range");0>a||a>=this.mFilters.length||(b=m.clamp(b,-1,1),b*=
this.mMaxGainLevel,this.mFilters[a].gain.setValueAtTime(b,0))};Wa.prototype.setLevelByFrequency=function(a,b){for(var c=0;c<this.mFilters.length;c++)this.mFilters[c].frequency.value===a&&this.setLevelByIndex(c,b)};Wa.prototype.addPreset=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];g.assert(c.length!=this.mFilters.length,"Number of preset values must be equal to frequencies number");this.mPresets[a]=c};Wa.prototype.savePreset=function(a){var b=this;this.mPresets[a]=[];
this.mFilters.forEach(function(c){return b.mPresets[a].push(c.frequency.value/b.mMaxGainLevel)})};Wa.prototype.applyPreset=function(a){if(null!==this.mPresets[a])for(var b=0;b<this.mPresets[a].length;b++)this.setLevelByIndex(b,this.mPresets[a][b])};var uc=function(a){var b=wa.call(this)||this;b.mInputNode=l.audio._newGainNode();b.mOutputNode=l.audio._newGainNode();b.mConvolver=l.audio.context.createConvolver();b.mDry=l.audio._newGainNode();b.mWet=l.audio._newGainNode();b.mTone=l.audio.context.createBiquadFilter();
b.mConvolver.buffer=a;b.mInputNode.connect(b.mDry);b.mDry.connect(b.mOutputNode);b.mInputNode.connect(b.mTone);b.mTone.connect(b.mConvolver);b.mConvolver.connect(b.mWet);b.mWet.connect(b.mOutputNode);b.mDry.gain.setValueAtTime(1,0);b.mWet.gain.setValueAtTime(0,0);b.mTone.type="lowpass";b.mTone.frequency.setValueAtTime(350,0);b.mTone.Q.setValueAtTime(Math.SQRT1_2,0);return b};$jscomp.inherits(uc,wa);$jscomp.global.Object.defineProperties(uc.prototype,{wet:{configurable:!0,enumerable:!0,set:function(a){a=
m.clamp(a,0,1);this.mWet.gain.setValueAtTime(a,0)},get:function(){return this.mWet.gain.value}},dry:{configurable:!0,enumerable:!0,set:function(a){a=m.clamp(a,0,1);this.mDry.gain.setValueAtTime(a,0)},get:function(){return this.mDry.gain.value}},tone:{configurable:!0,enumerable:!0,set:function(a){a=m.clamp(a,10,l.audio.context.sampleRate/2);this.mTone.frequency.setValueAtTime(a,0)},get:function(){return this.mTone.frequency.value}}});var Ka=function(a,b,c,d){b=void 0===b?"master":b;c=void 0===c?!1:
c;d=void 0===d?100:d;var e=N.call(this)||this;e.mSoundClip=l.assets.getSound(a);e.mRolloff=d;e.mPlayOnAdded=!0;e.mStopOnRemove=!0;e.mSoundInstance=null;e.mCompleteBinding=null;e.mSpatialEffect=c;e.mChannelName=b;return e};$jscomp.inherits(Ka,N);Ka.prototype.play=function(a,b,c){a=void 0===a?1:a;b=void 0===b?!1:b;(c=void 0===c?!1:c)&&this.mSoundInstance&&this.stop();if(!this.mSoundInstance||c)this.mSoundInstance=this.mSoundClip.play(this.mChannelName,a,b),this.mCompleteBinding=this.mSoundInstance.on(E.COMPLETE,
this.__onSoundComplete,this),this.spatialEffect=this.mSpatialEffect;return this.mSoundInstance};Ka.prototype.stop=function(){this.mSoundInstance&&(this.mCompleteBinding.off(),this.mSoundInstance.stop(),this.mSoundInstance=null)};Ka.prototype.__onSoundComplete=function(){this.mSoundInstance=null};Ka.prototype.onAdded=function(a){this.mPlayOnAdded&&this.play()};Ka.prototype.onRemoved=function(a){this.mStopOnRemove&&this.mSoundInstance&&this.mSoundInstance.stop()};Ka.prototype.onUpdate=function(){if(this.mSpatialEffect&&
null!=this.mSoundInstance&&!0===this.mSoundInstance.isPlaying){var a=l.stage,b=this.gameObject.localToGlobal(a.globalToLocal(new k(this.gameObject.pivotX,this.gameObject.pivotY)));this.mSoundInstance.mSpatialPanner.setPosition((b.x-a.centerX)/a.width*2,(b.y-a.centerY)/a.height*2,0)}};$jscomp.global.Object.defineProperties(Ka.prototype,{playOnAdded:{configurable:!0,enumerable:!0,set:function(a){this.mPlayOnAdded=a},get:function(){return this.mPlayOnAdded}},stopOnRemove:{configurable:!0,enumerable:!0,
set:function(a){this.mStopOnRemove=a},get:function(){return this.mStopOnRemove}},spatialEffect:{configurable:!0,enumerable:!0,set:function(a){(this.mSpatialEffect=a)&&null!=this.mSoundInstance&&!0===this.mSoundInstance.isPlaying&&(a=this.mSoundInstance.enableSpacePan(),a.rolloffFactor=this.mRolloff,a.refDistance=1,a.distanceModel="inverse")},get:function(){return this.mSpatialEffect}}});var oa=function(){var a=N.call(this)||this;a.mCollider=new la(0,0,0,0);a.mInGroup=!1;a.mIsSleeping=!1;a.mSleepTime=
0;a.mContacts=[];a.mPivot=new k(Number.MAX_VALUE);a.mCachedPosition=new k;a.mPairs=[];a.mIsStatic=!1;a.mPosition=new k;a.mVelocity=new k;a.mForce=new k;a.mTransform=new r(Number.MAX_VALUE);a.mMass=1;a.mInvMass=1;a.frictionAir=.01;a.friction=.1;a.bounce=.1;return a};$jscomp.inherits(oa,N);oa.prototype.update=function(){var a=this.gameObject,b=a.mCollidersCache,c=this.mCollider,d=this.mPosition,e=a.worldTransformation,h=e.data,f=this.mTransform;if(f.data[0]!==h[0]||f.data[2]!==h[2]){f.set(h[0],h[1],
h[2],h[3],0,0);c.mChanged=!0;h=0;for(var g=b.length;h<g;h++)b[h].mChanged=!0}if(a!==l.stage){h=this.mCachedPosition;g=h.x;var k=h.y;e.transformXY(a.pivotX,a.pivotY,h);d.x+=h.x-g;d.y+=h.y-k;a.parent.globalToLocal(d,h);a.x=h.x;a.y=h.y;a.worldTransformation.transformXY(a.pivotX,a.pivotY,h)}if(0===b.length)b=a.localBounds,a instanceof X?null!==a.mClipRect?c.set(0,0,b.width,b.height):c.set(-a.pivotX,-a.pivotY,b.width,b.height):c.set(-a.pivotX,-a.pivotY,b.width,b.height),c.refresh(f,d);else for(a=0,c=b.length;a<
c;a++)b[a].refresh(f,d)};oa.prototype.clearFlags=function(){var a=this.gameObject.mCollidersCache;this.mCollider.mChanged=!1;for(var b=0,c=a.length;b<c;b++)a[b].mChanged=!1};$jscomp.global.Object.defineProperties(oa.prototype,{mass:{configurable:!0,enumerable:!0,get:function(){return this.mMass},set:function(a){this.mMass=a;this.mInvMass=0===a||this.mIsStatic?0:1/a}},isStatic:{configurable:!0,enumerable:!0,get:function(){return this.mIsStatic},set:function(a){this.mIsStatic=a;this.mass=this.mMass}},
x:{configurable:!0,enumerable:!0,set:function(a){this.mPosition.x=a},get:function(){return this.mPosition.x}},y:{configurable:!0,enumerable:!0,set:function(a){this.mPosition.y=a},get:function(){return this.mPosition.y}},forceX:{configurable:!0,enumerable:!0,set:function(a){this.mIsSleeping=!1;this.mForce.x=a},get:function(){return this.mForce.x}},forceY:{configurable:!0,enumerable:!0,set:function(a){this.mIsSleeping=!1;this.mForce.y=a},get:function(){return this.mForce.y}},velocityX:{configurable:!0,
enumerable:!0,set:function(a){this.mVelocity.x=a},get:function(){return this.mVelocity.x}},velocityY:{configurable:!0,enumerable:!0,set:function(a){this.mVelocity.y=a},get:function(){return this.mVelocity.y}}});var bb=function(){this.verticesB=this.verticesA=this.axis=null;this.rangeA=new vc;this.rangeB=new vc;this.offset=0};bb.prototype.set=function(a,b,c){this.verticesA=a;this.verticesB=b;this.axis=c;this.refresh()};bb.prototype.refresh=function(){bb.__project(this.verticesA,this.axis,this.rangeA);
bb.__project(this.verticesB,this.axis,this.rangeB)};bb.__project=function(a,b,c){for(var d=Number.MAX_VALUE,e=-Number.MAX_VALUE,f=0,g=a.length;f<g;f++){var l=a[f].dot(b);d=l<d?l:d;e=l>e?l:e}c.min=d;c.max=e};var vc=function(){this.max=this.min=0},Kc=5,Lc=1,Mc=.2,Nc=1,Oc=.1,Pc=1,T=function(){this.bodyB=this.bodyA=this.b=this.a=null;this.mIsStatic=this.mInCollision=!1;this.mMass=this.mBias=this.mFriction=this.mPositionImpulse=this.mTangentImpulse=this.mNormalImpulse=0;this.mOffset=new k;this.mNormal=
new k;this.mOverlap=0;this.mChanged=!1};T.prototype.test=function(){return this.mInCollision};T.prototype.preSolve=function(){var a=this.mNormal.x,b=this.mNormal.y,c=this.bodyA.mPosition,d=this.bodyB.mPosition,e=this.bodyA.mVelocity,f=this.bodyB.mVelocity,g=this.bodyA.mInvMass,k=this.bodyB.mInvMass,m=this.mOffset,q=this.mNormalImpulse*a+this.mTangentImpulse*-b,r=this.mNormalImpulse*b+this.mTangentImpulse*+a;m.x=d.x-c.x;m.y=d.y-c.y;e.x-=q*g;e.y-=r*g;f.x+=q*k;f.y+=r*k;a=(f.x-e.x)*a+(f.y-e.y)*b;this.mBias=
a<-(T.bounceTreshhold*T.unitsPerMeter*l.stage.mScaleX)?-Math.max(this.bodyA.bounce,this.bodyB.bounce)*a:0;this.mMass=1/(g+k);this.mFriction=Math.min(this.bodyA.friction,this.bodyB.friction);this.mPositionImpulse=0};T.prototype.solveVelocity=function(){var a=this.mNormal.x,b=this.mNormal.y,c=-b,d=+a,e=this.bodyA.mVelocity,f=this.bodyB.mVelocity,g=this.bodyA.mInvMass,l=this.bodyB.mInvMass,k=-((f.x-e.x)*a+(f.y-e.y)*b-this.mBias)*this.mMass,q=Math.max(this.mNormalImpulse+k,0);k=q-this.mNormalImpulse;
this.mNormalImpulse=q;a*=k;b*=k;e.x-=a*g;e.y-=b*g;f.x+=a*l;f.y+=b*l;b=-((f.x-e.x)*c+(f.y-e.y)*d)*this.mMass;k=this.mFriction*this.mNormalImpulse;k=m.clamp(this.mTangentImpulse+b,-k,k);b=k-this.mTangentImpulse;this.mTangentImpulse=k;c*=b;d*=b;e.x-=c*g;e.y-=d*g;f.x+=c*l;f.y+=d*l};T.prototype.solvePosition=function(){var a=this.mNormal.x,b=this.mNormal.y,c=this.bodyA.mInvMass,d=this.bodyB.mInvMass,e=this.bodyA.mPosition,f=this.bodyB.mPosition,g=this.mOffset;g=(this.mOverlap+((g.x-f.x+e.x)*a+(g.y-f.y+
e.y)*b)-T.slop)*T.baumgarte;if(!(0>=g)){g*=this.mMass;var l=this.mPositionImpulse;this.mPositionImpulse=Math.max(l+g,0);g=this.mPositionImpulse-l;a*=g;b*=g;e.x-=a*c;e.y-=b*c;f.x+=a*d;f.y+=b*d}};T.__id=function(a,b){return a.mId>b.mId?a.mId+"&"+b.mId:b.mId+"&"+a.mId};$jscomp.global.Object.defineProperties(T,{timeToSleep:{configurable:!0,enumerable:!0,get:function(){return Kc},set:function(a){Kc=a}},slop:{configurable:!0,enumerable:!0,get:function(){return Lc},set:function(a){Lc=a}},baumgarte:{configurable:!0,
enumerable:!0,get:function(){return Mc},set:function(a){Mc=a}},unitsPerMeter:{configurable:!0,enumerable:!0,get:function(){return Nc},set:function(a){Nc=a}},sleepThreshold:{configurable:!0,enumerable:!0,get:function(){return Oc},set:function(a){Oc=a}},bounceTreshhold:{configurable:!0,enumerable:!0,get:function(){return Pc},set:function(a){Pc=a}}});var wc,Aa=function(){var a=T.call(this)||this;a.a=null;a.b=null;for(var b=[],c=0;4>c;c++)b.push(new bb);a.mProjections=b;return a};$jscomp.inherits(Aa,
T);Aa.prototype.set=function(a,b,c,d){this.a=a;this.b=b;this.bodyA=c;this.bodyB=d;c=this.mProjections;for(var e=d=0;4>d;d+=2,e+=1)c[d].set(a.mVertices,b.mVertices,a.mNormals[e]),c[d+1].set(a.mVertices,b.mVertices,b.mNormals[e]);return this};Aa.prototype.__refreshProjectionsRanges=function(){for(var a=this.mProjections,b=0;4>b;b++)a[b].refresh()};Aa.prototype.test=function(){var a=this.a,b=this.b;if(a.mChanged||b.mChanged)this.mChanged=!0;if(a.mMax.x<b.mMin.x||a.mMin.x>b.mMax.x||a.mMax.y<b.mMin.y||
a.mMin.y>b.mMax.y)return this.mInCollision=!1;a=this.mProjections;b=this.mNormal;var c=this.bodyB.mPosition.x-this.bodyA.mPosition.x,d=this.bodyB.mPosition.y-this.bodyA.mPosition.y;this.mChanged&&(this.mChanged=!1,this.__refreshProjectionsRanges());this.mOverlap=Number.MAX_VALUE;for(var e=0;4>e;e++){var f=a[e];f.offset=f.axis.x*c+f.axis.y*d;var g=f.rangeA.max,l=f.rangeB.min+f.offset;if(f.rangeA.min>f.rangeB.max+f.offset||l>g)return this.mInCollision=!1}for(c=0;4>c;c++){d=a[c];e=d.rangeA.min;f=d.rangeA.max;
g=d.rangeB.min+d.offset;l=d.rangeB.max+d.offset;var k=f-g,m=l-e;k=k<m?k:-m;e<g&&f<l?k=f-g:f>l&&(k=e-l);e=Math.abs(k);e<this.mOverlap&&(this.mOverlap=e,b.copyFrom(d.axis),0>k&&b.multiplyScalar(-1))}return this.mInCollision=!0};$jscomp.global.Object.defineProperties(Aa,{pool:{configurable:!0,enumerable:!0,get:function(){null===wc&&(wc=new I(Aa,100));return wc}}});var xc,Ba=function(){var a=T.call(this)||this;a.a=null;a.b=null;a.mBoxHalfWidth=0;a.mBoxHalfHeight=0;a.mBoxRotate=new k;a.mCircleCenter=new k;
return a};$jscomp.inherits(Ba,T);Ba.prototype.set=function(a,b,c,d){this.a=a;this.b=b;this.bodyA=c;this.bodyB=d;return this};Ba.prototype.__rotate=function(a,b,c,d,e){var f=a.x-b,g=a.y-c;a.x=d*f-e*g+b;a.y=e*f+d*g+c};Ba.prototype.test=function(){var a=this.a,b=this.b;a.mChanged&&(this.mChanged=!0);if(a.mMax.x<b.mMin.x||a.mMin.x>b.mMax.x||a.mMax.y<b.mMin.y||a.mMin.y>b.mMax.y)return this.mInCollision=!1;if(this.mChanged){this.mChanged=!1;var c=this.bodyA.mTransform.data,d=Math.sqrt(c[0]*c[0]+c[1]*c[1]),
e=Math.sqrt(c[2]*c[2]+c[3]*c[3]);this.mBoxRotate.set(c[0]/d,c[1]/d);this.mBoxHalfWidth=a.mRect.width/2*d;this.mBoxHalfHeight=a.mRect.height/2*e}c=this.mBoxRotate;d=this.mNormal;var f=this.mCircleCenter.copyFrom(b.mCenter),g=this.mBoxHalfWidth,l=this.mBoxHalfHeight;(e=0!==c.y)&&this.__rotate(f,a.mCenter.x,a.mCenter.y,c.x,-c.y);var k=f.x-a.mCenter.x;f=f.y-a.mCenter.y;if(0===k&&0===f)return this.mOverlap=b.mRadius+g,d.set(-1,0),this.mInCollision=!0;var q=m.clamp(k,-g,g),r=m.clamp(f,-l,l);(a=k===q&&f===
r)&&(Math.abs(k)>Math.abs(f)?q=0<q?g:-g:r=0<r?l:-l);g=k-q;l=f-r;k=g*g+l*l;b=b.mRadius;if(k>b*b&&!a)return this.mInCollision=!1;0===k?(this.mOverlap=b,d.set(0,1)):(k=Math.sqrt(k),this.mOverlap=b-k,a?d.set(-g/k,-l/k):d.set(g/k,l/k));e&&this.__rotate(d,0,0,c.x,c.y);return this.mInCollision=!0};$jscomp.global.Object.defineProperties(Ba,{pool:{configurable:!0,enumerable:!0,get:function(){null===xc&&(xc=new I(Ba,100));return xc}}});var yc,La=function(){var a=T.call(this)||this;a.a=null;a.b=null;return a};
$jscomp.inherits(La,T);La.prototype.set=function(a,b,c,d){this.a=a;this.b=b;this.bodyA=c;this.bodyB=d;return this};La.prototype.test=function(){var a=this.a,b=this.b,c=b.mCenter.x-a.mCenter.x,d=b.mCenter.y-a.mCenter.y;a=a.mRadius+b.mRadius;if(0===c&&0===d)return this.mOverlap=a,this.mNormal.set(1,0),this.mInCollision=!0;b=c*c+d*d;if(b>a*a)return this.mInCollision=!1;b=Math.sqrt(b);this.mOverlap=a-b;this.mNormal.set(c/b,d/b);return this.mInCollision=!0};$jscomp.global.Object.defineProperties(La,{pool:{configurable:!0,
enumerable:!0,get:function(){null===yc&&(yc=new I(La,100));return yc}}});var zc=function(){};zc.prototype.test=function(a){};var aa=function(){var a=Z.call(this)||this;a.mBodies=[];a.mPairs=[];a.mContacts=[];a.mBroadPhase=new zc;a.mPairsHash=Object.create(null);a.mBoundsBody=null;a.mBoundsLeft=new la(0,0,0,0);a.mBoundsRight=new la(0,0,0,0);a.mBoundsTop=new la(0,0,0,0);a.mBoundsBottom=new la(0,0,0,0);a.mGravity=new k(0,1E3);a.mIterations=5;a.mSleepEnabled=!0;a.delta=1/60;return a};$jscomp.inherits(aa,
Z);aa.prototype.collisionInfo=function(a,b,c,d,e){for(var f=[],g=4;g<arguments.length;++g)f[g-4]=arguments[g];if((g=this.mPairsHash[T.__id(a,b)])&&g.mInCollision){var k=g.a===a?1:-1;c.call.apply(c,[d,g.mNormal.x*k,g.mNormal.y*k,g.mOverlap].concat($jscomp.arrayFromIterable(f)))}};aa.prototype.isColliding=function(a,b,c,d,e){for(var f=[],g=4;g<arguments.length;++g)f[g-4]=arguments[g];b=void 0===b?null:b;c=void 0===c?null:c;d=void 0===d?null:d;g=a.mPairs;if(null===b){f=0;for(var k=g.length;f<k;f++)if(g[f].mInCollision)return!0;
return!1}k=0;for(var l=g.length;k<l;k++){var m=g[k];if(!1!==m.mInCollision){var q=m.bodyA===a&&m.bodyB===b?1:m.bodyA===b&&m.bodyB===a?-1:0;if(0!==q)return c&&c.call.apply(c,[d,m.mNormal.x*q,m.mNormal.y*q,m.mOverlap].concat($jscomp.arrayFromIterable(f))),!0}}return!1};aa.prototype.onChildrenAdded=function(a){var b=this;q.forEach(a,function(a){(a=a.getComponent(oa))&&b.__addBody(a)})};aa.prototype.onChildrenRemoved=function(a){var b=this;q.forEach(a,function(c){(c=c.getComponent(oa))&&b.__removeBody(c,
a)})};aa.prototype.onComponentAdded=function(a,b){b instanceof oa?this.__addBody(b):b instanceof ja&&this.__addCollider(a,b)};aa.prototype.onComponentRemoved=function(a,b){b instanceof oa?this.__removeBody(b,a):b instanceof ja&&this.__removeCollider(a,b)};aa.prototype.__addBody=function(a){var b=this.mBodies,c=a.gameObject.mCollidersCache;a.mPairs.length=0;if(0===c.length)this.__addPairs(a.mCollider,a);else for(var d=0,e=c.length;d<e;d++)this.__addPairs(c[d],a);b.push(a)};aa.prototype.__removeBody=
function(a,b){var c=this.mBodies;b=b.mCollidersCache;if(0===b.length)this.__removePairs(a.mCollider);else for(var d=0,e=b.length;d<e;d++)this.__removePairs(b[d]);a.mPairs.length=0;c.splice(c.indexOf(a),1)};aa.prototype.__addCollider=function(a,b){var c=a.getComponent(oa);c&&-1!==this.mBodies.indexOf(c)&&(this.__addPairs(b,c),1===a.mCollidersCache.length&&this.__removePairs(c.mCollider))};aa.prototype.__removeCollider=function(a,b){var c=a.getComponent(oa);if(c&&-1!==this.mBodies.indexOf(c)){this.__removePairs(b);
for(var d=c.mPairs,e=d.length-1;0<=e;e--){var f=d[e];f.a!==b&&f.b!==b||d.splice(e,1)}0===a.mCollidersCache.length&&this.__addCollider(a,c.mCollider)}};aa.prototype.__addPairs=function(a,b){var c=this.mBodies;a.mChanged=!0;for(var d=0,e=c.length;d<e;d++){var f=c[d],g=f.gameObject.mCollidersCache;if(f!==b)if(0===g.length)this.__addPair(a,f.mCollider,b,f);else for(var k=0,l=g.length;k<l;k++)this.__addPair(a,g[k],b,f)}};aa.prototype.__addPair=function(a,b,c,d){var e=a.constructor===la,f=b.constructor===
la;if(e&&f)e=Aa.pool.get();else if(e||f){if(e=Ba.pool.get(),f){f=c;var g=a;a=b;c=d;b=g;d=f}}else e=La.pool.get();e.mChanged=!0;e.set(a,b,c,d);e.mInCollision=!1;this.mPairs.push(e);this.mPairsHash[T.__id(a,b)]=e;c.mPairs.push(e);d.mPairs.push(e)};aa.prototype.__removePairs=function(a){for(var b=this.mPairs,c=this.mPairsHash,d=b.length-1;0<=d;d--){var e=b[d];if(e.a===a||e.b===a)b.splice(d,1),e instanceof Aa?Aa.pool.release(e):e instanceof Ba?Ba.pool.release(e):e instanceof La&&La.pool.release(e),delete c[T.__id(e.a,
e.b)],e.bodyA.mPairs.splice(e.bodyA.mPairs.indexOf(e),1),e.bodyB.mPairs.splice(e.bodyB.mPairs.indexOf(e),1)}};aa.prototype.onPostUpdate=function(){for(var a=this.delta,b=this.mContacts,c=this.mBodies,d=this.mPairs,e=b.length=0,f=c.length;e<f;e++){var g=c[e];g.update();g.mContacts.length=0;g.mInGroup=!1}e=0;for(f=d.length;e<f;e++)g=d[e],g.mIsStatic=(g.bodyA.mIsSleeping||0===g.bodyA.mInvMass)&&(g.bodyB.mIsSleeping||0===g.bodyB.mInvMass),!1===g.mIsStatic&&(g.mInCollision=!0);e=0;for(f=d.length;e<f;e++)g=
d[e],g.mInCollision&&!1===g.mIsStatic&&g.test();e=0;for(f=d.length;e<f;e++)g=d[e],g.mInCollision?(!1===g.mIsStatic&&b.push(g),g.bodyA.mContacts.push(g),g.bodyB.mContacts.push(g)):(g.mNormalImpulse=0,g.mTangentImpulse=0);this.__solve(a);if(this.mSleepEnabled)for(a=[],b=[],d=0,e=c.length;d<e;d++)if(f=c[d],f.clearFlags(),!f.mInGroup&&!f.mIsSleeping&&0!==f.mInvMass){a.length=0;b.length=0;for(b.push(f);0!==b.length;){f=b.pop();g=f.mContacts;a.push(f);f.mInGroup=!0;for(var k=0,m=g.length;k<m;k++){var q=
g[k];q=q.bodyA===f?q.bodyB:q.bodyA;q.mInGroup||0===q.mInvMass||b.push(q)}}f=!0;g=T.sleepThreshold*T.unitsPerMeter*l.stage.mScaleX;k=0;for(m=a.length;k<m;k++){q=a[k];var r=q.mVelocity;q.mSleepTime=r.x*r.x+r.y*r.y<g?q.mSleepTime+1:0;f=f&&q.mSleepTime>T.timeToSleep}g=0;for(k=a.length;g<k;g++)a[g].mIsSleeping=f}};aa.prototype.__solve=function(a){for(var b=this.mIterations,c=this.mContacts,d=this.mBodies,e=this.mGravity,f=0,g=d.length;f<g;f++){var k=d[f];if(0!==k.mInvMass&&!k.mIsSleeping){var m=k.mForce,
q=k.mVelocity,r=k.mInvMass;k=1-k.frictionAir;q.x=(q.x+(m.x*r+e.x)*a)*k;q.y=(q.y+(m.y*r+e.y)*a)*k}}e=0;for(f=c.length;e<f;e++)c[e].preSolve();for(e=0;e<b;e++)for(f=0,g=c.length;f<g;f++)c[f].solveVelocity();a*=l.stage.mScaleX*T.unitsPerMeter;e=0;for(f=d.length;e<f;e++)m=d[e],m.mForce.set(0,0),0===m.mInvMass||m.mIsSleeping||(g=m.mPosition,m=m.mVelocity,g.x+=m.x*a,g.y+=m.y*a);for(d=0;d<b;d++)for(a=0,e=c.length;a<e;a++)c[a].solvePosition()};aa.prototype.__setBounds=function(){var a=l.stage.bounds,b=Number.MAX_SAFE_INTEGER;
this.mBoundsLeft.set(-b,0,b,a.height);this.mBoundsRight.set(a.width,0,b,a.height);this.mBoundsTop.set(-b,-b,a.width+2*b,b);this.mBoundsBottom.set(-b,a.height,a.width+2*b,b)};$jscomp.global.Object.defineProperties(aa.prototype,{boundsEnabled:{configurable:!0,enumerable:!0,set:function(a){a?(this.mBoundsBody||(this.mBoundsBody=new oa,this.mBoundsBody.isStatic=!0,l.stage.addComponent(this.mBoundsLeft),l.stage.addComponent(this.mBoundsRight),l.stage.addComponent(this.mBoundsTop),l.stage.addComponent(this.mBoundsBottom),
this.__setBounds()),l.stage.addComponent(this.mBoundsBody)):l.stage.removeComponent(this.mBoundsBody)}},gravityX:{configurable:!0,enumerable:!0,set:function(a){this.mGravity.x=a},get:function(){return this.mGravity.x}},gravityY:{configurable:!0,enumerable:!0,set:function(a){this.mGravity.y=a},get:function(){return this.mGravity.y}},iterations:{configurable:!0,enumerable:!0,set:function(a){this.mIterations=a},get:function(){return this.mIterations}},sleepEnabled:{configurable:!0,enumerable:!0,set:function(a){this.mSleepEnabled=
a},get:function(){return this.mSleepEnabled}}});var Tb=function(a){a=void 0===a?4200:a;var b=C.call(this,!1)||this;b.mDuration=a;b.mSvgLogo='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 241.8 220.2"><defs><style>.b{fill:#f5f5f5}.c{fill:url(#a)}</style><pattern id="a" width="17.6" height="14.87" patternUnits="userSpaceOnUse" viewBox="0 0 17.6 14.9"><path fill="none" d="M0 0h17.6v14.87H0z"/><path class="b" d="M0 13.4v1.5h1.5A1.5 1.5 0 0 1 0 13.4z"/><path class="b" d="M8.8 0a1.5 1.5 0 0 1 1.5 1.5 1.5 1.5 0 1 1-3 0A1.5 1.5 0 0 1 8.8 0H0v13.4a1.5 1.5 0 0 1 1.5-1.5A1.5 1.5 0 0 1 3 13.4a1.5 1.5 0 0 1-1.5 1.5h4.3a1.5 1.5 0 0 1-1.5-1.5 1.5 1.5 0 0 1 1.5-1.5 1.4 1.4 0 0 1 1.5 1.5 1.5 1.5 0 0 1-1.5 1.5h6a1.5 1.5 0 0 1-1.5-1.5 1.5 1.5 0 0 1 3 0 1.5 1.5 0 0 1-1.5 1.5h5.8V0zm6.6.7a1.5 1.5 0 0 1 1.5 1.5 1.5 1.5 0 0 1-1.5 1.5 1.4 1.4 0 0 1-1.5-1.5A1.5 1.5 0 0 1 15.4.7zM.4 2.2A1.5 1.5 0 0 1 1.9.7a1.5 1.5 0 0 1 1.5 1.5 1.5 1.5 0 0 1-1.5 1.5A1.5 1.5 0 0 1 .4 2.2zm1.7 5.7A1.5 1.5 0 0 1 .6 6.4a1.5 1.5 0 0 1 1.5-1.5 1.5 1.5 0 0 1 0 3zm2 3.8a1.5 1.5 0 0 1-1.5-1.5 1.5 1.5 0 0 1 1.5-1.5 1.5 1.5 0 0 1 1.5 1.5 1.5 1.5 0 0 1-1.5 1.5zm.2-8a1.5 1.5 0 0 1 1.5-1.5 1.5 1.5 0 0 1 1.5 1.5 1.4 1.4 0 0 1-1.5 1.5 1.5 1.5 0 0 1-1.5-1.5zm2.2 3.5a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0zm2.2 5.3a1.5 1.5 0 1 1 1.5-1.5 1.5 1.5 0 0 1-1.5 1.5zm1.4-8a1.5 1.5 0 0 1 3 0 1.5 1.5 0 1 1-3 0zm2.5 5.7a1.5 1.5 0 0 1-1.5-1.5 1.5 1.5 0 0 1 1.5-1.5 1.4 1.4 0 0 1 1.5 1.5 1.5 1.5 0 0 1-1.5 1.5zm3 3.5a1.5 1.5 0 0 1-1.5-1.5 1.5 1.5 0 0 1 1.5-1.5 1.5 1.5 0 0 1 1.5 1.5 1.4 1.4 0 0 1-1.5 1.5zm0-5.5a1.5 1.5 0 0 1-1.5-1.5 1.5 1.5 0 0 1 1.5-1.5 1.5 1.5 0 0 1 1.5 1.5 1.4 1.4 0 0 1-1.5 1.5z"/></pattern></defs><path class="c" d="M25.8 105.2c12.1 8.8 29.7 6.7 59.8 6.8-7.9-7.3-9.1-18.7-7.1-27.3-6.6 7.3-5.1 19.3-12.8 19.4-3.4.1-6.9-4.7-8.3-10.8-5.3 9.4-12 10.7-14.7-4.5-2.3 2-3.9 8.2-9.5 6.2S26.8 81.8 30 71.3A28.3 28.3 0 0 1 14.6 61c-1.4 20.8.5 36.4 11.2 44.2zM51.9 39.9c29.7-3.6 54-22.8 69.5-26.3-.1 0-40.7-.3-72.3 1.9 6.2 3.5 10.5 16.3 2.8 24.4zM170.4 34.2c5.6-2 32.1-9.5 54.4-2.7-3-13.7-22.9-17-71.8-17.8a32.2 32.2 0 0 1 17.4 20.5zM211.3 109.3c-12.2 2.1-12.8-8.8-32.9-8.9-15.5 0-35.2 13.2-36.1 13.7h49.3c19.1 0 32.5-.6 35.5-7.3s-2.7-12.3-10.7-15.6c5.3 5.6 4.1 16.5-5.1 18.1zM66 189.2c-5.9 5-26 17.8-43.6 6.3 3.6 8.4 13.6 12.7 45.1 12-1.6-2.4-5.3-10.4-1.5-18.3zM32 161.5c7.3 7.8 18.1 2.6 33.7-6.2 10.5-6 27.5-9.9 40.6-1.1 3.7-8.7 5.4-10.9 6.7-10.6s.7 2.7 5.6 7c.4-1 3.8-7.9 3.8-12l-59.9-.8c-1.5 6.6-9.9 19-23.9 17.4-2.4-.3-2.5-11.6 2.4-16.9a36.7 36.7 0 0 0-7.4.9c-4.4 5.1-7 16.4-1.6 22.3zM150.9 148.1c23.6-.5 26 19.9 41.1 21 10.9.9 13.6-16.8 35.7-11.8-1.3-11.1-7.7-16.2-22.2-17.4 3 10.3-6.6 28.5-19.3 21.5a1.5 1.5 0 0 1-.8-1.1c-.9-11 2.8-15.8 7.5-20.7l-55.7-.7a18.5 18.5 0 0 1 3.7 12.4 20.7 20.7 0 0 1 10-3.2zM162 195.9c-3.9 3.6-3.8 9.5-2.5 12.5h4.1c0-14.8 17-12.8 21.2-.8 22.7-1.5 30.9-3.2 36-8.7s6.4-15.3 6.8-27.1c-2.6 3-9.8 14.7-10.9 16.4-17.8 26.3-39.9-5.9-54.7 7.7z"/><path class="b" d="M150 42.6c-.2 10.4-9.8 13.6-9.4-.7-16.2 1.9-14.5 8.5-13.7 9.5 4.4 5.6 29 4.5 27.3-4.3a5.7 5.7 0 0 0-4.2-4.5z"/><path class="b" d="M162.2 46.4c-1.7-15.7-17.2-18.2-28.4-15.6s-22.3 12.7-15.6 25.4 46.2 10.3 44-9.8zm-37.8 6.7c-5.4-9.7 10.6-13.4 13.2-13.8 7.5-1.3 18.2-1.2 19.6 7.6 2 13.2-28.8 13.3-32.8 6.2zM184.7 68.8c-1.1 0-1.1 3.3-5.4 12.5.3 0 5.8 0 8.6.2-.7-9.1-2.1-12.7-3.2-12.7zM162.5 82.9l7-1.1c-2.5-4.6-5.8-8.6-7 1.1zM153.1 74.5a55.8 55.8 0 0 0-7.8 2c6.4 9.4 7.4 2.2 7.8-2zM134.8 94.6c.4-.2 4.9-3.1 6.9-4.1-1.9-2-8.1-9.9-6.9 4.1zM190.9 81.8a58.3 58.3 0 0 1 9 1.5 77.7 77.7 0 0 0 .4-8.8c-1.7-.3-7.2-1.2-10.3-1.5a52 52 0 0 1 .9 8.8z"/><path class="b" d="M216.5 76.2a39.1 39.1 0 0 1-5.6 10.4c13 3 25.3 10.8 18.1 23.1-3.8 6.6-16.4 7.5-37.4 7.5l-55.4-.2a32.3 32.3 0 0 1-18.8 1.1c-6.8 1.5-18.2 3.7-28.2-3.1-30.8-.4-49.7 3.2-64.9-7.1C6.4 95.7 11.6 60.3 12 56.8c-6.4-12.5-.8-29.4 2.3-34.1S29.4 7.5 44.4 13c.2-.1 27.5-2.4 76-2.4 74.4 0 105.2.8 107.6 22.3 6 2.4 13.2 13 6.2 21 4.8 9.4.1 19.1-9.7 21.5a37.4 37.4 0 0 1 10.7 5.7c1.4-2.5 8.5-19.8 4.8-41.9-4.5-27.1-17.9-33.2-35.4-34.9C157.9 0 88.5.2 81.7.1 38.1-.3 18.2-.5 8.1 22.2-3.1 47.6-2.6 91.7 9.1 108c7.7 10.7 19.1 15.3 37.9 15.3 34.5 0 141.3 1.4 165.3 1.8 11-.3 27.9-3.4 29.3-19.7s-6.8-25.2-25.1-29.2z"/><path class="b" d="M202.7 88.6c1.3-.2 6.5-2 10.7-12.6-3-.2-6.3-.5-10.1-1.1.8 11.4-3 14-.6 13.7z"/><path class="b" d="M231.9 56c-7.6 5.5-18.2 1.8-19.8-3.4-2.6-8.6 4.4-10.9 6.7-10.6 7.7.8 7 6.1 4 8.1a1.5 1.5 0 0 1-1.9-2.4c1.8-1.3 0-2.8-2.1-2.7s-5.4 1-3.8 6.7 17.1 7.3 18.9-4.4c1-6.8-5.8-16.4-32.5-15.4a108.5 108.5 0 0 0-30.4 5.2c1.2 8.3-1.9 15.7-8.5 20.1-5.3 11.2-41.6 17.9-48.4-2.7-7.5.8-13.1 10-13.9 14.9a1.4 1.4 0 0 1-1.6 1.2c-6.5-.7-16.7 3.6-17.9 20-1.3 18.3 14.9 29.2 31.7 25.4a21.7 21.7 0 0 1-5-3.5c-5.7-.2-13.7-1.1-17.4-12.1-.6-1.7 2.1-3.2 2.9-.9 2.5 7.8 8.3 9.6 11.8 10a23.3 23.3 0 0 1-4.4-13.3c-.1-2.5 3-2 3-.2-.1 12.3 14.5 29.4 42 13 33.9-20.2 50.8-8.1 55.8-5 1.4.9 9.2 5.2 13.7.1 1.8-2 4.1-10.3-6.4-14.9-4.2 3.7-11.5 3.3-8.9-3-32.1-5.7-50.2 2.7-61.8 10.2s-16.4.3-17-2.5c-1.8-8.4 16.6-26.2 60.2-24.6 1.3-3.9 5.3-5.7 8.1.6 7.4.6 18 3.2 28.9 3.2s18.2-5.3 14-17.1z"/><path class="b" d="M176 81.3l3.8-9.1a107.7 107.7 0 0 0-23.6 1.6c-1.1 15.7-9.6 10.9-13.8 3.6-27.3 10.6-19.1 22.7-10.5 18.6-1.6-15.7 6-15 12.5-7a77.4 77.4 0 0 1 15.1-5.4c1.4-15.6 10-9.6 13.3-2.1zM65.8 101.1c5.2-.4 1.4-10.4 17-26.2 13.1-13.2-7.9-26.6-17.9-13s-4.4 39.6.9 39.2z"/><path class="b" d="M49.8 63.9c-4.7 6.2-6.6 20.2-2.4 30.6 2.9 7 6.9-1.5 9.3-5.4-1.2-8.8 0-20.5 5.2-28.1-5.6-3.5-10.1.3-12.1 2.9zM32.3 74.3c-2.4 10.4-.6 17.3 2.6 18.1s4.7-5.4 7.3-7.6c-.6-7.7.9-15.8 4.2-21.2-8.7-3.1-12.8 5.3-14.1 10.7z"/><path class="b" d="M12.2 39.9c-1.8 22.1 15.2 28 18.9 28.5 1.7-3.6 6.8-11.4 17.2-7.3 5.5-6.4 12-4.8 15.5-2.5C73.9 48.2 92 53.8 89.6 69.3a16.6 16.6 0 0 1 7.9-1.7c1.7-5.9 7.7-14.9 15.9-16.1a18.6 18.6 0 0 1 5.1-15.2c-4 1.6-20.6 10.6-28.1 12.3-1.4.3-2.4-2.4-.3-3 9.3-2.5 26.9-13.5 42.8-17.6 19.5-5.2 34.5 6.7 32.1 22.8 10.1-14.5-5.4-34.6-20.7-36.4-33.4-4.1-53.3 26.5-98.8 28.9-7 .4-11.9-2-13.7-6s-.9-9 3.7-10.6c2.1-.7 3.5 2.3 1.1 2.8s-4.9 9.2 4.8 10.7c12.7 2 14.5-14.3 7.3-21.2s-34-9.4-36.5 20.9zM108.8 156a30.1 30.1 0 0 1 6.8 8.2 45.5 45.5 0 0 1 2-10.6 17.4 17.4 0 0 1-5-5.7 47.5 47.5 0 0 0-3.8 8.1zM40.3 152.4c7.2.6 18.4-6.1 19.7-17.7-20.3-.3-20.5 13-19.7 17.7zM105.5 182.8c-9.5-20.1-30.2-13.6-46.7-2.2-14.8 10.3-29.4 7.7-35.8.1a31.5 31.5 0 0 1-4.6-32.4C5 168 14.6 187.8 24.8 193.5c18.7 10.5 37.8-5 41.6-8.5 12.4-11.2 28.8-11.8 33.4 2.2 4 12.2-7.6 21.6-15.9 18.1-10.7-4.4-6.4-13.5-3.1-15.1a7.4 7.4 0 0 1 8.7 1.9c1.2 1.3-.5 3.6-2.1 2.1s-3.5-2.1-5.1-1.3-4.3 7.6 2.6 9.6c8.9 2.6 14.7-7.1 12-14.4-3.9-10.7-15.2-8.9-19.9-6.6-14.5 7.2-12.8 30 6 30.7 23.2.9 27-19.8 22.5-29.4zM188.4 159.2c11.6 4.5 18.7-15.8 11.7-23.9-4.2 7.6-13.1 10.2-11.7 23.9z"/><path class="b" d="M191.9 172.1c-15.6-.4-20.8-23.1-41.9-20.9-24 2.5-24.8 45.6-13.1 57.6h3.1c-4.1-9.4-6.7-28.1 7.8-38.2 1.7-1.1 3.6 1.3 1.7 2.5-13.6 9.4-10.2 27.6-6.2 35.7h3.5c-4.2-8.4-3.6-21.3 2.4-27.3 18.5-18.3 44.9 16.4 57.1-.5 8-11.1 12.7-17.8 26.8-16.9a13.3 13.3 0 0 0-7-4c-19.7-4.1-20.7 12.4-34.2 12z"/><path class="b" d="M208.6 182.8c-13.7 18.8-40.7-15.8-57.2.7-5.4 5.4-5.6 18-1.2 25.1h6.1c-2-5.6.6-12.1 3.8-14.9 17.6-15 37.6 17.6 54.2-7.3 1-1.5 8.3-14.5 13.9-19.3-10.5.6-14.4 8.6-19.6 15.7z"/><path class="b" d="M238.8 151.3c-4-14.1-13.7-23-25.3-23.2-.3 0-120-1.8-163.5-1.8-40.8 0-44.9 21.4-47.3 34.2-3.8 20.4 3.9 40.1 8.9 46.1 9.4 11.4 25.3 13.6 48 13.6l128.4-.3c35.9 0 44.8-12.6 48.4-23.6 4.7-14 5.7-33.3 2.4-45zm-1.3 15.2c-1.5 1.5-3.3-.7-6.8 2.3.1 26.5-6.3 35.4-19 38.4-16.1 3.8-43.4 4.7-112.7 4.4-5.8 3.8-19.8 6.6-29-1.2-23.1.7-48.8.4-51.7-18.1-4.9-4.8-12.3-15.9-8.2-33.2 5.2-21.3 22.1-24.3 34.6-23.9 4.2-2.6 10-3.9 17-3.4 2 .2 1.4 2.5 1.3 3l59.3.8c.1-2-.9-2.5.1-3.9s8.9 1.7 11.8 4.1l61.1 1c4.2-4.3 3.6-10 9.2 0 12.4.9 25 4.3 26.3 21.8 3.7 1.8 8.1 6.4 6.7 7.9z"/><path class="b" d="M166.6 208.3l15.1-.6c-3.8-8.4-15.4-10.2-15.1.6zM113.3 166.2c-11.1-19.9-33.8-15.2-46.1-8.3-16.4 9.1-28.6 15.1-37.4 5.6-5.7-6.1-4.3-16.7-.5-23.4-12.8 6.6-13.3 28.1-4 38.6 5.7 6.5 18.5 8.7 31.8-.5 16.2-11.4 36.6-18.1 48.8-1.1 5.5 7.7 6.4 22.9-3 31.6h7.1c8-7 11.2-28.4 3.3-42.5z"/><path class="b" d="M137.7 153.6c1.7-13.2-7.4-17.4-12.4-18.8 1.6 11.6-8 17-6.8 36 4.6 13.7 2 29.9-4.4 38h19c-8.6-12.6-10-41.8 4.6-55.2z"/></svg>';
b.mSvgText='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 228.9 29"><defs><style>.a{fill:#f5f5f5}</style></defs><path class="a" d="M9.7 19a3.7 3.7 0 0 1 2.9 1.4 6 6 0 0 1 .9 3.6 4.6 4.6 0 0 1-1.4 3.8c-.9.7-2.5 1-4.7 1L0 28.7V10.1l6.6-.2a9.4 9.4 0 0 1 4.9 1c.9.7 1.4 2 1.4 3.9a5.1 5.1 0 0 1-.7 3A3.3 3.3 0 0 1 9.7 19zm-6.4-1.1h3.4a3.3 3.3 0 0 0 2.3-.6 2.5 2.5 0 0 0 .7-2.1 2.9 2.9 0 0 0-.7-2.1 5.1 5.1 0 0 0-2.6-.5H3.3zm0 8.3h3.5a3.9 3.9 0 0 0 2.6-.6c.5-.3.7-1.1.7-2.2a3 3 0 0 0-.7-2.4 3.8 3.8 0 0 0-2.7-.7H3.3zM22.9 10.1v14.3a2.1 2.1 0 0 0 .3 1.2 2.3 2.3 0 0 0 1.3.3h6.4l.2 2.6c-1.8.2-4.3.2-7.4.2s-4.2-1.2-4.2-3.8V10.1zM46.2 23.4h-6.9l-1.5 5.3h-3.5L39.9 11a1.2 1.2 0 0 1 1.2-.9h3.3a1.2 1.2 0 0 1 1.2.9l5.6 17.7h-3.5zm-.8-2.7l-1.9-6.4c-.2-1-.4-1.5-.4-1.6h-.7l-.4 1.6-1.9 6.4zM68.2 25.8l.3 2.5a18.5 18.5 0 0 1-5.7.7c-2.8 0-4.7-.7-5.8-2.1s-1.7-4-1.7-7.5.5-6 1.7-7.4 3-2.2 5.8-2.2a19.8 19.8 0 0 1 5.3.6l-.3 2.6a39.4 39.4 0 0 0-5-.2c-1.5 0-2.6.4-3.1 1.4s-.9 2.7-.9 5.2.3 4.3.9 5.2a3.2 3.2 0 0 0 3.1 1.5 37.5 37.5 0 0 0 5.4-.3zM79.1 20.3h-1.8a11.1 11.1 0 0 1 .2 1.9v6.5h-3.4V10.1h3.4v5.5a12.5 12.5 0 0 1-.2 2.1h1.8l5.1-7.6h3.7l-5 7.5a4.3 4.3 0 0 1-1.3 1.4 4.5 4.5 0 0 1 1.5 1.6l5.1 8h-3.7zM100 21.4l-3.8-1.2a5.1 5.1 0 0 1-2.8-2 5.9 5.9 0 0 1-.9-3.4c0-2 .5-3.4 1.4-4s2.6-1 5-1a24 24 0 0 1 5.8.6l-.2 2.4H99a4.7 4.7 0 0 0-2.5.4c-.4.2-.6.8-.6 1.7a2.5 2.5 0 0 0 .4 1.7 3.8 3.8 0 0 0 1.7.8l3.5 1.1a5.3 5.3 0 0 1 3 2 5.9 5.9 0 0 1 .9 3.4c0 2.1-.5 3.4-1.5 4.2s-2.7 1-5.1 1a30.8 30.8 0 0 1-6.1-.6L93 26l5.8.2a4.4 4.4 0 0 0 2.5-.5 2.2 2.2 0 0 0 .6-1.8 2.2 2.2 0 0 0-.4-1.6 3.5 3.5 0 0 0-1.5-.9zM126 10.1h3.5a1.2 1.2 0 0 1 1.3 1.4l.8 17.2h-3.3l-.7-15.8h-.5l-3.2 12.3a1.3 1.3 0 0 1-1.4 1.1H120a1.4 1.4 0 0 1-1.5-1.1l-3.2-12.3h-.5l-.6 15.8h-3.3l.7-17.2c.1-.9.5-1.4 1.4-1.4h3.5a1.2 1.2 0 0 1 1.3 1.2l2.7 10 .5 2.6h.4a26.1 26.1 0 0 1 .6-2.6l2.6-10a1.4 1.4 0 0 1 1.4-1.2zM141.4 28.7H138V10.1h3.4zM161.5 13h-5.7v15.7h-3.4V13h-5.7v-2.9h14.8zM180.9 10.1v18.6h-3.4v-8.5h-7.3v8.5h-3.4V10.1h3.4v7.3h7.3v-7.3zM196 13.1l-.2-2.6a24.4 24.4 0 0 1 5.9-.7 8.9 8.9 0 0 1 4.5.9 3.5 3.5 0 0 1 1.5 3.3 6.4 6.4 0 0 1-.7 3.1 13.3 13.3 0 0 1-2.4 3.3l-4.9 5.3 2.8-.2h5.8v3.2h-12.7v-2a2 2 0 0 1 .5-1.4l4.9-5.4c2.2-2.4 3.3-4.2 3.3-5.6a1.3 1.3 0 0 0-.7-1.3 5.7 5.7 0 0 0-2.2-.3 52.9 52.9 0 0 0-5.4.4zM214.3 28.7V10.1l7-.2c2.8 0 4.8.7 5.9 2.1s1.7 3.8 1.7 7.4-.6 6.1-1.7 7.5-3.1 2-5.9 2-4.5 0-7-.2zm3.4-16v13.4h3.6a3.6 3.6 0 0 0 3.2-1.4 12.6 12.6 0 0 0 .8-5.3c0-2.5-.3-4.3-.9-5.3a3.3 3.3 0 0 0-3.1-1.4h-3.6zM.1 8.1v-8h2.7a2.9 2.9 0 0 1 2.1.5 3 3 0 0 1 .5 2 2.9 2.9 0 0 1-.5 1.9 2.5 2.5 0 0 1-1.9.6H1.2v3zm1.1-4h1.6a1.6 1.6 0 0 0 1.1-.3 2.1 2.1 0 0 0 .3-1.2 2.3 2.3 0 0 0-.3-1.3A1.6 1.6 0 0 0 2.8 1H1.2zM9.7 0a3 3 0 0 1 2.5.9 5.2 5.2 0 0 1 .7 3.2 5 5 0 0 1-.7 3.2 3 3 0 0 1-2.5.9 2.8 2.8 0 0 1-2.4-.9 5 5 0 0 1-.7-3.2A5.2 5.2 0 0 1 7.3.9 2.8 2.8 0 0 1 9.7 0zm1.6 1.7A1.7 1.7 0 0 0 9.7 1a1.6 1.6 0 0 0-1.5.7 4.5 4.5 0 0 0-.4 2.4 4.5 4.5 0 0 0 .4 2.4 1.6 1.6 0 0 0 1.5.7 1.7 1.7 0 0 0 1.6-.7 4.5 4.5 0 0 0 .4-2.4 4.5 4.5 0 0 0-.4-2.4zM24.2.1l-1.6 7.6a.4.4 0 0 1-.4.4h-1.3a.4.4 0 0 1-.4-.4l-1.2-5.8a3.4 3.4 0 0 1-.1-.9h-.3l-.2.9-1.1 5.8V8h-1.7c-.3 0-.4-.1-.5-.4L13.9.1h1.2l1.2 6.1a5.1 5.1 0 0 0 .1 1h.3c0-.3.1-.7.1-1L18 .5a.4.4 0 0 1 .4-.4h1.3a.2.2 0 0 1 .2.2.2.2 0 0 1 .2.2l1.1 5.7c.1.3.1.6.2 1h.3v-.5a1.1 1.1 0 0 0 .1-.5L22.9.1zM30.3 7.1V8H27a1.6 1.6 0 0 1-1.2-.4 1.2 1.2 0 0 1-.4-1v-5a1.4 1.4 0 0 1 .4-1.1A2.1 2.1 0 0 1 27 .1h3.4V1h-3.2l-.5.2a.7.7 0 0 0-.1.5v1.7h3.3v1h-3.3v2a1.1 1.1 0 0 0 .1.6h3.6zM37.6 8.1h-1.2l-.7-2.5a1.1 1.1 0 0 0-1-.8h-1.6v3.3h-1.2v-8h2.8a3.4 3.4 0 0 1 2 .5 2.4 2.4 0 0 1 .6 1.8 2.8 2.8 0 0 1-.3 1.4 2 2 0 0 1-1.2.6 1.4 1.4 0 0 1 1 1.2zm-4.5-4.3h1.6a1.6 1.6 0 0 0 1.1-.3 1.4 1.4 0 0 0 .3-1.1 1.6 1.6 0 0 0-.3-1.1 1.6 1.6 0 0 0-1.1-.3h-1.6zM43.9 7.1V8h-3.3a1.6 1.6 0 0 1-1.2-.4 1.2 1.2 0 0 1-.4-1v-5a1.4 1.4 0 0 1 .4-1.1 2.1 2.1 0 0 1 1.2-.4H44V1h-3.2a.6.6 0 0 0-.5.2.8.8 0 0 0-.2.5v1.7h3.4v1h-3.4v2a1.1 1.1 0 0 0 .2.6h3.6zM45.5 8.1v-8h2.9a3 3 0 0 1 2.4.9 5.2 5.2 0 0 1 .7 3.2 5.2 5.2 0 0 1-.7 3.2 3 3 0 0 1-2.4.9zm1.1-7v6h1.8a1.6 1.6 0 0 0 1.5-.7 5.7 5.7 0 0 0 .4-2.4 6.5 6.5 0 0 0-.4-2.4 1.8 1.8 0 0 0-1.5-.6h-1.8zM59.6 3.9a1.5 1.5 0 0 1 1.3.6 2.8 2.8 0 0 1 .3 1.5 2.2 2.2 0 0 1-.5 1.6 3.4 3.4 0 0 1-2 .5h-3v-8h2.6a3.7 3.7 0 0 1 2.1.4 1.8 1.8 0 0 1 .6 1.6 2.3 2.3 0 0 1-.3 1.3 1.4 1.4 0 0 1-1.1.5zm-2.8-.4h1.6a2.9 2.9 0 0 0 1.2-.2 1.3 1.3 0 0 0 .3-1c0-.5-.1-.9-.4-1a1.7 1.7 0 0 0-1.2-.3h-1.5zm0 3.7h1.7a1.7 1.7 0 0 0 1.2-.3c.3-.1.4-.5.4-1a1.7 1.7 0 0 0-.4-1.2 1.9 1.9 0 0 0-1.3-.3h-1.6zM65.6 5.3v2.8h-1.1V5.3L61.8.1h1.3l1.6 3.3a4.2 4.2 0 0 0 .3.9h.1a8.5 8.5 0 0 1 .3-.9L67 .1h1.2z"/></svg>';
return b};$jscomp.inherits(Tb,C);Tb.prototype.show=function(){var a=this,b=.001*this.mDuration;b="#logo,#splash-screen{position:relative;box-sizing:border-box}#logo-inner,#logo-name{margin-left:auto;margin-right:auto}#splash-screen{z-index:999;top:0;left:0;width:100%;height:100%;display:block;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAIklEQVQYV2OUkpL6/+zZMwYpKSkGEM3IwMDwnwEJMBJUAQCLUhABUGRZzwAAAABJRU5ErkJggg==);opacity:1;animation:hide 0s ease-in "+b+"s forwards}@keyframes hide{to{opacity:0}}#logo{top:20%;left:50%;animation:fadein "+
b+"s linear forwards}@keyframes fadein{0%{opacity:0}100%,40%{opacity:1}}#logo-name{width:100%;margin-top:108px}";var c=document.createElement("style");c.type="text/css";c.innerHTML=b;document.getElementsByTagName("head")[0].appendChild(c);var d=document.getElementById(l.engine.containerElementId),e=d.style.overflow;d.style.overflow="hidden";var f=document.createElement("div");f.id="splash-screen";d.appendChild(f);var g=document.createElement("div");g.id="logo";f.appendChild(g);var k=document.createElement("div");
k.id="logo-inner";k.innerHTML=this.mSvgLogo;g.appendChild(k);var m=document.createElement("div");m.id="logo-name";m.innerHTML=this.mSvgText;g.appendChild(m);var q=function(){var b=f.offsetWidth,c=f.offsetHeight;b=a.calculateAspectRatioFit(b,c,.5*b,.5*c);g.style.width=b.width+"px";g.style.height=b.height+"px";g.style.marginLeft=.5*-b.width+"px";k.style.width=Math.min(b.width,b.height)+"px";k.style.height=Math.min(b.width,b.height)+"px";m.style.width=.9*Math.min(b.width,b.height)+"px";m.style.height=
Math.min(b.width,b.height)+"px";m.style.marginTop="12px"};q();var r=d.offsetWidth,p=d.offsetHeight,t=setInterval(function(a){if(r!==d.offsetWidth||p!==d.offsetHeight)r=d.offsetWidth,p=d.offsetHeight,q()},1E3/60);setTimeout(function(){clearTimeout(t);c.parentNode.removeChild(c);f.parentNode.removeChild(f);d.style.overflow=e;a.post(E.COMPLETE)},this.mDuration);this.post(E.COMPLETE)};Tb.prototype.calculateAspectRatioFit=function(a,b,c,d){c=Math.min(c/a,d/b);return{width:a*c,height:b*c}};var Ma=function(a,
b,c){a=void 0===a?1:a;b=void 0===b?1:b;c=void 0===c?!0:c;var d=N.call(this)||this;g.assert(0<a,"the interval value must be greater than 0");g.assert(0<b,"the ticksCount value must be greater than 0");d.mStartOnAdded=c;d.mInterval=a;d.mTicksCount=b;d.mIsRunning=!1;d.mTick=0;d.mElapsedSeconds=0;d.mTotalElapsedSeconds=0;return d};$jscomp.inherits(Ma,N);Ma.prototype.onAdded=function(){this.mStartOnAdded&&this.start()};Ma.prototype.onUpdate=function(){if(!1!==this.mIsRunning&&(this.mElapsedSeconds+=l.time.delta,
this.mTotalElapsedSeconds+=l.time.delta,this.mElapsedSeconds>=this.mInterval)){this.mElapsedSeconds=0;for(var a=Math.max(1,~~(l.time.delta/this.mInterval)),b=0;b<a;b++)if(this.mTick++,this.post("tick",this.mTick),this.mTick>=this.mTicksCount){this.mIsRunning=!1;this.post("complete");break}}};Ma.prototype.start=function(){this.mIsRunning=!0;return this};Ma.prototype.stop=function(){this.mIsRunning=!1;this.reset();return this};Ma.prototype.pause=function(){this.mIsRunning=!1;return this};Ma.prototype.reset=
function(){this.mTotalElapsedSeconds=this.mElapsedSeconds=this.mTick=0;return this};$jscomp.global.Object.defineProperties(Ma.prototype,{ticksLeft:{configurable:!0,enumerable:!0,get:function(){return this.mTicksCount-this.mTick}},currentTick:{configurable:!0,enumerable:!0,get:function(){return this.mTick}},elapsedSeconds:{configurable:!0,enumerable:!0,get:function(){return this.mElapsedSeconds}},secondsToNextTick:{configurable:!0,enumerable:!0,get:function(){return this.mInterval-this.mElapsedSeconds}},
isRunning:{configurable:!0,enumerable:!0,get:function(){return!0===this.mIsRunning}},isComplete:{configurable:!0,enumerable:!0,get:function(){return this.mTick>=this.mTicksCount}},ticksCount:{configurable:!0,enumerable:!0,get:function(){return this.mTicksCount},set:function(a){g.assert(0<a,"the ticksCount value must be greater than 0");this.mTicksCount=a}},interval:{configurable:!0,enumerable:!0,get:function(){return this.mInterval},set:function(a){g.assert(0<a,"the interval value must be greater than 0");
this.mInterval=a}},totalElapsedSeconds:{configurable:!0,enumerable:!0,get:function(){return this.mTotalElapsedSeconds}},startOnAdded:{configurable:!0,enumerable:!0,get:function(){return this.mStartOnAdded},set:function(a){this.mStartOnAdded=a}}});var cd=0,M=function(a,b,c,d){d=void 0===d?null:d;var e=C.call(this)||this;e.id=++cd;l.engine=e;e.mContainerElementId=a;e.mContainerElement=null;e.mVideoDriverClass=c;e.mSystemClasses=d;e.mStageWidth=0;e.mStageHeight=0;e.mLastUpdateTime=0;e.mFrameNum=0;e.mNumUpdates=
0;e.mMaxUpdatesPerFrame=60;e.mLastRenderTime=0;e.mSystems=[];e.mGameObject=null;e.mIsRunning=!1;e.mIsStarted=!1;e.mIsPanic=!1;e.mRAFHandle=-1;e.mViewport=null;e.mVideo=null;e.mPaused=!1;e.mUnpausing=!1;e.mPauseOnHide=!0;e.mPauseOnBlur=!0;e.mTagCache={};e.mGameClass=b;e.mStage=null;e.mWasStopped=!1;e.mFrameTimes=[];e.mUseHiDPR=!1;e.mPendingDispose=!1;e.__initialize();return e};$jscomp.inherits(M,C);M.prototype.__initialize=function(){console.log("%c                         >>> BLACK <<<                         ",
"background: #000; color: #fff;");this.mContainerElement=document.getElementById(this.mContainerElementId);if(!this.mContainerElement)throw Error("Container element was not found");l.device=new Ib;this.mStageWidth=this.mContainerElement.clientWidth;this.mStageHeight=this.mContainerElement.clientHeight;this.mUseHiDPR=l.device.isMobile;this.__bootViewport();this.__update=this.__update.bind(this)};M.prototype.pause=function(){this.mPaused=!0;this.post("paused")};M.prototype.resume=function(){!0===this.mPaused&&
(this.mUnpausing=!0)};M.prototype.__setUnpaused=function(){this.mPaused=!1;this.post("unpaused")};M.prototype.__bootViewport=function(){this.mViewport=new va(this.mContainerElement)};M.prototype.__bootSystems=function(){if(null!==this.mSystemClasses)for(var a=0;a<this.mSystemClasses.length;a++)this.__addSystem(new this.mSystemClasses[a])};M.prototype.__bootStage=function(){var a=this;this.mStage=new ka;window.onblur=function(b){return a.__onVisibilityChange(b)};window.onfocus=function(b){return a.__onVisibilityChange(b)};
window.onpagehide=function(b){return a.__onVisibilityChange(b)};window.onpageshow=function(b){return a.__onVisibilityChange(b)};document.hidden&&!0===this.mPauseOnHide&&this.pause()};M.prototype.__onVisibilityChange=function(a){a=a.type;"blur"===a&&!0===this.mPauseOnBlur?this.pause():"pagehide"===a&&!0===this.mPauseOnHide?this.pause():("focus"===a||"pageshow"===a)&&!1===document.hidden&&this.resume()};M.prototype.hasSystem=function(a){for(var b=0;b<this.mSystems.length;b++)if(this.mSystems[b]instanceof
a)return!0;return!1};M.prototype.__addSystem=function(a){this.mSystems.push(a);return a};M.prototype.getSystem=function(a){for(var b=0;b<this.mSystems.length;b++){var c=this.mSystems[b];if(c instanceof a)return c}return null};M.prototype.__bootVideo=function(){this.mVideo=new this.mVideoDriverClass(this.mViewport.mViewportElement,this.mStageWidth,this.mStageHeight)};M.prototype.start=function(){if(!0===this.mWasStopped)g.error("Black engine cannot be re-started.");else if(l.engine=this,!0!==this.mIsStarted){l.time=
new Yb;this.__bootSystems();this.__bootStage();this.__bootVideo();this.mStage.__refresh();this.post(E.READY);this.mGameObject=new this.mGameClass;this.mStage.addChild(this.mGameObject);var a=this;this.mIsStarted=!0;this.mVideo.start();this.mRAFHandle=window.requestAnimationFrame(function(b){a.mIsRunning=!0;a.mLastUpdateTime=b;a.mLastRenderTime=a.mLastUpdateTime;a.__update(b,!0)})}};M.prototype.stop=function(){this.mIsRunning=this.mIsStarted=!1;window.cancelAnimationFrame(this.mRAFHandle);console.log("%c                        <<< BYE BYE >>>                        ",
"background: #000; color: #fff;")};M.prototype.destroy=function(){this.mPendingDispose=!0};M.prototype.__dispose=function(){this.stop();this.mVideo.dispose();this.mViewport.dispose();l.assets.dispose();l.assets=null;for(var a=0;a<this.mSystems.length;a++)this.mSystems[a].dispose();C.dispose();this.mFrameNum=this.mNumUpdates=0;l.engine=null};M.prototype.__update=function(a,b){var c=l.time;!0===this.mPaused&&!0===this.mUnpausing&&(this.mUnpausing=!1,this.mLastRenderTime=this.mLastUpdateTime=a,this.__setUnpaused());
this.mRAFHandle=window.requestAnimationFrame(this.__update);if(!0!==this.mPaused){var d=Math.floor((a-this.mLastUpdateTime)/c.mDeltaTimeMs);!0===b&&(d=1);d>this.mMaxUpdatesPerFrame&&(this.post("looped",d),g.warn("Unable to catch up "+d+" update(s)."),d=l.mMaxUpdatesPerFrame);l.mNumUpdates=d;for(b=0;b<d;b++)c.mActualTime+=c.delta,c.mTime=c.mActualTime,this.__internalUpdate(),this.__internalSystemPostUpdate();for(b=a-c.mDeltaTimeMs;this.mLastUpdateTime<b;)this.mLastUpdateTime+=c.mDeltaTimeMs;c.mAlphaTime=
0===d?(a-this.mLastUpdateTime)/c.mDeltaTimeMs:0;c.mTime=c.mActualTime+.001*(a-this.mLastUpdateTime)*c.mScale;this.__internalSystemRender();this.mVideo.beginFrame();this.mVideo.render(this.mStage);this.mVideo.endFrame();this.mFrameNum++;this.mIsPanic=!1;z.__dirty=!1;this.mLastRenderTime=a;!0===this.mPendingDispose&&this.__dispose()}};M.prototype.__internalUpdate=function(){this.mViewport.__update();for(var a=0;a<this.mSystems.length;a++)this.mSystems[a].onUpdate();this.mStage.__update()};M.prototype.__internalSystemPostUpdate=
function(){for(var a=0;a<this.mSystems.length;a++)this.mSystems[a].onPostUpdate()};M.prototype.__internalSystemRender=function(){for(var a=0;a<this.mSystems.length;a++)this.mSystems[a].onRender()};M.prototype.onTagUpdated=function(a,b,c){if(null!==b){var d=this.mTagCache[b];d.splice(d.indexOf(a),1);0===d.length&&delete this.mTagCache[b]}null!==c&&(!1===this.mTagCache.hasOwnProperty(c)&&(this.mTagCache[c]=[]),this.mTagCache[c].push(a))};M.prototype.onChildrenAdded=function(a,b){var c=this;if(b.root instanceof
ka){z.__dirty=!0;for(b=0;b<this.mSystems.length;b++)this.mSystems[b].onChildrenAdded(a);q.forEach(a,function(a){if(!0!==a.mAdded){c.onTagUpdated(a,null,a.mTag);a.mAdded=!0;a.onAdded();for(var b=0;b<a.mComponents.length;b++){var d=a.mComponents[b];!0!==d.mAdded&&(d.mAdded=!0,d.onAdded(a))}}})}};M.prototype.onChildrenChanged=function(a){z.__dirty=!0;for(var b=0;b<this.mSystems.length;b++)this.mSystems[b].onChildrenChanged(a)};M.prototype.onChildrenRemoved=function(a){var b=this;z.__dirty=!0;for(var c=
0;c<this.mSystems.length;c++)this.mSystems[c].onChildrenRemoved(a);q.forEach(a,function(a){if(!0===a.mAdded){b.onTagUpdated(a,null,a.mTag);a.mAdded=!1;a.onRemoved();for(var c=0;c<a.mComponents.length;c++){var d=a.mComponents[c];!1!==d.mAdded&&(d.mAdded=!1,d.onRemoved(a))}}})};M.prototype.onComponentAdded=function(a,b){z.__dirty=!0;for(var c=0;c<this.mSystems.length;c++)this.mSystems[c].onComponentAdded(a,b);!0!==b.mAdded&&(b.mAdded=!0,b.onAdded(a))};M.prototype.onComponentRemoved=function(a,b){z.__dirty=
!0;for(var c=0;c<this.mSystems.length;c++)this.mSystems[c].onComponentRemoved(a,b);!1!==b.mAdded&&(b.mAdded=!1,b.onRemoved(a))};$jscomp.global.Object.defineProperties(M.prototype,{ups:{configurable:!0,enumerable:!0,get:function(){return.001*l.time.mDeltaTimeMs},set:function(a){g.isNumber(a);g.assert(0<a);l.time.mDeltaTimeMs=1E3/a;l.time.mDeltaTime=.001*l.time.mDeltaTimeMs}},viewport:{configurable:!0,enumerable:!0,get:function(){return this.mViewport}},containerElement:{configurable:!0,enumerable:!0,
get:function(){return this.mContainerElement}},pauseOnHide:{configurable:!0,enumerable:!0,get:function(){return this.mPauseOnHide},set:function(a){this.mPauseOnHide=a}},pauseOnBlur:{configurable:!0,enumerable:!0,get:function(){return this.mPauseOnBlur},set:function(a){this.mPauseOnBlur=a}},isPaused:{configurable:!0,enumerable:!0,get:function(){return this.mPaused}},stage:{configurable:!0,enumerable:!0,get:function(){return this.mStage}},containerElementId:{configurable:!0,enumerable:!0,get:function(){return this.mContainerElementId}},
useHiDPR:{configurable:!0,enumerable:!0,get:function(){return this.mUseHiDPR},set:function(a){this.mUseHiDPR=a}},frameNum:{configurable:!0,enumerable:!0,get:function(){return this.mFrameNum}},numUpdates:{configurable:!0,enumerable:!0,get:function(){return this.mNumUpdates}},maxUpdatesPerFrame:{configurable:!0,enumerable:!0,get:function(){return this.mMaxUpdatesPerFrame},set:function(a){this.mMaxUpdatesPerFrame=a}}});f.Acceleration=cc;f.AlphaOverLife=dc;f.AnchorOverLife=ic;f.AnimationController=za;
f.AnimationInfo=ab;f.Arcade=aa;f.Asset=D;f.AssetLoader=ha;f.AssetManager=H;f.AssetManagerState=$a;f.AtlasTexture=ma;f.AtlasTextureAsset=xb;f.BVGAsset=Cb;f.BVGParser=ia;f.BVGStyle=Za;f.BindingType=eb;f.BitmapFontAsset=Xa;f.BitmapFontCharData=Gc;f.BitmapFontData=Fc;f.BitmapTextField=Eb;f.BitmapTextRenderer=kb;f.BitmapTextRendererCanvas=Pb;f.Black=l;f.BlendMode=Ca;f.BoxCollider=la;f.BoxToBoxPair=Aa;f.BoxToCirclePair=Ba;f.BroadPhase=zc;f.CanvasDriver=ba;f.CanvasRenderTexture=Sa;f.CapsStyle=Ua;f.Circle=
W;f.CircleCollider=qb;f.CircleToCirclePair=La;f.Collider=ja;f.ColorHelper=U;f.ColorOverLife=ec;f.ColorScatter=ya;f.Component=N;f.Curve=S;f.Debug=g;f.Device=Ib;f.DisplayObject=X;f.DisplayObjectRendererCanvas=Va;f.DistortionEffect=Sb;f.Ease=F;f.Emitter=na;f.EmitterRendererCanvas=lb;f.EmitterSortOrder=$b;f.EmitterState=Ia;f.Engine=M;f.FillRule=Bb;f.FloatCurveScatter=bc;f.FloatScatter=L;f.FontAlign=Ic;f.FontAsset=wb;f.FontFaceAssetLoader=Ta;f.FontMetrics=ra;f.FontStyle=Fb;f.FontVerticalAlign=Jc;f.FontWeight=
Gb;f.GameObject=q;f.Glob=ua;f.Graphics=R;f.GraphicsCommand=ib;f.GraphicsCommandType=x;f.GraphicsData=K;f.GraphicsGradient=Kb;f.GraphicsLinearGradient=Ga;f.GraphicsPath=Zb;f.GraphicsPattern=Ab;f.GraphicsRenderer=Nb;f.GraphicsRendererCanvas=nb;f.HSV=pa;f.ImageAssetLoader=rb;f.InitialAnchor=sc;f.InitialColor=rc;f.InitialLife=kc;f.InitialMass=lc;f.InitialPosition=oc;f.InitialRotation=pc;f.InitialScale=mc;f.InitialTexture=qc;f.InitialVelocity=nc;f.Input=V;f.InputComponent=Da;f.Interpolation=Ja;f.JSONAsset=
ub;f.JointStyle=Fa;f.Key={A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,DIGIT_0:48,DIGIT_1:49,DIGIT_2:50,DIGIT_3:51,DIGIT_4:52,DIGIT_5:53,DIGIT_6:54,DIGIT_7:55,DIGIT_8:56,DIGIT_9:57,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,LEFT_ARROW:37,UP_ARROW:38,
RIGHT_ARROW:39,DOWN_ARROW:40,BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,PAUSE_BREAK:19,CAPS_LOCK:20,ESCAPE:27,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,INSERT:45,DELETE:46,LEFT_WINDOW:91,RIGHT_WINDOW:92,CONTEXT_MENU:93,NUM_LOCK:144,SCROLL_LOCK:145,SEMI_COLON:186,EQUAL_SIGN:187,COMMA:188,DASH:189,PERIOD:190,FORWARD_SLASH:191,BACKQUOTE:192,BRAKET_LEFT:219,BACK_SLASH:220,BRAKET_RIGHT:221,SINGLE_QUOTE:222,SPACE:32};
f.KeyInfo=Dc;f.Line=G;f.MapMap=O;f.MasterAudio=fa;f.MathEx=m;f.Matrix=r;f.Message=E;f.MessageBinding=pb;f.MessageDispatcher=C;f.MessageType=db;f.Modifier=y;f.ObjectPool=I;f.Orientation=Hb;f.Oriented=jc;f.Pair=T;f.ParserBase=Lb;f.Particle=Qb;f.Perlin=u;f.Polygon=P;f.Projection=bb;f.RGB=Na;f.RadialScatter=Rb;f.Range=vc;f.Rectangle=t;f.RenderSession=Mb;f.RenderTarget=gb;f.RenderTargetCanvas=Qa;f.Renderer=z;f.ReverbEffect=uc;f.RigidBody=oa;f.RotationOverLife=gc;f.ScaleOverLife=fc;f.Scatter=Ha;f.SimpleEQ=
Wa;f.Sound=Ka;f.SoundAsset=yb;f.SoundAtlasAsset=zb;f.SoundAtlasClip=Ya;f.SoundChannel=sa;f.SoundClip=Ea;f.SoundEffect=wa;f.SoundInstance=ea;f.SoundListener=hb;f.SoundState=da;f.SplashScreen=Tb;f.Sprite=Db;f.SpriteRendererCanvas=mb;f.Stage=ka;f.StageScaleMode=Ra;f.StereoPanner=Jb;f.System=Z;f.TextField=ta;f.TextMetricsData=Bc;f.TextMetricsEx=Pa;f.TextRenderer=xa;f.TextRendererCanvas=Ob;f.TextSegmentMetricsData=Cc;f.TextStyle=Oa;f.Texture=Q;f.TextureAsset=tb;f.TextureOverLife=hc;f.TilingInfo=function(a,
b,c,d,e,f){this.width=void 0===a?0:a;this.height=void 0===b?0:b;this.scaleX=void 0===c?1:c;this.scaleY=void 0===d?1:d;this.wrapX=void 0===e?0:e;this.wrapY=void 0===f?0:f};f.Time=Yb;f.Timer=Ma;f.Tween=Y;f.Vector=k;f.VectorCurveScatter=ac;f.VectorField=ob;f.VectorScatter=ca;f.VectorTextureAsset=jb;f.VideoNullDriver=J;f.Viewport=va;f.XHRAssetLoader=sb;f.XMLAsset=vb;Object.defineProperty(f,"__esModule",{value:!0})});
